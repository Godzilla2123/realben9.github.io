"use strict";(self.webpackChunkcm=self.webpackChunkcm||[]).push([[755],{54755:(fs,on,l)=>{l.d(on,{x:()=>hs});var an=l(3894),st=l(90508),sn=l(15689),t=l(5e3),I=l(93891),d=l(55664),H=l(66873),O=l(98471),_=l(35981);const cn=function(){return["We","They"]};function rn(o,i){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const n=t.oxw(4).index;t.xp6(1),t.Oqu(t.DdM(1,cn)[n])}}function dn(o,i){if(1&o&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&o){const n=t.oxw(3).$implicit;t.xp6(1),t.Oqu(n.annotation)}}function gn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,dn,2,1,"span",15),t.TgZ(2,"span",16),t._uU(3),t.qZA(),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",n.annotation),t.xp6(2),t.Oqu(n.score)}}const ln=function(o){return{final:o}};function pn(o,i){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,rn,2,2,"div",14),t.YNc(2,gn,4,2,"ng-container",14),t.qZA()),2&o){const n=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(3,ln,n.final)),t.xp6(1),t.Q6J("ngIf",void 0===n.score),t.xp6(1),t.Q6J("ngIf",void 0!==n.score)}}function mn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,pn,3,5,"div",12),t.BQk()),2&o){const n=i.last,e=i.first,a=t.oxw(5);t.xp6(1),t.Q6J("ngIf",e||n||a.showAll)}}function _n(o,i){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,mn,2,1,"ng-container",11),t.qZA()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function hn(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,_n,2,1,"div",9),t.qZA()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function fn(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return a.showAll=!a.showAll}),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA()(),t.YNc(4,hn,2,1,"div",7),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(3),t.Oqu(n.showAll?"unfold_less":"unfold_more"),t.xp6(1),t.Q6J("ngForOf",n.getMatrix())}}const un=function(o){return{tr:o}};function Cn(o,i){if(1&o&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(2,un,"card"===n.data.special)),t.xp6(1),t.Oqu(n.data.title)}}function xn(o,i){if(1&o&&(t.TgZ(0,"div",27),t._UZ(1,"div"),t.qZA()),2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.xp6(1),t.uIk("suitxt",e.getSuitText(n.data.text))}}function Pn(o,i){if(1&o&&t._UZ(0,"div",30),2&o){const n=t.oxw(3).$implicit,e=t.oxw(3);t.uIk("suitxt",e.getSuitText(n.data.text.suit))}}function On(o,i){if(1&o&&(t.TgZ(0,"div",28),t._uU(1),t.YNc(2,Pn,1,1,"div",29),t.TgZ(3,"small"),t._uU(4),t.qZA()()),2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.Q6J("ngClass",e.getContractColor(n.data.text.suit)),t.xp6(1),t.hij(" ",n.data.text.text,""),t.xp6(1),t.Q6J("ngIf",void 0!==n.data.text.suit),t.xp6(2),t.Oqu(n.data.text.double)}}function Mn(o,i){if(1&o&&t._UZ(0,"div",35),2&o){const n=i.$implicit,e=t.oxw(7);t.Q6J("ngClass",e.getMatrixClass(n))}}function vn(o,i){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,Mn,1,1,"div",34),t.qZA()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function yn(o,i){if(1&o&&(t.TgZ(0,"div",31),t.YNc(1,vn,2,1,"div",32),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",n.data.text)}}function bn(o,i){if(1&o&&t._UZ(0,"cm-card",37),2&o){const n=i.$implicit,e=t.oxw(3).$implicit,a=t.oxw(3);t.Q6J("deckPrefs",a.component.getDeckPrefs())("full",!1)("ngClass",e.data.class)("card",n)}}const Sn=function(o){return[o]};function wn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,bn,1,4,"cm-card",36),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",t.VKq(1,Sn,n.data.text))}}const Tn=function(o){return{suggestion:o}};function kn(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"cm-card-pile",38),t.NdJ("click",function(a){return t.CHM(n),t.oxw(5).draw(a)}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(3,Tn,e.isSuggestedDeck()))("full",!1)("pile",n.data.text)}}function Zn(o,i){if(1&o&&(t.TgZ(0,"div",39),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.Q6J("ngClass",n.data.class),t.xp6(1),t.Oqu(n.data.text)}}const In=function(o,i,n,e){return{"has-deck":o,"drawable-deck":i,"has-card":n,under:e}};function An(o,i){if(1&o&&(t.TgZ(0,"div")(1,"div",19),t.YNc(2,Cn,2,4,"div",20),t.YNc(3,xn,2,1,"div",21),t.YNc(4,On,5,4,"div",22),t.YNc(5,yn,2,1,"div",23),t.YNc(6,wn,2,3,"ng-container",24),t.YNc(7,kn,2,5,"ng-container",24),t.YNc(8,Zn,2,2,"div",25),t.qZA()()),2&o){const n=t.oxw().$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("ngSwitch",n.data.special)("ngClass",t.l5B(8,In,"deck"===n.data.special,"deck"===n.data.special&&e.canDrawDeck(),"card"===n.data.special,""===n.data.title)),t.xp6(1),t.Q6J("ngIf",n.data.title),t.xp6(1),t.Q6J("ngSwitchCase","suit"),t.xp6(1),t.Q6J("ngSwitchCase","contract"),t.xp6(1),t.Q6J("ngSwitchCase","matrix"),t.xp6(1),t.Q6J("ngSwitchCase","card"),t.xp6(1),t.Q6J("ngSwitchCase","deck")}}function Fn(o,i){if(1&o&&(t.ynx(0),t.YNc(1,An,9,13,"div",14),t.BQk()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",void 0!==n.data.text)}}function Dn(o,i){if(1&o&&t._UZ(0,"cm-game-status",46),2&o){const n=t.oxw().index;t.Q6J("playerIndex",n)}}function Yn(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"cm-game-status",47),t.TgZ(2,"div",48),t._uU(3,"&"),t.qZA(),t._UZ(4,"cm-game-status",47),t.BQk()),2&o){const n=t.oxw().index;t.xp6(1),t.Q6J("teamIndex",n)("playerIndex",0),t.xp6(3),t.Q6J("teamIndex",n)("playerIndex",1)}}const Jn=function(o){return{caution:o}};function Qn(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"div",40),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).showScores()}),t.TgZ(2,"div",41),t._uU(3),t.qZA(),t.TgZ(4,"div",42),t._UZ(5,"cm-game-points-review",43),t.TgZ(6,"div",44),t.YNc(7,Dn,1,1,"cm-game-status",45),t.YNc(8,Yn,5,4,"ng-container",24),t.qZA()()()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(8,Jn,a.component.data.getRound().getScore(e).v)),t.xp6(1),t.Q6J("ngClass",n.theme),t.xp6(1),t.Oqu(a.getTeamName(e)),t.xp6(2),t.Q6J("update",a.component.hasPointsUpdate())("score",a.component.data.getRound().getScore(e)),t.xp6(1),t.Q6J("ngSwitch",a.component.data.game.hasCombinedStatus(e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}const Gn=function(o){return{tall:o}};function Nn(o,i){if(1&o&&(t.TgZ(0,"div",18),t.YNc(1,Fn,2,1,"ng-container",11),t.YNc(2,Qn,9,10,"div",11),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("ngClass",t.VKq(3,Gn,n.isTallContainer())),t.xp6(1),t.Q6J("ngForOf",n.getHeaders()),t.xp6(1),t.Q6J("ngForOf",n.getTeams())}}const Hn=function(o){return{scalable:o}};function Un(o,i){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,fn,5,2,"div",3),t.YNc(2,Nn,3,5,"div",4),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngClass",t.VKq(4,Hn,n.isScalable()))("fxLayout",n.verticalAssistant()?"column":"row"),t.xp6(1),t.Q6J("ngIf",n.isGinRummy()&&n.getMatrix()),t.xp6(1),t.Q6J("ngIf",n.hasInfos())}}let ct=(()=>{class o{constructor(n){this.component=n}isVisible(){return this.hasAssistant()||this.hasInfos()}hasInfos(){if(this.getTeams())return!0;const n=this.getHeaders();for(let e=0;e<n.length;++e)if(void 0!==n[e].getData().text)return!0;return!1}getHeaders(){return this.component.data.game.infoManager.getHeaders()}getSuitText(n){return _.Ex.getSuitText(n,this.component.getDeckPrefs())}getContractColor(n){return _.Ex.getColorName(n,this.component.getDeckPrefs())+"-suit"}getTeams(){if(!this.component.data.isGame(d.Y.Canasta)&&!this.component.data.isGame(d.Y.HandAndFoot))return this.component.data.info.getTeams()}draw(n){this.component.data.game.isEnabled("deck",!1)?(this.component.onSelect("deck",!1),(0,O.bO)(this.component.data,0)):this.component.showInvalidMove(n)}getTeamName(n){return this.component.getTeamName(n)}hasAssistant(){return!this.component.data.history&&this.component.data.hasAssistant()}verticalAssistant(){return this.component.data.isGame(d.Y.Barbu)||this.component.data.isGame(d.Y.Euchre)||this.component.data.isGame(d.Y.OhHell)||this.component.data.isGame(d.Y.Pinochle)||this.component.data.isGame(d.Y.CourtPiece)||this.component.data.isGame(d.Y.Spades)||this.component.data.isGame(d.Y.Whist)||this.component.data.isGame(d.Y.Durak)||this.component.data.isGame(d.Y.CrazyEights)||this.component.data.isGame(d.Y.MauMau)||this.component.data.isGame(d.Y.Switched)||this.component.data.isGame(d.Y.Rummy)||this.component.data.isGame(d.Y.Rummy500)||this.component.data.isGame(d.Y.Canasta)||this.component.data.isGame(d.Y.HandAndFoot)}verticalInfos(){return!!this.component.data.isGame(d.Y.Barbu)||!this.component.data.isGame(d.Y.GinRummy)&&!this.component.data.isGame(d.Y.Durak)&&!!this.getTeams()}isBridge(){return this.component.data.isGame(d.Y.Bridge)}isGinRummy(){return this.component.data.isGame(d.Y.GinRummy)}isHearts(){return this.component.data.isGame(d.Y.Hearts)}isSpades(){return this.component.data.isGame(d.Y.Spades)}isOhHell(){return this.component.data.isGame(d.Y.OhHell)}isTallContainer(){const n=this.getTeams();return!!n&&(3===n.length?this.isOhHell():n.length>4)}getMatrix(){return this.component.data.game.getMatrix()}getMatrixClass(n){return n<0?"neg":0===n?"zero":1===n?"one":2===n?"two":""}isScalable(){const n=this.component.data.detail.extras;return!n||n.indexOf("deck")<0}isSuggestedDeck(){return(0,O.Se)(this.component.data,"-1")}showScores(){this.component.showScores()}canDrawDeck(){return!this.component.data.isGame(d.Y.Durak)&&this.component.data.game.isEnabled("-1",!0)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(H.$,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-header"]],decls:2,vars:1,consts:[["id","ghc"],["id","game-header","fxLayoutGap","4px",3,"ngClass","fxLayout",4,"ngIf"],["id","game-header","fxLayoutGap","4px",3,"ngClass","fxLayout"],["class","matrix gin","fxLayout","row",4,"ngIf"],["class","info-container","fxLayout","column wrap","fxLayoutAlign","center end","fxLayoutGap","2px grid",3,"ngClass",4,"ngIf"],["fxLayout","row",1,"matrix","gin"],["mat-mini-fab","","color","primary",3,"click"],["class","player","fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row",1,"player"],["class","game","fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column",1,"game"],[4,"ngFor","ngForOf"],["class","cell","fxLayout","row","fxLayoutAlign","center center",3,"ngClass",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"cell",3,"ngClass"],[4,"ngIf"],["class","annotation",4,"ngIf"],["fxFlex","",1,"score"],[1,"annotation"],["fxLayout","column wrap","fxLayoutAlign","center end","fxLayoutGap","2px grid",1,"info-container",3,"ngClass"],[1,"info","simple",3,"ngSwitch","ngClass"],["class","head grey",3,"ngClass",4,"ngIf"],["class","display trump",4,"ngSwitchCase"],["class","display trump",3,"ngClass",4,"ngSwitchCase"],["class","display color-matrix",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","display",3,"ngClass",4,"ngSwitchDefault"],[1,"head","grey",3,"ngClass"],[1,"display","trump"],[1,"display","trump",3,"ngClass"],["style","display: inline-block; width: 18px; height: 18px; position: relative; top: 2px; margin: 0 -2px;",4,"ngIf"],[2,"display","inline-block","width","18px","height","18px","position","relative","top","2px","margin","0 -2px"],[1,"display","color-matrix"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["id","trump",3,"deckPrefs","full","ngClass","card",4,"ngFor","ngForOf"],["id","trump",3,"deckPrefs","full","ngClass","card"],[3,"ngClass","full","pile","click"],[1,"display",3,"ngClass"],[1,"info","team",2,"min-width","68px","white-space","nowrap",3,"ngClass","click"],[1,"head","liner","theme",3,"ngClass"],[1,"display","team"],[3,"update","score"],[2,"min-height","18px","font-size","14px",3,"ngSwitch"],[3,"playerIndex",4,"ngSwitchCase"],[3,"playerIndex"],[1,"inline-block",3,"teamIndex","playerIndex"],[1,"inline-block","sec-fade",2,"position","relative","top","-2px","font-size","10px"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Un,3,6,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.isVisible()))},styles:["#ghc[_ngcontent-%COMP%]{position:absolute;z-index:2;right:2px;bottom:2px}@media screen and (min-width: 600px) and (min-height: 768px){#ghc[_ngcontent-%COMP%]{right:8px}}@media screen and (min-width: 600px) and (min-height: 768px){#game-header.scalable[_ngcontent-%COMP%]{transform:scale(1.2);transform-origin:bottom right}}#game-header[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{max-height:102px}#game-header[_ngcontent-%COMP%]   .info-container.tall[_ngcontent-%COMP%]{max-height:152px}#game-header[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{position:relative;max-height:100px;border-radius:4px;box-shadow:0 0 0 2px #0000004d}#game-header[_ngcontent-%COMP%]   .info.has-deck[_ngcontent-%COMP%]{max-width:74px;background:rgba(0,0,0,.3)}#game-header[_ngcontent-%COMP%]   .info.has-deck.drawable-deck[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff9}#game-header[_ngcontent-%COMP%]   .info.has-card.under[_ngcontent-%COMP%]{margin-right:-56px!important}#game-header[_ngcontent-%COMP%]   .info.caution[_ngcontent-%COMP%]{border-radius:4px 4px 6px 6px;box-shadow:0 0 0 2px red}#game-header[_ngcontent-%COMP%]   .info.caution[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{background:#f8bbd0}.game.fivehundred.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.fivehundred.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.bridge.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.bridge.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p8[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p8   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%]{margin-top:50px}#game-header[_ngcontent-%COMP%]   div.head.grey[_ngcontent-%COMP%]{background:#D1C4E9;color:#000000de}#game-header[_ngcontent-%COMP%]   div.head[_ngcontent-%COMP%]{text-align:center;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 4px;border:0;font-size:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#game-header[_ngcontent-%COMP%]   div.head.tr[_ngcontent-%COMP%]{padding:2px 4px;border-top-left-radius:0;border-top-right-radius:2px;border-bottom-left-radius:4px;background:#2b2553;color:#fff;position:absolute;right:-1px;top:-1px;z-index:1}#game-header[_ngcontent-%COMP%]   div.display[_ngcontent-%COMP%]{text-align:center;color:#000000de;background:#fafafa;white-space:nowrap;font-size:20px;padding:7px 6px 6px;border-radius:0 0 6px 6px}#game-header[_ngcontent-%COMP%]   div.display.caution[_ngcontent-%COMP%]{background:red;color:#fff}#game-header[_ngcontent-%COMP%]   div.display.team[_ngcontent-%COMP%]{padding:0 2px;font-size:16px}#game-header[_ngcontent-%COMP%]   div.display.small[_ngcontent-%COMP%]{font-size:16px;padding:9px 6px}#game-header[_ngcontent-%COMP%]   .display.trump[_ngcontent-%COMP%]   [suitxt][_ngcontent-%COMP%]{margin:auto;width:24px;height:24px}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{padding:0;margin-top:-4px}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]   .mat-select-icon[_ngcontent-%COMP%]{width:12px;opacity:.54;transform:none}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]   .mat-select-icon[_ngcontent-%COMP%]:after{font-size:10px}#game-header[_ngcontent-%COMP%]   cm-game-points-review[_ngcontent-%COMP%]{position:relative;top:2px}.inline-block[_ngcontent-%COMP%]{display:inline-block}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]{padding:2px;background:#edf0f3}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{min-width:11px;min-height:8px}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.neg[_ngcontent-%COMP%]{background:#ccc}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.zero[_ngcontent-%COMP%]{background:#fff}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.one[_ngcontent-%COMP%]{background:#ef5350}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.two[_ngcontent-%COMP%]{background:#7B1FA2}#game-header[_ngcontent-%COMP%]   .matrix[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;transform:translateY(-100%);color:#000000de;text-align:center;padding:2px;background:#edf0f3}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:-20px;top:-20px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]{border:1px solid #aaa;border-right:0}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]{border-right:1px solid #aaa}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]{height:24px;max-height:24px;width:48px;max-width:48px;font-size:14px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell.final[_ngcontent-%COMP%]{font-weight:700;border-top:1px solid #aaa;color:#393169}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]   .annotation[_ngcontent-%COMP%]{font-size:11px;opacity:.54;min-width:14px;text-align:right}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-size:16px;text-align:right;padding-right:4px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]:first-child{font-weight:700;border-bottom:1px solid #aaa}"]}),o})();function Bn(o,i){if(1&o&&t._UZ(0,"cm-game-bid-status",5),2&o){const n=t.oxw();t.Q6J("data",n.getBidInfo(n.playerIndex,n.teamIndex))}}function qn(o,i){if(1&o&&t._UZ(0,"cm-game-card-status",6),2&o){const n=t.oxw();t.Q6J("deckPrefs",n.component.getDeckPrefs())("map",n.getWonPilesMap(n.playerIndex,n.teamIndex))}}function Ln(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.component.getStatePlayers()[n.playerIndex].choice)}}function En(o,i){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.component.data.game.getCustomStatus(n.playerIndex,n.teamIndex))}}let V=(()=>{class o{constructor(n,e){this.component=n,this.header=e}ngOnInit(){this.component||(this.component=this.header.component)}getBidInfo(n,e){const a={done:0,total:0,mode:"wait",text:""},s=this.getBid(n,e);if(void 0===s)a.done=-1,a.total=0;else{const c=this.getWon(n,e);s<c?(a.done=s,a.total=c,a.mode="over"):(a.done=c,a.total=s,a.mode="left"),0===s&&0===c?a.text=this.shouldHideTextBid(n,e)?"":this.hasNil()?"Nil":"\u2212":(a.total>7||a.total>6&&!this.component.data.info.getTeams())&&(a.text=this.shouldHideTextBid(n,e)?String(c):c+" / "+s)}return a}hasNil(){return this.component.data.isGame(d.Y.Spades)&&0!=this.component.data.getVariationValue(I.V.Spades.Option.NIL_BONUS)}shouldHideTextBid(n,e){if(this.isWar())return!0;if(this.isBidWhist()||this.isBridge()||this.isTarneeb()||this.isRung())return!1;const a=this.component.data.info.getTeams(),s=this.component.data.game.getBid(n,e);return a&&void 0!==s}getWonPilesMap(n,e){const a=this.component.data.game.getWonMap(n);if(void 0!==a)return a;const s=this.component.data.info.getTeams();return s&&void 0===e&&-1!==e?this.component.data.getStage().getTeamWonMap(n):(s&&void 0!==e&&-1!==e&&(n=e+n*s.length),this.component.data.getStage().getWonMap(n))}isBidWhist(){return this.component.data.isGame(d.Y.Whist)&&this.component.data.hasVariation(I.V.Whist.Option.BIDDING)}isBridge(){return this.component.data.isGame(d.Y.Bridge)}isWar(){return this.component.data.isGame(d.Y.War)}isRung(){return this.component.data.isGame(d.Y.CourtPiece)}isTarneeb(){return this.component.data.isGame(d.Y.Tarneeb)}getBid(n,e){const a=this.component.data.info.getTeams();a&&void 0!==e&&-1!==e&&(n=e+n*a.length);const s=this.component.data.game.getBid(n,void 0);if(void 0!==s&&a&&-1===e)return this.getWon(n,e);let c=this.component.data.getRound().getBid(n);if(a&&void 0===e&&-1!==e&&void 0===s){const m=this.component.data.info.getPlayerCount()/a.length;for(var r=1;r<m;++r)c+=this.component.data.getRound().getBid(n+r*a.length)}return c}getWon(n,e){const a=this.component.data.info.getTeams();a&&void 0!==e&&-1!==e&&(n=e+n*a.length);let s=this.component.data.getStage().getWon(n);if(a&&void 0===e&&-1!==e){const r=this.component.data.info.getPlayerCount()/a.length;for(var c=1;c<r;++c)s+=this.component.data.getStage().getWon(n+c*a.length)}return s||0}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(H.$,9),t.Y36(ct,9))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-status"]],inputs:{playerIndex:"playerIndex",teamIndex:"teamIndex"},decls:5,vars:4,consts:[[3,"ngSwitch"],[3,"data",4,"ngSwitchCase"],[3,"deckPrefs","map",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"data"],[3,"deckPrefs","map"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Bn,1,1,"cm-game-bid-status",1),t.YNc(2,qn,1,2,"cm-game-card-status",2),t.YNc(3,Ln,2,1,"span",3),t.YNc(4,En,2,1,"div",4),t.qZA()),2&n&&(t.Q6J("ngSwitch",e.component.data.game.getPlayerStatusType()),t.xp6(1),t.Q6J("ngSwitchCase","bid"),t.xp6(1),t.Q6J("ngSwitchCase","card"),t.xp6(1),t.Q6J("ngSwitchCase","choice"))},styles:[""]}),o})();var g=l(69808),S=l(23322),rt=l(47187);function zn(o,i){if(1&o&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngClass",n.data.done===n.data.total?"txt-completed":"left"===n.data.mode?"txt-pending":"txt-exceeded"),t.xp6(1),t.Oqu(n.data.text)}}function Rn(o,i){if(1&o&&t._UZ(0,"div",5),2&o){const n=i.index,e=t.oxw(2);t.Q6J("ngClass",n<e.data.done?"bid-completed":"left"===e.data.mode?"bid-pending":"bid-exceeded")}}function Wn(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Rn,1,1,"div",4),t.ALo(2,"cmArray"),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.data.total))}}const Vn=function(o){return{"target-bids":o}};let $n=(()=>{class o{constructor(n){this.status=n}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(V,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-bid-status"]],inputs:{data:"data"},decls:3,vars:6,consts:[[3,"ngSwitch","ngClass"],["class","bid-txt",3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"bid-txt",3,"ngClass"],["class","bid-slot",3,"ngClass",4,"ngFor","ngForOf"],[1,"bid-slot",3,"ngClass"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,zn,2,2,"div",1),t.YNc(2,Wn,3,3,"div",2),t.qZA()),2&n&&(t.Q6J("ngSwitch",""===e.data.text)("ngClass",t.VKq(4,Vn,e.status.component.data.game.hasTargetBids())),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0))},directives:[g.RF,g.mk,S.oO,g.n9,g.sg],pipes:[rt.I],styles:[".bid-slot[_ngcontent-%COMP%]{display:inline-block;border-radius:25%;width:6px;height:10px;margin-top:2px;margin-right:1px}.bid-slot[_ngcontent-%COMP%]:first-child{margin-left:1px}.bid-completed[_ngcontent-%COMP%]{background:#3949ab;border:1px solid #303f9f}.bid-pending[_ngcontent-%COMP%]{border:1px solid #757575}.bid-exceeded[_ngcontent-%COMP%]{background:#e53935;border:1px solid #d32f2f}.target-bids[_ngcontent-%COMP%]   .bid-exceeded[_ngcontent-%COMP%]{background:#43a047;border:1px solid #388e3c}.txt-exceeded[_ngcontent-%COMP%]{color:#d32f2f}.txt-completed[_ngcontent-%COMP%], .target-bids[_ngcontent-%COMP%]   .txt-exceeded[_ngcontent-%COMP%]{color:#388e3c}"]}),o})();var M=l(64271);const Kn=["canvas"],jn=["top"],dt=2/52;function bt(o,i,n,e,a){let s,c;void 0===a?(s=72*(e?1:1.5),c=100*(e?1:1.5)):(s=Math.min(108,M.Ak.calculateStackWidth(a)),c=100*s/72),St(o,s,c,n,!0,e),St(i,s,c,n-1,!1,e)}function St(o,i,n,e,a,s){const c=_.Ex.linkFn(o,i+2,n+2);if(c.translate(0,n+2),e<=0)return c.strokeStyle="#aaa",_.Ex.roundedRect(c,0,-n,i,n,4),void c.stroke();c.fillStyle="#1a237e",c.shadowColor="rgba(0,0,0,.4)",c.shadowOffsetX=-1,c.shadowOffsetY=1;let r=e-1;if(a){const m=dt*(r-1);c.translate(m,-m),r=0}for(let m=0;m<=r;++m)_.Ex.roundedRect(c,0,-n,i,n,4),c.fill(),m===r?(c.shadowColor="transparent",c.shadowOffsetX=0,c.shadowOffsetY=0,c.fillStyle="#283593",_.Ex.roundedRect(c,4,4-n,i-8,n-8,4),c.fill(),c.font=s?"12px sans-serif":"14px sans-serif",c.textAlign="right",c.fillStyle="#c5cae9",c.fillText(String(e),i-8,-10),c.translate(i/2,-n/2),M.Ak.drawLogo(c,3*i/4)):c.translate(dt,-dt)}let wt=(()=>{class o{constructor(n){this.render=n}ngOnChanges(){setTimeout(()=>{(0,O.c4)(),this.renderSmartCard()},250)}ngOnDestroy(){_.Ex.detatch(this.canvas)}onResize(){void 0!==this.piles?bt(this.top,this.canvas,this.pile,void 0,this.piles):void 0===this.full&&this.renderSmartCard()}isCompact(){const n=(0,O.fM)(),e=(0,O.gp)();return n<600||e<768}renderSmartCard(){const n=void 0===this.full?this.isCompact():!this.full;bt(this.top,this.canvas,this.pile,n,this.piles)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-card-pile"]],viewQuery:function(n,e){if(1&n&&(t.Gf(Kn,5),t.Gf(jn,5)),2&n){let a;t.iGM(a=t.CRH())&&(e.canvas=a.first),t.iGM(a=t.CRH())&&(e.top=a.first)}},hostBindings:function(n,e){1&n&&t.NdJ("resize",function(){return e.onResize()},!1,t.Jf7)},inputs:{pile:"pile",piles:"piles",full:"full"},features:[t.TTD],decls:5,vars:0,consts:[[2,"position","relative","margin-top","-2px"],["id","deck-top",2,"position","absolute","top","0","left","0"],["top",""],[2,"border-bottom-left-radius","4px"],["canvas",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"canvas",1,2)(3,"canvas",3,4),t.qZA())},encapsulation:2}),o})();function Xn(o,i){1&o&&t._UZ(0,"div",4)}function te(o,i){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t._UZ(2,"span"),t.qZA()),2&o){const n=i.$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getCardClass(n)),t.xp6(1),t.Oqu(e.convertValue(n[0])),t.xp6(1),t.uIk("suitxt",e.getSuitTextForCard(n))}}function ne(o,i){if(1&o&&(t.TgZ(0,"span",5),t._UZ(1,"span"),t._uU(2),t.qZA()),2&o){const n=t.oxw().index,e=t.oxw(2);t.Q6J("ngClass",e.getSuitClass(n)),t.xp6(1),t.uIk("suitxt",e.getSuitText(n)),t.xp6(1),t.Oqu(e.map.suit[n])}}function ee(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ne,3,3,"span",6),t.BQk()),2&o){const n=i.index,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.map.suit[n]>0)}}function oe(o,i){if(1&o&&t._UZ(0,"span",5),2&o){const n=t.oxw().index,e=t.oxw(4);t.Q6J("ngClass",e.getSuitClass(n)),t.uIk("suitxt",e.getSuitText(n))}}function ae(o,i){if(1&o&&(t.ynx(0),t.YNc(1,oe,1,2,"span",6),t.BQk()),2&o){const n=i.index,e=t.oxw(2).index,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.map.value[e].indexOf(n)>=0)}}function ie(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,ae,2,1,"ng-container",3),t.ALo(3,"cmArray"),t.qZA()),2&o){const n=t.oxw().index,e=t.oxw(2);t.xp6(1),t.Oqu(e.convertValue("23456789TJQKA"[n])),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,2,5))}}function se(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ie,4,4,"span",0),t.BQk()),2&o){const n=i.index,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.map.value[n])}}function ce(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Xn,1,0,"div",1),t.ALo(2,"cmArray"),t.YNc(3,te,3,3,"span",2),t.YNc(4,ee,2,1,"ng-container",3),t.ALo(5,"cmArray"),t.YNc(6,se,2,1,"ng-container",3),t.ALo(7,"cmArray"),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,4,n.map.back)),t.xp6(2),t.Q6J("ngForOf",n.map.card),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,6,5)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,8,13))}}let re=(()=>{class o{constructor(){}getSuitClass(n){return _.Ex.getColorName(n,this.deckPrefs)+"-suit"}getSuitText(n){return _.Ex.getSuitText(n,this.deckPrefs)}getSuitTextForCard(n){return this.getSuitText(_.Ex.getSuitIndex(n))}getCardClass(n){return this.getSuitClass(_.Ex.getSuitIndex(n))}convertValue(n){const e=this.deckPrefs.deckPrefs;return"T"===n&&(n="10"),"German"===e?"J"===n?n="B":"Q"===n&&(n="D"):"Swiss-German"===e?"J"===n?n="U":"Q"===n&&(n="O"):"Russian"===e?"J"===n?n="B":"Q"===n?n="D":"A"===n&&(n="T"):"Sweden"===e?"J"===n?n="Kn":"Q"===n?n="D":"A"===n&&(n="E"):"French"===e&&("J"===n?n="V":"Q"===n?n="D":"K"===n?n="R":"A"===n&&(n="1")),n}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-card-status"]],inputs:{map:"map",deckPrefs:"deckPrefs"},decls:1,vars:1,consts:[[4,"ngIf"],["class","bid-slot bid-completed",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"bid-slot","bid-completed"],[3,"ngClass"],[3,"ngClass",4,"ngIf"]],template:function(n,e){1&n&&t.YNc(0,ce,8,10,"div",0),2&n&&t.Q6J("ngIf",e.map)},directives:[g.O5,g.sg,g.mk,S.oO],pipes:[rt.I],styles:[".bid-slot[_ngcontent-%COMP%]{display:inline-block;border-radius:25%;width:6px;height:10px;margin-top:2px;margin-right:1px}.bid-slot[_ngcontent-%COMP%]:first-child{margin-left:1px}.bid-completed[_ngcontent-%COMP%]{background:#3949ab;border:1px solid #303f9f}.bid-pending[_ngcontent-%COMP%]{border:1px solid #757575}.bid-exceeded[_ngcontent-%COMP%]{background:#e53935;border:1px solid #d32f2f}.target-bids[_ngcontent-%COMP%]   .bid-exceeded[_ngcontent-%COMP%]{background:#43a047;border:1px solid #388e3c}.txt-exceeded[_ngcontent-%COMP%]{color:#d32f2f}.txt-completed[_ngcontent-%COMP%], .target-bids[_ngcontent-%COMP%]   .txt-exceeded[_ngcontent-%COMP%]{color:#388e3c}[suitxt][_ngcontent-%COMP%]{display:inline-block;margin-top:-2px;position:relative;top:2px;width:12px;height:12px}"]}),o})();var de=l(15861),q=l(56509),k=l(28866),G=l(62714),K=l(83244);function ge(o,i){1&o&&t._UZ(0,"cm-pile-stage")}function le(o,i){1&o&&t._UZ(0,"cm-pile-stage")}function pe(o,i){1&o&&t._UZ(0,"cm-pass-stage")}function me(o,i){1&o&&t._UZ(0,"cm-solitaire-stage",5)}function _e(o,i){1&o&&t._UZ(0,"cm-word-stage")}function he(o,i){1&o&&t._UZ(0,"cm-dominoes-stage")}function fe(o,i){1&o&&t._UZ(0,"cm-display-stage")}function ue(o,i){1&o&&t._UZ(0,"cm-durak-stage")}function Ce(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1,"End of game"),t.qZA())}function xe(o,i){1&o&&t._UZ(0,"cm-auction-history")}function Pe(o,i){if(1&o&&t._UZ(0,"cm-user-face",15),2&o){const n=t.oxw(3);t.Q6J("url",n.getTurnPlayer().meta.data.url)}}function Oe(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(n),t.oxw(4).onPrevPage()}),t.TgZ(1,"mat-icon"),t._uU(2,"keyboard_arrow_left"),t.qZA()()}}function Me(o,i){if(1&o){const n=t.EpF();t.ynx(0),t._UZ(1,"span",16),t.YNc(2,Oe,3,0,"button",17),t.TgZ(3,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).onNextPage()}),t.TgZ(4,"mat-icon"),t._uU(5,"keyboard_arrow_right"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(3);t.xp6(2),t.Q6J("ngIf",!n.isFirstPage()),t.xp6(1),t.Q6J("disabled",n.isLastPage())}}const ve=function(o){return{prefix:o}};function ye(o,i){if(1&o&&t._UZ(0,"div",24),2&o){const n=t.oxw(3).$implicit,e=t.oxw(3);t.Q6J("ngClass",t.VKq(2,ve,e.getSuitPrefix(n))),t.uIk("suitxt",e.getSuitText(n))}}function be(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"cmTranslate"),t.qZA(),t.YNc(4,ye,1,4,"div",23),t.BQk()),2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,e.getSuitPrefix(n))),t.xp6(2),t.Q6J("ngIf",e.getSuit(n))}}function Se(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"cmTranslate"),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n))}}function we(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().index;return t.oxw(3).onSelect(a)}),t.ynx(1,22),t.YNc(2,be,5,4,"ng-container",1),t.YNc(3,Se,3,3,"span",1),t.BQk(),t.qZA()}if(2&o){const n=t.oxw(),e=n.index,a=n.$implicit,s=t.oxw(3);t.Q6J("disabled",s.isOptionDisabled(e,a))("ngClass",s.getExtraClasses(e,a)),t.xp6(1),t.Q6J("ngSwitch",s.hasSuits()),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}function Te(o,i){if(1&o&&(t.ynx(0),t.YNc(1,we,4,5,"button",20),t.BQk()),2&o){const n=i.$implicit,e=i.index,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",a.isOptionVisible(e,n))}}function ke(o,i){1&o&&t._UZ(0,"mat-divider")}const Ze=function(o,i){return{"mat-raised-button":o,"ter-fade":i}};function Ie(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",25),t.NdJ("click",function(){const s=t.CHM(n).index;return t.oxw(3).onSelect(-1-s)}),t._uU(2),t.qZA(),t.BQk()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(3);t.xp6(1),t.Q6J("disabled",a.isOptionDisabled(-1-e,n))("ngClass",t.WLB(3,Ze,a.isSelected(-1-e),a.isOptionDisabled(-1-e,n))),t.xp6(1),t.hij(" ",n," ")}}const Ae=function(o){return{"mat-raised-button":o}};function Fe(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).onConfirm()}),t._uU(1," Done "),t.qZA()}if(2&o){const n=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Ae,n.hasConfirmed()))}}const Tt=function(o){return{disabled:o}};function De(o,i){if(1&o&&(t.ynx(0),t.YNc(1,xe,1,0,"cm-auction-history",3),t.TgZ(2,"div",7)(3,"mat-toolbar",8),t.YNc(4,Pe,1,1,"cm-user-face",9),t.TgZ(5,"h2",10),t._uU(6),t.ALo(7,"cmTranslate"),t.qZA(),t.YNc(8,Me,6,2,"ng-container",3),t.qZA(),t.TgZ(9,"div",11),t.YNc(10,Te,2,1,"ng-container",12),t.qZA(),t.YNc(11,ke,1,0,"mat-divider",3),t.TgZ(12,"div",13),t.YNc(13,Ie,3,6,"ng-container",12),t.YNc(14,Fe,2,3,"button",14),t.qZA()(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.hasAuctionHistory()),t.xp6(3),t.Q6J("ngIf",n.hasTurns()&&n.getTurnPlayer().meta.data),t.xp6(2),t.Oqu(t.lcZ(7,10,n.getTitle())),t.xp6(2),t.Q6J("ngIf",n.hasPages()),t.xp6(1),t.Q6J("ngClass",t.VKq(12,Tt,!n.isEnabled())),t.xp6(1),t.Q6J("ngForOf",n.getChoices()),t.xp6(1),t.Q6J("ngIf",n.hasActions()),t.xp6(1),t.Q6J("ngClass",t.VKq(14,Tt,!n.isEnabled())),t.xp6(1),t.Q6J("ngForOf",n.getActions()),t.xp6(1),t.Q6J("ngIf",!n.component.data.history&&n.hasConfirmation())}}function Ye(o,i){if(1&o&&(t.TgZ(0,"div",6),t.YNc(1,De,15,16,"ng-container",3),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isPending())}}const Je=["pile","trick","pass","single","dominoes","display","durak","final","words"];let A=(()=>{class o{constructor(n){this.component=n,this.pageIndex=0,this.pageIndexStageType=""}ngOnInit(){this.component.setStageUpdateCallback(()=>this.onUpdate())}onUpdate(){this.pageIndexStageType!==this.getType()&&(this.pageIndex=0);const n=this.getChoice();if(n&&"null"!=n&&n!=this.selectedChoice&&this.hasPrompt()&&this.playSound(n),this.selectedChoice=n,!(["bid","auction"].indexOf(this.getType())<0)&&void 0!==this.selectedChoice&&this.hasPages()){const e=parseInt(this.selectedChoice,10);e>=0&&(this.pageIndex=Math.floor(e/12),this.pageIndexStageType=this.getType())}}hasAuctionHistory(){return this.component.data.getStage().isAuction()}isSolitaire(){return this.component.data.config.solitaire}isSoloPlay(){return this.component.isSoloPlay()}getTitle(){return this.component.data.getStage().getPromptTitle()}getType(){return this.component.data.getStage().type}isDisplay(){return this.component.data.getStage().isDisplay()}isSelected(n){return"players"===this.getType()?(n=this.component.data.info.revertIndex(n),this.selectedChoice&&this.selectedChoice.indexOf(String(n))>=0):("trump"===this.getType()&&!this.component.data.hasCardSelectionInTrumpStage()&&(n=this.transformTrumpSelectionIndex(n)),n===parseInt(this.selectedChoice,10))}playSound(n){if(n>=0)this.component.data.playSound(G.g.PROMPT_SELECT);else{const e=this.getActions();if(!e)return;const a=e[-1-n];this.component.data.playSound("pass"==a||"throw in"==a||"sit out"==a||"redeal"==a?G.g.DONE:G.g.PROMPT_SELECT)}}transformTrumpSelectionIndex(n){if(n<0)return n;const e=this.component.data.game.getSuitOrder();return K.p_.indexOf(e.suitIconsWithNT[n])}onSelect(n){const e="players"===this.getType(),a=e;if(e&&(n=this.component.data.info.revertIndex(n)),"trump"===this.getType()&&!this.component.data.hasCardSelectionInTrumpStage()&&(n=this.transformTrumpSelectionIndex(n)),this.isEnabled()){let s;this.component.data.info.hasDummy()&&this.component.data.getState().hasTurn(this.component.data.info.getDummyIndex())&&(s="dummy"),this.selectedChoice=a&&this.selectedChoice?this.selectedChoice+":"+n:String(n),this.playSound(n),this.component.dataService.stageAction(n,s)}}isEnabled(){return this.component.data.getStage().isPromptEnabled()}hasTurns(){return!this.component.data.getState().hasSimultaneousTurns()}hasConfirmation(){return"players"===this.getType()}hasConfirmed(){return this.component.data.choiceManager.hasConfirmed(this.component.data.getState().getTurn())}onConfirm(n){this.component.dataService.stageAction("confirm")}hasActions(){const n=this.getType();if(this.component.data.config.betting)return!0;if("trump"===n&&this.component.data.isGame(d.Y.CourtPiece)&&this.component.data.hasVariation(I.V.TrumpStage.Option.REDEAL)){const e=this.component.data.getState().getTurn();if(this.component.data.hasSelf()&&0===e||this.component.data.info.hasDummy()&&e===this.component.data.info.getDummyIndex()){const a=this.component.data.getHand(e);for(let s=0;s<a.length;s++)if("-"!==a[s][0]&&M.Ak.getValue(a[s])>10)return!1;return!0}return this.isSelected(-1)}return!!(this.component.data.isGame(d.Y.Euchre)||this.component.data.isGame(d.Y.Pinochle)&&"choice"===n||this.component.data.isGame(d.Y.Klaverjassen)||this.component.data.isGame(d.Y.Skat)&&("trump"===n||"choice_alt"===n)||"auction"===n)}getChoices(){return this.component.data.getStage().getChoices()}getMyChoice(){return this.component.data.choiceManager.getChoiceFor(0)}getChoice(){return this.component.data.choiceManager.getChoiceFor(this.getState().getTurn())}getDummyChoice(){return this.component.data.choiceManager.getDummyChoice()}getActions(){if(!this.hasActions())return;const n=this.component.data,e=n.getStage(),a=e.type;if(n.isGame(d.Y.Blackjack))return"choice"===a?[]:n.detail.extras;if(n.config.betting){if("choice"===a)return["sit out","play"];if("choice_alt"===a)return["pass"];const s=n.getRound().getStage().getState().getTurn(),c=n.getRound().getStage().getState().getPotMin(s),r=0===c?"check":"call ("+c+")";return n.game.hasAllIn?["fold",r,"all in"]:["fold",r]}if("auction"===a)return n.isGame(d.Y.FiveHundred)?["pass","nullo","open"]:this.component.data.hasVariation(I.V.AuctionStage.Option.DOUBLES)?["pass","double","redouble"]:this.component.data.hasVariation(I.V.AuctionStage.Option.REDEAL)?["pass","redeal"]:["pass"];if(n.isGame(d.Y.CourtPiece))return["redeal"];if(n.isGame(d.Y.Klaverjassen)){if("choice"===a&&0===e.index)return["pass","take"];if("trump"===a)return this.component.data.choiceManager.isChoiceEnabled("-1")?["pass"]:[]}else{if(n.isGame(d.Y.Euchre)){if("choice"===a&&0===e.index){const s=n.getStage().start,c=n.getState().getTurn();return s===c?["pass","order it up"]:(s+1)%4===c?this.component.data.hasVariation(I.V.Euchre.Option.TURN_IT_DOWN)?["pass","turn it down"]:["pass","order it up"]:(s+2)%4===c?["pass","order it up"]:["pass","take it up"]}if("trump"===a){const s=n.getRound().getStage().getState().getTurn();return this.component.data.choiceManager.isChoiceEnabledFor(s,"-1")||this.component.data.choiceManager.isChoiceSelectedFor(s,"-1")?["pass"]:[]}return["pass","alone"]}if(n.isGame(d.Y.Pinochle))return n.hasVariation(I.V.Pinochle.Option.SHOOT_THE_MOON)?["throw in","play","shoot the moon"]:["throw in","play"];if(n.isGame(d.Y.Skat)){if("trump"===a)return["grand","null"];if("choice_alt"===a)return["pass"]}}return["todo"]}getTurnPlayer(){return this.component.getTurnPlayer()}getState(){return this.component.data.getState()}isPending(){return this.getState().isPending()}hasSuits(){const n=this.getType();return"trump"===n||"auction"===n&&this.component.data.isGame(d.Y.Bridge)||this.component.data.isGame(d.Y.Tarneeb)&&this.component.data.hasVariation(I.V.Tarneeb.Option.AUCTION_WITH_TRUMP)||this.component.data.isGame(d.Y.FiveHundred)}getSuit(n){if("trump"===this.getType())return"NT"===n?void 0:n;const a=n[n.length-1];return"T"!=a?a:void 0}getSuitIndex(n){return K.CG.indexOf(n[n.length-1])}getSuitText(n){return _.Ex.getSuitText(this.getSuitIndex(n),this.component.getDeckPrefs())}getSuitPrefix(n){return"trump"===this.getType()?"NT"===n?n:void 0:"T"==n[n.length-1]?n:n.substring(0,n.length-1)}getExtraClasses(n,e){let a="";const s=this.getType();if("players"===s||this.component.data.isGame(d.Y.Skat)&&("choice"===s||"choice_alt"===s)||("choice"!==s||this.getChoices().length<5)&&(a+="big "),this.isSuggested(""+(this.hasSuits()?K.p_.indexOf(e):n))&&(a+="suggestion "),this.hasSuits()){const r=this.component.cacheService.firebaseCache.self.meta.getDeckPreferences();a+=_.Ex.getColorName(this.getSuitIndex(e),r)+"-suit-button "}return this.isSelected(n)&&(a+="mat-raised-button "),this.isOptionDisabled(n,e)&&(a+="ter-fade"),a}getPages(){const n=this.getChoices();return void 0===n?1:Math.ceil(n.length/12)}hasPages(){return this.getPages()>1}isFirstPage(){return 0===this.pageIndex}isLastPage(){return this.pageIndex===this.getPages()-1}onPrevPage(){--this.pageIndex,this.pageIndexStageType=this.getType()}onNextPage(){++this.pageIndex,this.pageIndexStageType=this.getType()}isOptionVisible(n,e){return"players"===this.getType()?n!==this.component.data.getState().getTurn():("trump"===this.getType()&&!this.component.data.hasCardSelectionInTrumpStage()&&(n=this.transformTrumpSelectionIndex(n)),!this.hasPages()||Math.floor(n/12)===this.pageIndex)}isOptionDisabled(n,e){"players"===this.getType()&&(n=this.component.data.info.revertIndex(n)),"trump"===this.getType()&&!this.component.data.hasCardSelectionInTrumpStage()&&(n=this.transformTrumpSelectionIndex(n));const a=this.component.data.choiceManager;return a.hasChoices()&&!a.isChoiceEnabled(n)}isSuggested(n){return(0,O.Se)(this.component.data,n)}hasPromptOnTop(){return"pile"===this.getType()&&this.component.data.config.betting&&!this.component.data.isGame(d.Y.ThirtyOne)}hasPrompt(){return Je.indexOf(this.getType())<0||this.hasPromptOnTop()}hasWordStage(){return this.component.isWordGame()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(H.$,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-stage"]],decls:11,vars:13,consts:[["id","stage","fxLayout","row",3,"ngClass","ngSwitch","fxLayoutAlign"],[4,"ngSwitchCase"],["style","z-index:10;","class","clickable",4,"ngSwitchCase"],[4,"ngIf"],["id","prompt",4,"ngIf"],[1,"clickable",2,"z-index","10"],["id","prompt"],[1,"mat-elevation-z8"],["color","primary",1,"dark-toolbar","mat-elevation-z2"],["size","small",3,"url",4,"ngIf"],[2,"font-size","16px","margin-left","12px"],["fxLayout","row wrap",1,"content",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"content",2,"text-align","right",3,"ngClass"],["mat-button","","color","green","style","margin: 4px;","aria-label","Done",3,"ngClass","click",4,"ngIf"],["size","small",3,"url"],["fxFlex",""],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","",3,"click"],["mat-button","","color","primary","aria-label","choice",3,"disabled","ngClass","click",4,"ngIf"],["mat-button","","color","primary","aria-label","choice",3,"disabled","ngClass","click"],[3,"ngSwitch"],["style","width: 28px; height: 28px; margin: 2px 6px;",3,"ngClass",4,"ngIf"],[2,"width","28px","height","28px","margin","2px 6px",3,"ngClass"],["mat-button","","color","primary","aria-label","option","aria-label","action",2,"margin","4px",3,"disabled","ngClass","click"],["mat-button","","color","green","aria-label","Done",2,"margin","4px",3,"ngClass","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,ge,1,0,"cm-pile-stage",1),t.YNc(2,le,1,0,"cm-pile-stage",1),t.YNc(3,pe,1,0,"cm-pass-stage",1),t.YNc(4,me,1,0,"cm-solitaire-stage",2),t.YNc(5,_e,1,0,"cm-word-stage",3),t.YNc(6,he,1,0,"cm-dominoes-stage",1),t.YNc(7,fe,1,0,"cm-display-stage",1),t.YNc(8,ue,1,0,"cm-durak-stage",1),t.YNc(9,Ce,2,0,"div",1),t.YNc(10,Ye,2,1,"div",4),t.qZA()),2&n&&(t.Q6J("ngClass",e.isSoloPlay()?"solo-play":"non-solo-play")("ngSwitch",e.getType())("fxLayoutAlign",e.isSolitaire()?"center":"center center"),t.xp6(1),t.Q6J("ngSwitchCase","pile"),t.xp6(1),t.Q6J("ngSwitchCase","trick"),t.xp6(1),t.Q6J("ngSwitchCase","pass"),t.xp6(1),t.Q6J("ngSwitchCase","single"),t.xp6(1),t.Q6J("ngIf",e.hasWordStage()),t.xp6(1),t.Q6J("ngSwitchCase","dominoes"),t.xp6(1),t.Q6J("ngSwitchCase","display"),t.xp6(1),t.Q6J("ngSwitchCase","durak"),t.xp6(1),t.Q6J("ngSwitchCase","final"),t.xp6(1),t.Q6J("ngIf",e.hasPrompt()))},styles:["#stage.non-solo-play[_ngcontent-%COMP%]{position:absolute;z-index:3;margin:0;top:82px;right:70px;left:70px;bottom:96px}@media screen and (max-width: 320px){#stage.non-solo-play[_ngcontent-%COMP%]{top:76px;right:62px;left:62px;bottom:96px}}@media screen and (min-width: 600px) and (min-height: 768px){#stage.non-solo-play[_ngcontent-%COMP%]{top:112px;right:102px;left:102px;bottom:116px}}.bingo[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%]{position:absolute;left:-70px;right:-70px;bottom:4px}@media screen and (max-width: 320px){.bingo[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%]{right:-62px;left:-62px;bottom:2px}}@media screen and (min-width: 600px) and (min-height: 768px){.bingo[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   #stage[_ngcontent-%COMP%]   cm-pile-stage[_ngcontent-%COMP%]{right:-104px;left:-104px;bottom:8px}}#prompt[_ngcontent-%COMP%]{position:absolute;bottom:8px;max-width:224px}@media screen and (min-width: 600px) and (min-height: 768px){#prompt[_ngcontent-%COMP%]{bottom:24px;transform-origin:bottom center;transform:scale(1.25)}}@media screen and (max-width: 360px){#prompt[_ngcontent-%COMP%]{margin-left:-8px;margin-right:-8px}}@media screen and (max-width: 320px){#prompt[_ngcontent-%COMP%]{margin-left:-16px;margin-right:-16px}}#prompt[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{border-top-left-radius:4px;border-top-right-radius:4px;min-height:auto;height:40px;min-width:200px;padding:4px 0 4px 8px}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background:white}#prompt[_ngcontent-%COMP%]   .content.disabled[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;padding:0}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button.mat-primary[_ngcontent-%COMP%]:not(.mat-raised-button){color:#393169}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [suitxt][_ngcontent-%COMP%]{margin:2px 14px!important}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [suitxt].prefix[_ngcontent-%COMP%]{display:inline-block;margin:2px 0!important}#prompt[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .big[_ngcontent-%COMP%]{margin:0;font-size:20px;min-height:56px;min-width:56px}"]}),o})();var h=l(77093),F=l(47423),Y=l(25245),Qe=l(5895),Ge=l(5495);function Ne(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2),t._uU(2),t.ALo(3,"cmBigMinus"),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.ALo(6,"cmWithSign"),t.qZA(),t.TgZ(7,"div",4),t._uU(8,"="),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,n.score.pts-n.score.u[0]-n.score.u[1])),t.xp6(2),t.Q6J("ngClass",n.score.color),t.xp6(1),t.Oqu(t.lcZ(6,5,n.score.u[0]+n.score.u[1]))}}let j=(()=>{class o{hasUpdate(){return this.update&&this.score.u[0]+this.score.u[1]!=0}getPoints(){return(this.score.pts||0)-(this.hasUpdate()?0:this.score.offset||0)}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-points-review"]],inputs:{score:"score",update:"update"},decls:5,vars:4,consts:[["style","display:inline-block;",4,"ngIf"],[2,"display","inline-block"],[2,"display","inline-block","opacity","0.7"],[2,"display","inline-block","margin-left","1px","margin-right","1px",3,"ngClass"],[1,"sec-fade",2,"display","inline-block","font-size","12px","margin-right","2px","position","relative","top","-1px"]],template:function(n,e){1&n&&(t.TgZ(0,"div"),t.YNc(1,Ne,9,7,"div",0),t.TgZ(2,"div",1),t._uU(3),t.ALo(4,"cmBigMinus"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.hasUpdate()),t.xp6(2),t.Oqu(t.lcZ(4,2,e.getPoints())))},directives:[g.O5,g.mk,S.oO],pipes:[Qe._,Ge.S],styles:[""]}),o})();var mt=l(41683),L=l(58386),X=l(79099),kt=l(93573);function He(o,i){if(1&o&&t._UZ(0,"cm-card",6),2&o){const n=i.$implicit,e=t.oxw(2);t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("full",!1)("card",n)}}function Ue(o,i){if(1&o&&(t.TgZ(0,"div",4),t.YNc(1,He,1,3,"cm-card",5),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getPile())}}function Be(o,i){if(1&o&&(t.TgZ(0,"div",7),t._UZ(1,"cm-user",8),t.TgZ(2,"div",9),t._uU(3,"\xa0\u279c\xa0"),t.qZA(),t._UZ(4,"cm-user",8),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("disable",!0)("user",n.getPassSender()),t.xp6(3),t.Q6J("disable",!0)("user",n.getPassRecipient())}}function qe(o,i){if(1&o&&t._UZ(0,"cm-small-card",12),2&o){const n=i.$implicit,e=t.oxw(2);t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("card",n)}}function Le(o,i){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,qe,1,2,"cm-small-card",11),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getPassedCards())}}function Zt(o,i){if(o.isGame(d.Y.FiveCardDraw))return-1;void 0===i&&(i=_t(o));const n=o.getStage().getPlayerProperty(i,"to");let e=-1;if(-1!==n)if(o.isGame(d.Y.SergeantMajor))e=o.info.adjustIndex(n);else for(let a=0;a<o.info.getPlayerCount();++a){const s=o.getStage().getPlayerProperty(a,"to");if(0===o.info.adjustIndex(s)){e=a;break}}return e}function _t(o){return o.getStage().getProperty("single")?o.getStage().start:function ze(o){if(o.isGame(d.Y.FiveCardDraw))return-1;for(let i=0;i<o.info.getPlayerCount();++i)if(o.getStage().getIntegerPlayerProperty(i,"size")>0)return i;return console.log("Couldn't find passing index: "+JSON.stringify(o.getStage().info)),0}(o)}let Re=(()=>{class o{constructor(n){this.stage=n}showPassingPeople(){return!this.stage.component.data.isGame(d.Y.Palace)}showPassedCards(){return this.stage.component.data.hasSelf()}getPassedCards(){const n=this.stage.component.data.getSelfData(),e=this.stage.component.data.getStage().getIntegerPlayerProperty(0,"size");if(this.stage.component.data.getState().isStageComplete()&&n.lastCardsGot)return n.lastCardsGot;const a=this.stage.component.data.choiceManager.getSelected(),s=this.stage.component.data.isGame(d.Y.Pinochle);if(s&&this.stage.component.data.info.getPlayerCount()>4&&this.stage.component.data.info.hasTeams()&&this.getPassRecipient()===L.fl){const c=e/(this.stage.component.data.info.getPlayerCount()/2-1),r=[];for(let m=0;m<a.length;++m)m>0&&m%c==0&&r.push("-1"),r.push(a[m]);return r}if(!s&&n.stole&&0==a.length){if(1===e)return[n.stole];if(2===e&&n.stole2)return[n.stole,n.stole2];if(3===e&&n.stole2&&n.stole3)return[n.stole,n.stole2,n.stole3];if(4===e&&n.stole2&&n.stole3&&n.stole4)return[n.stole,n.stole2,n.stole3,n.stole4]}return a}getPersonInfo(){const n=_t(this.stage.component.data),e=this.stage.component.data.info.getPlayerId(n);return{index:n,user:this.stage.component.findUserById(e)}}shouldShowReverse(n){return this.stage.component.data.getState().isStageComplete()&&0===n&&!this.stage.component.data.isGame(d.Y.Pinochle)}getPassText(){if(this.stage.component.data.isGame(d.Y.Palace))return"Select "+this.stage.component.data.getStage().getIntegerPlayerProperty(this.getPersonInfo().index,"size")+" cards to play with";if(!this.showPassingPeople())return"Players passing cards";const n=this.getPersonInfo(),e=n.index,a=this.stage.component.data.getStage().getIntegerPlayerProperty(e,"size"),s=void 0===a||-1===a?"cards":a+" card"+(1===a?"":"s");if(this.shouldShowReverse(e)){let f=this.getPassSender();if(f===L.fl){if(this.stage.component.data.isGame(d.Y.FiveCardDraw))return"You exchanged "+s+" from deck";if(this.stage.component.data.isGame(d.Y.SergeantMajor))return"You got "+s+" from "+(this.stage.component.data.getStage().getProperty("single")?"deck":"others");this.stage.component.data.isGame(d.Y.Hearts)&&(f=void 0)}return(f?f.meta.getName():"Others")+" passed "+s+" to you"}let c=this.getPassRecipient();if(c===L.fl){const f=this.stage.component.data.getStage().getProperty("single");if(!(this.stage.component.data.isGame(d.Y.Hearts)||this.stage.component.data.isGame(d.Y.Pinochle)&&this.stage.component.data.info.hasTeams()||this.stage.component.data.isGame(d.Y.SergeantMajor)&&!f)){let p="";if(0===e&&this.stage.component.data.isGame(d.Y.Skat)){const C=this.stage.component.data.getSelfData();C&&(p=" - got "+M.Ak.convertInitialsToIcons(C.stole),a>1&&C.stole2&&(p+=", "+M.Ak.convertInitialsToIcons(C.stole2)))}return(0===e?"Discard":n.user.meta.getName()+" discarding")+" "+s+p}c=void 0}let r="Pass",m="";if((this.stage.component.data.isGame(d.Y.ThreeTwoFive)||this.stage.component.data.isGame(d.Y.President)||this.stage.component.data.isGame(d.Y.TienLen)||this.stage.component.data.isGame(d.Y.BigTwo))&&(r="Return",0===e)){const f=this.stage.component.data.getSelfData();f&&(m=" - got "+M.Ak.convertInitialsToIcons(f.stole),a>1&&f.stole2&&(m+=", "+M.Ak.convertInitialsToIcons(f.stole2)))}return(0===e?r:n.user.meta.getName()+(this.stage.component.data.getState().isStageComplete()?" passed":" passing"))+" "+s+" to "+(c?c.meta.getName():"others")+m}getPassSender(){const n=this.getPersonInfo(),e=n.index;if(!this.shouldShowReverse(e))return n.user;const a=this.stage.component.data,s=Zt(a,e);return-1===s?L.fl:this.stage.component.findUserById(a.info.getPlayerId(s))}getPassRecipient(){const n=this.getPersonInfo(),e=n.index;if(this.shouldShowReverse(e))return n.user;const a=this.stage.component.data,s=function Ee(o,i){if(o.isGame(d.Y.FiveCardDraw))return-1;void 0===i&&(i=_t(o));const e=o.getStage().getPlayerProperty(i,"to");return o.info.adjustIndex(e)}(a,e),c=a.info.getPlayerId(s);return-1===s?L.fl:this.stage.component.findUserById(c)}getPile(){return this.stage.component.data.isGame(d.Y.Pinochle)&&"kitty"===this.stage.component.data.getStage().originalType?this.stage.component.data.getState().getPublicDraw():this.stage.component.data.isGame(d.Y.ArizonaDiscardem)?this.stage.component.data.getRound().getPreviousStage().getState().getProperty(k.s6):void 0}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-pass-stage"]],decls:7,vars:4,consts:[["class","pile","fxLayout","row",4,"ngIf"],[1,"pass-info"],["style","text-align: center; margin-top: 12px;",4,"ngIf"],["fxLayout","row","class","cards",4,"ngIf"],["fxLayout","row",1,"pile"],[3,"deckPrefs","full","card",4,"ngFor","ngForOf"],[3,"deckPrefs","full","card"],[2,"text-align","center","margin-top","12px"],["size","default",2,"display","inline-block",3,"disable","user"],[1,"sec-fade",2,"display","inline-block","position","relative","top","-14px"],["fxLayout","row",1,"cards"],[3,"deckPrefs","card",4,"ngFor","ngForOf"],[3,"deckPrefs","card"]],template:function(n,e){1&n&&(t.TgZ(0,"div"),t.YNc(1,Ue,2,1,"div",0),t.TgZ(2,"div",1)(3,"span"),t._uU(4),t.qZA(),t.YNc(5,Be,5,4,"div",2),t.qZA(),t.YNc(6,Le,2,1,"div",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.getPile()),t.xp6(3),t.Oqu(e.getPassText()),t.xp6(1),t.Q6J("ngIf",e.showPassingPeople()),t.xp6(1),t.Q6J("ngIf",e.showPassedCards()))},directives:[g.O5,h.xw,g.sg,M.Ak,X.A,kt.c],styles:[".pass-info[_ngcontent-%COMP%]{position:absolute;bottom:72px;min-width:200px;transform:translate(-50%);background:#fafafa;color:#000000de;padding:16px 4px;border-radius:4px;text-align:center}@media screen and (max-width: 320px){.pass-info[_ngcontent-%COMP%]{padding:8px}}@media screen and (min-width: 600px) and (min-height: 768px){.pass-info[_ngcontent-%COMP%]{transform-origin:top left;transform:scale(1.25) translate(-50%,-50%)}}.pile[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%)}.pile[_ngcontent-%COMP%]   cm-card[_ngcontent-%COMP%]{max-width:24px}.cards[_ngcontent-%COMP%]{position:absolute;bottom:-8px;left:50%;transform:translate(-50%,-50%)}.cards[_ngcontent-%COMP%]   cm-small-card[_ngcontent-%COMP%]{max-width:24px}"]}),o})();var We=l(37887),Ve=l(91271),tt=l(49257);function $e(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(a){return t.CHM(n),t.oxw(3).onDiscard(a)}),t._uU(1),t.qZA()}if(2&o){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.getDiscardText()," ")}}function Ke(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(a){t.CHM(n);const s=t.oxw().$implicit;return t.oxw(2).onSmartButton(a,s)}),t._uU(1),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.hij(" ",e.getSmartButtonText(n)," ")}}function je(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(2).onClick(c,a)}),t.YNc(1,$e,2,1,"button",6),t.YNc(2,Ke,2,1,"button",7),t._UZ(3,"cm-card",8),t.qZA()}if(2&o){const n=i.$implicit,e=t.oxw(2);t.uIk("card",n),t.xp6(1),t.Q6J("ngIf",e.hasDiscard(n)),t.xp6(1),t.Q6J("ngIf",e.hasSmartButton(n)),t.xp6(1),t.Q6J("deckPrefs",e.component.getDeckPrefs())("animate",e.getAnimationSource(n))("full",e.component.getFullCardParameter())("ngClass",e.getClass(n))("card",n)}}function Xe(o,i){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,je,4,8,"div",4),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getHand())}}function to(o,i){if(1&o&&t._UZ(0,"cm-game-mini-hand-count",14),2&o){const n=t.oxw(2);t.Q6J("count",n.getHand()?n.getHand().length:0)}}const no=function(o){return{scaled:o}};function eo(o,i){if(1&o&&t._UZ(0,"cm-game-mini-hand",15),2&o){const n=t.oxw(2);t.Q6J("deckPrefs",n.component.getDeckPrefs())("ngClass",t.VKq(3,no,n.hasScaledHands()))("hand",n.getHand())}}function oo(o,i){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,to,1,1,"cm-game-mini-hand-count",12),t.YNc(2,eo,1,5,"cm-game-mini-hand",13),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngSwitch",n.showOtherHands()),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0)}}let nt=(()=>{class o{constructor(n,e,a){this.snackBar=n,this.component=e,this.dataService=a}getParent(){return this.component.data.livePlayers[this.player].getData()}hasBigCards(){return 0===this.player||this.isDummy()}isDummy(){const n=this.getParent();return!(!n||!n.dummy)}isMyDummy(){return this.isDummy()&&2===this.player}showOtherHands(){return this.component.data.config.betting?!(!this.component.data.isGame(d.Y.StudPoker)&&!this.component.data.isGame(d.Y.Blackjack))||!!this.component.data.isGame(d.Y.TexasHoldem)&&this.component.data.getStage().isDisplay():!!(this.component.data.getStage().isTrick()&&this.component.data.getState().getProperty("tram")||this.component.data.isGame(d.Y.Cribbage)&&this.component.data.getStage().isDisplay())||!!(this.component.data.livePlayers&&this.component.data.livePlayers[this.player]&&this.component.data.livePlayers[this.player].getData())}hasScaledHands(){return this.component.data.isGame(d.Y.Bridge)||this.component.data.game.hasPaddedPlayers()}getHand(){if(this.component.data.getStage().isTrick()){const a=this.component.data.getState().getProperty("tram");if(a)return a[this.player]}let n=this.component.data.getHand(this.player);if(0===this.player&&0==n.length&&this.component.data.isGame(d.Y.Palace)){let a=this.component.data.getState().getPlayerProperty(this.player,k.SK).length;0==a&&(a=this.component.data.getState().getPlayerProperty(this.player,k.dC));for(let s=0;s<a;++s)n.push("-3")}const e=this.getParent();return e&&(n=e[k.rj],e.o&&this.component.data.isGame(d.Y.GinRummy)&&0!=this.player&&this.component.data.info.getPlayerCount()>2&&(e.sorted||(e.sorted=!0,(0,We.e)(e,this.component.data.game.getSuitOrder(),this.component.data.game.shouldSortAscending())))),this.isDummy()&&!this.isMyDummy()?n:n&&e&&e[k.Uv]&&this.component.data.getStage().isTrick()?n.filter(a=>e[k.Uv]!==a):n}hasExtendedChoice(n,e,a){const s=this.component.data.choiceManager.getSelected();if(s.indexOf(e)>=0)return!0;for(let c=0;c<a.length;++c){let r=a[c];if(s.indexOf(r)>=0)continue;const m=(0,O.p$)(s);if(m.push(r),q.F.hasMatchingChoice(n,m))return!0}return!1}isEnabled(n){const e=this.getChoices();if(!e||0===e.length)return!1;const a=this.component.data.game.getDuplicates(this.getHand(),n);return this.hasExtendedChoice(e,n,a)}isFaded(n){if(this.component.data.isGame(d.Y.Bingo)||this.component.data.isGame(d.Y.Cassino))return!1;const e=this.getChoices();return void 0!==e&&e.length>0&&!this.isEnabled(n)}getInfoCard(){return this.component.getInfoCard()}getChoices(){const n=this.getParent();if(n)return q.F.filterChoices(n[k.VI],this.component.data.choiceManager.getSelected())}getClass(n){if("info"===n)return this.infoCardClicked?"partial":"";if(this.component.data.isGame(d.Y.GinRummy)&&0!==this.player)return"";if(this.component.data.hasAssistant()&&0!==this.player)return"-"===n[0]?"faded":"";if("-"===n[0])return"";const e=this.component.data.getStage().type;if(this.component.data.config.betting&&"pass"!==e){if(0===this.player&&this.component.data.isGame(d.Y.StudPoker)){const m=this.component.data.getState().getPlayerProperty(this.player,k.SK);return m&&m.indexOf(n)>=0?"":"faded"}return""}const a=this.getParent();if(!a)return"";const s=a[k.Np];let r="";switch(s&&q.F.isChoiceMatch(s,n)&&(r+="suggestion "),e){case"pass":this.component.data.getState().isStageComplete()&&a.lastCardsGot&&a.lastCardsGot.indexOf(n)>=0&&(r+="partial ");case"pile":case"dominoes":case"durak":case"trick":r+=this.isFaded(n)?"faded ":""}if(r+=this.component.data.choiceManager.isSelected(n)?"partial ":"",(this.component.data.isGame(d.Y.Canasta)||this.component.data.isGame(d.Y.HandAndFoot)||this.component.data.isGame(d.Y.Rummy500)||this.component.data.isGame(d.Y.Rummy))&&!this.component.data.choiceManager.hasSelected()){const m=this.component.data.choiceManager.getThrowOptions(this.getHand(),n,!1);1===m.length&&m[0]===n+":-1"&&(r+="discard ")}return this.component.data.isGame(d.Y.Palace)&&"pass"===e&&this.component.data.getState().getPlayerProperty(this.player,k.SK).indexOf(n)>=0&&(r+="highlight "),r}onClick(n,e){if("info"===n)return void(this.infoCardClicked=!this.infoCardClicked);if(this.component.data.history)return;if(this.isDummy()&&2!==this.player)return;if(this.component.dragManager.wasJustDragged())return;const a=this.isDummy();let s=this.component.data.getStage().type;switch(this.component.data.isGame(d.Y.Cheat)&&(s="pass"),s){case"pass":if(this.component.data.getState().hasTurn()&&!this.isFaded(n)){const r=this.component.data.choiceManager;if(r.onSelect(n,this.getHand()),!this.component.data.game.hasAnySizePass()){const m=r.getSelected().join(":");this.dataService.stageAction(m,a?"dummy":void 0)}return}break;case"trump":const c=a?this.component.data.info.getDummyIndex():0;if(this.component.data.getState().hasTurn(c))return void(this.component.data.hasCardSelectionInTrumpStage()?this.dataService.stageAction(n,a?"dummy":void 0):this.dataService.stageAction(_.Ex.getSuitIndex(n),a?"dummy":void 0));break;case"pile":case"dominoes":case"durak":case"trick":if(this.isEnabled(n)){const r=this.getHand();return void this.play(e,r,n,void 0,this.component.hasThrowDialog(),a)}if(this.component.data.isGame(d.Y.War)&&this.component.data.game.isEnabled("-1",!0))return void this.dataService.stageAction("-1")}this.component.showInvalidMove(e)}play(n,e,a,s,c,r){let m=!1;this.component.data.choiceManager.hasSelected()&&(m=!0,this.component.data.choiceManager.onSelect(a,e)),void 0===s&&(s=this.component.data.choiceManager.getThrowOptions(e,a,r));const f=this.component.data.isGame(d.Y.GoFish)?this.component.data.getRound().getPlayerChoices(this.component.data.info.selfIndex)[0]:this.component.data.choiceManager.getSuboptions();if(0==s.length)return console.log("No throw options!? Stuck!!! Resetting!"),void this.component.data.choiceManager.clearSelected();const p=this.component.data.isGame(d.Y.Cassino);if(!(s.length>(p?0:1))||c||p&&(0,O.wt)(s)){if(this.component.data.config.rummy&&!this.component.data.choiceManager.hasSelected()&&!c&&(m||this.component.data.choiceManager.onSelect(a,e),this.component.data.isGame(d.Y.GinRummy)||s.length>1||s[0].indexOf("-1")>0))return;if(this.component.showThrow(s,f,r?"dummy":void 0),1===s.length){const C=s[0],y=C.split(":");if(y.length<=1||"-1"===y[1]){const b=!this.component.data.isGame(d.Y.Rummy500)&&!this.component.data.isGame(d.Y.Durak),x=r?"#pile-dummy":"#pile";(0,O.eD)(this.getParent(),n,x,b)}else this.component.data.isGame(d.Y.Rummy500)||this.component.data.isGame(d.Y.Rummy)?(0,O.aK)(C,y[0][0]===y[1][0]?"-2":"-3"):(this.component.data.isGame(d.Y.Canasta)||this.component.data.isGame(d.Y.HandAndFoot))&&(0,O.aK)(C,"-2")}}else m||this.component.data.choiceManager.onSelect(a,e)}getAnimationSource(n){const e=this.getParent();if(!e)return;const a=this.component.data;if(a&&a.getStage().isPass()&&e.lastCardsGot&&e.lastCardsGot.indexOf(n)>=0){const s=this.component.data.getState().getStateId();e.lastCardsPassSound!=s&&(e.lastCardsPassSound=s,this.component.data.playSound(G.g.PASS));const c=Zt(a);return-1===c?void 0:c}}getMeldOptions(n){const e=[],a=this.component.data.choiceManager.getThrowOptions(this.getHand(),n,!1);for(let s=0;s<a.length;++s){const c=a[s];c.split(":").length>=3&&e.push(c)}return e}getRummySmartButtonIndex(n){const e=this.component.hasSmartButton(1),a=this.component.hasSmartButton(2);if(e===a){const s=this.getMeldOptions(n).length>0,c=(e?1:0)+(a?1:0)+(s?1:0);if(0===c)return-1;if(c>1)return 10;if(s)return 3}return e?1:2}getDiscardText(){return this.component.data.isGame(d.Y.Cassino)?"TRAIL":"DISCARD"}hasDiscard(n){return!!this.component.data.choiceManager.isSelected(n)&&(this.component.data.isGame(d.Y.Cassino)?this.component.getSmartAction(0)===n:this.component.hasSmartButton(0))}onDiscard(n){this.component.onSmartButton(n,0,!0),n.stopPropagation()}hasSmartButton(n){if("info"===n)return this.infoCardClicked;if(this.component.data.isGame(d.Y.Cassino))return this.component.getSmartAction(0)!==n;if(this.component.isRummy()&&this.component.data.choiceManager.isSelected(n)){if(this.component.data.isGame(d.Y.GinRummy)){if(!this.component.data.game.isEnabled("-2",!0))return!1;const e=this.getParent();if(!e||!e.o)return!0;const a=e.o;let s=!1,c=0;for(let r=0;r<a.length;++r)c+=a[r].length,a[r].indexOf(n)>=0&&(s=!0);return!s||c===e.h.length}return-1!==this.getRummySmartButtonIndex(n)}return!1}getSmartButtonText(n){if("info"===n)return"hide";if(this.component.data.isGame(d.Y.Cassino)){const a=this.component.getSmartAction(0).split(":");return a[a.length-1]===n?"BUILD":"CAPTURE"}if(this.component.data.isGame(d.Y.GinRummy)){const a=this.component.data.getSelfData();return a?a.count>0?"KNOCK":"GIN":"KNOCK"}const e=this.getRummySmartButtonIndex(n);if(3===e)return"MELD";if(!this.component.data.isGame(d.Y.Canasta)){if(2===e)return"RUN";if(1===e)return"SET";if(10===e)return"LAYOFF"}return"LAYOFF"}onSmartButton(n,e){if("info"===e)this.infoCardClicked=!1,this.dataService.toggleInfoCard();else if(this.component.data.isGame(d.Y.Cassino))this.component.onSmartButton(n,0,!0);else if(this.component.data.isGame(d.Y.GinRummy))this.component.onSelect("-2",!0);else{const a=this.getRummySmartButtonIndex(e);if(3===a){const s=this.getHand(),c=this.getMeldOptions(e);c.length>1&&this.snackBar.open("Try melding by selecting multiple cards (tap them one after the other), it's easier and faster!","DISMISS",{duration:5e3}),this.play(n,s,e,c,!0,!1)}else if(10===a){const s=this.getHand();let c=this.component.data.choiceManager.getThrowOptions(s,e,!1);const r=c.indexOf(e+":-1");r>=0&&c.splice(r,1),this.play(n,s,e,c,!0,!1)}else this.component.onSmartButton(n,a,!0)}n.stopPropagation()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Ve.ux),t.Y36(H.$,1),t.Y36(tt.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-hand"]],inputs:{player:"player"},decls:3,vars:3,consts:[[1,"hand",3,"ngSwitch"],["class","big-hand","fxLayout","row","fxLayoutAlign","center",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchCase"],["fxLayout","row","fxLayoutAlign","center",1,"big-hand"],["cmDraggable","","class","smart hand-card-container clickable",3,"click",4,"ngFor","ngForOf"],["cmDraggable","",1,"smart","hand-card-container","clickable",3,"click"],["color","warn","mat-raised-button","","style","position: absolute; top: -72px;  margin: 0; padding: 0; min-width: 72px; width: 100%; font-size: 10px;",3,"click",4,"ngIf"],["color","primary","mat-raised-button","","style","position: absolute; bottom: 4px; margin: 0; padding: 0; min-width: 0px;  width: 100%; font-size: 10px; color: #ffb923",3,"click",4,"ngIf"],[3,"deckPrefs","animate","full","ngClass","card"],["color","warn","mat-raised-button","",2,"position","absolute","top","-72px","margin","0","padding","0","min-width","72px","width","100%","font-size","10px",3,"click"],["color","primary","mat-raised-button","",2,"position","absolute","bottom","4px","margin","0","padding","0","min-width","0px","width","100%","font-size","10px","color","#ffb923",3,"click"],[3,"ngSwitch"],[3,"count",4,"ngSwitchCase"],["class","other-hand",3,"deckPrefs","ngClass","hand",4,"ngSwitchCase"],[3,"count"],[1,"other-hand",3,"deckPrefs","ngClass","hand"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Xe,2,1,"div",1),t.YNc(2,oo,3,3,"div",2),t.qZA()),2&n&&(t.Q6J("ngSwitch",e.hasBigCards()),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1))},encapsulation:2}),o})();var ao=l(82430);const io=["canvas"],so=function(o){return{back:o}};let go=(()=>{class o{constructor(){}ngAfterViewInit(){this.renderCard()}ngOnChanges(){this.renderCard()}ngOnDestroy(){_.Ex.detatch(this.canvas)}renderCard(){if(!this.card||!this.canvas||!this.canvas.nativeElement)return;const n=this.card,e=_.Ex.linkFn(this.canvas,15,40),a=_.Ex.getColor(n,this.deckPrefs);e.fillStyle=e.strokeStyle=a;const s=_.Ex.getSuitIndex(n),c=s===_.kt;c||M.Ak.fillMiniHandValue(e,n[0],14,1),n.length>=3&&this.star&&n[2]===ao.I&&_.Ex.drawSuit(e,this.deckPrefs.typePrefs,_.kt,-5,-10/3,10),_.Ex.drawSuit(e,this.deckPrefs.typePrefs,s,1,c?0:14,10)}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-mini-hand-card"]],viewQuery:function(n,e){if(1&n&&t.Gf(io,5),2&n){let a;t.iGM(a=t.CRH())&&(e.canvas=a.first)}},inputs:{star:"star",card:"card",deckPrefs:"deckPrefs"},features:[t.TTD],decls:2,vars:3,consts:[[1,"mini","card",3,"ngClass"],["canvas",""]],template:function(n,e){1&n&&t._UZ(0,"canvas",0,1),2&n&&t.Q6J("ngClass",t.VKq(1,so,"-"===e.card[0]))},directives:[g.mk,S.oO],encapsulation:2}),o})();function lo(o,i){if(1&o&&t._UZ(0,"cm-mini-hand-card",2),2&o){const n=i.$implicit,e=i.index,a=t.oxw();t.Udp("transform",a.getTransform(e)),t.Q6J("star",a.star)("suitPrefs",a.suitPrefs)("jokerPrefs",a.jokerPrefs)("deckPrefs",a.deckPrefs)("typePrefs",a.typePrefs)("ngClass",a.getClass(n))("card",n)}}let ft=(()=>{class o{constructor(n){this.handComponent=n}getClass(n){if(this.handComponent)return this.handComponent.getClass(n)}getTransform(n){return"rotate("+(this.hand.length<=11?19:190/(this.hand.length-1))*(n-(this.hand.length-1)/2)+"deg)"}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(nt,9))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-mini-hand"]],inputs:{star:"star",hand:"hand",suitPrefs:"suitPrefs",jokerPrefs:"jokerPrefs",deckPrefs:"deckPrefs",typePrefs:"typePrefs"},decls:2,vars:1,consts:[[1,"mini-hand"],["style","position: absolute; transform-origin: bottom;",3,"star","suitPrefs","jokerPrefs","deckPrefs","typePrefs","ngClass","card","transform",4,"ngFor","ngForOf"],[2,"position","absolute","transform-origin","bottom",3,"star","suitPrefs","jokerPrefs","deckPrefs","typePrefs","ngClass","card"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,lo,1,9,"cm-mini-hand-card",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",e.hand))},directives:[g.sg,go,g.mk,S.oO],encapsulation:2}),o})();function po(o,i){if(1&o&&t._UZ(0,"cm-game-points-review",19),2&o){const n=t.oxw().index,e=t.oxw(2);t.Q6J("ngClass",e.stage.component.hasPointsUpdate()?"pts-update":"pts-value")("update",e.stage.component.hasPointsUpdate())("score",e.stage.component.data.getRound().getScore(n))}}function mo(o,i){if(1&o&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&o){const n=t.oxw(),e=n.$implicit,a=n.index,s=t.oxw(2);t.xp6(1),t.hij(" ",s.stage.component.data.game.getMeldAnnotation(e,a)," ")}}function _o(o,i){if(1&o&&(t.TgZ(0,"div",23),t._uU(1),t.qZA()),2&o){const n=i.$implicit;t.Q6J("ngClass","bg-"+i.index),t.xp6(1),t.Oqu(n)}}function ho(o,i){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,_o,2,2,"div",22),t.qZA()),2&o){const n=t.oxw(),e=n.$implicit,a=n.index,s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",s.stage.component.data.game.getMeldBackground(e,a))}}function fo(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"cm-mini-card",27),t.qZA()),2&o){const n=i.$implicit,e=i.index,a=t.oxw(2).$implicit,s=t.oxw(3);t.Udp("height",s.getMeldCardHeight(a,e),"px"),t.xp6(1),t.Q6J("deckPrefs",s.stage.component.getDeckPrefs())("animate",s.stage.component.data.getState().turn)("card",n)}}function uo(o,i){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,fo,2,5,"div",26),t.qZA()),2&o){const n=t.oxw().$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",e.trackObjectFn)}}function Co(o,i){if(1&o&&(t.ynx(0),t.YNc(1,uo,2,2,"div",24),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.isMeldVisible(n))}}const xo=function(o,i,n,e){return{active:o,double:i,triple:n,quadruple:e}};function Po(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(a){const c=t.CHM(n).index;return t.oxw(2).stage.component.onSmartButton(a,c+1)}),t.TgZ(1,"button",11),t.NdJ("click",function(a){const c=t.CHM(n).index;return t.oxw(2).stage.component.onSmartButton(a,c+1),a.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"file_download"),t.qZA()(),t.TgZ(4,"div",12),t.YNc(5,po,1,3,"cm-game-points-review",13),t.TgZ(6,"div",14),t._uU(7),t.qZA()(),t.YNc(8,mo,2,1,"div",15),t.TgZ(9,"div",16),t.YNc(10,ho,2,1,"div",17),t.YNc(11,Co,2,1,"ng-container",18),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(2);t.Q6J("ngClass",t.l5B(8,xo,a.stage.component.hasSmartButton(e+1),2===a.getMelds().length,3===a.getMelds().length,4===a.getMelds().length)),t.uIk("suboption",-2-e),t.xp6(4),t.Q6J("ngClass",a.getMeldClass(e)),t.xp6(1),t.Q6J("ngIf",a.stage.component.data.info.getTeams()),t.xp6(2),t.Oqu(a.getMeldName(e)),t.xp6(1),t.Q6J("ngIf",a.stage.component.data.game.getMeldAnnotation(n,e)),t.xp6(2),t.Q6J("ngIf",a.stage.component.data.game.getMeldBackground(n,e)),t.xp6(1),t.Q6J("ngForOf",n)}}function Oo(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,Po,12,13,"div",9),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getMelds())}}function Mo(o,i){if(1&o&&(t.TgZ(0,"div",28),t._UZ(1,"cm-game-mini-hand",29)(2,"cm-user",30),t.TgZ(3,"div",31)(4,"b")(5,"u"),t._uU(6,"T"),t.qZA()(),t._uU(7,"he "),t.TgZ(8,"b")(9,"u"),t._uU(10,"R"),t.qZA()(),t._uU(11,"est "),t.TgZ(12,"b")(13,"u"),t._uU(14,"A"),t.qZA()(),t._uU(15,"re "),t.TgZ(16,"b")(17,"u"),t._uU(18,"M"),t.qZA()(),t._uU(19,"ine"),t.qZA()()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("deckPrefs",n.stage.component.getDeckPrefs())("hand",n.getTramHand()),t.xp6(1),t.Q6J("user",n.getTramUser())}}function vo(o,i){if(1&o&&t._UZ(0,"cm-user",36),2&o){const n=t.oxw(2);t.Q6J("user",n.getAccumulatedPileUser())}}const yo=function(o){return{danger:o}};function bo(o,i){if(1&o&&(t.TgZ(0,"div",32),t._UZ(1,"div",33),t.TgZ(2,"div",34),t._uU(3),t.qZA(),t.YNc(4,vo,1,1,"cm-user",35),t.qZA()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(3,yo,n.isAccumulatedPileInDanger())),t.xp6(1),t.Oqu(n.getAccumulatedPileCount()),t.xp6(1),t.Q6J("ngIf",n.isAccumulatedPileInDanger())}}function So(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",42)(1,"cm-card",43),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(2).onCardClick(a,c)}),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(2);t.Q6J("ngClass",a.getPlayerClass(e,n)),t.xp6(1),t.Q6J("deckPrefs",a.stage.component.getDeckPrefs())("animate",a.getPlayerIndex(e))("full",a.stage.component.getFullCardParameter())("pile",a.getPlayerIndex(e)+"-"+a.getPlayerCount()+"-"+a.getOffsetSuffix(e))("card",n)}}function wo(o,i){if(1&o&&t._UZ(0,"cm-card",46),2&o){const n=i.$implicit,e=t.oxw(3);t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("full",e.stage.component.getFullCardParameter())("card",n)}}const At=function(o){return[o]};function To(o,i){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,wo,1,3,"cm-card",45),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.VKq(1,At,n.stage.getDummyChoice()))}}function ko(o,i){if(1&o&&t._UZ(0,"cm-card",48),2&o){const n=i.$implicit,e=t.oxw(3);t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("full",e.stage.component.getFullCardParameter())("card",n)}}function Zo(o,i){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,ko,1,3,"cm-card",47),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.VKq(1,At,n.stage.getMyChoice()))}}function Io(o,i){if(1&o&&(t.TgZ(0,"div",37),t.YNc(1,So,2,6,"div",38),t.TgZ(2,"div",39),t.YNc(3,To,2,3,"div",40),t.qZA(),t.TgZ(4,"div",41),t.YNc(5,Zo,2,3,"div",40),t.qZA()()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getPile()),t.xp6(2),t.Q6J("ngIf",!n.stage.component.data.history&&n.stage.getDummyChoice()&&n.getPile()&&n.getPile().indexOf(n.stage.getDummyChoice())<0),t.xp6(2),t.Q6J("ngIf",!n.stage.component.data.history&&n.stage.getMyChoice()&&"-1"!=n.stage.getMyChoice()&&"-2"!=n.stage.getMyChoice()&&"-3"!=n.stage.getMyChoice()&&n.getPile()&&n.getPile().indexOf(n.stage.getMyChoice())<0)}}function Ao(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",52)(1,"cm-card",53),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(2).onCardClick(a,c)}),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(2);t.Q6J("ngClass",a.getPlayerClass(e,n)),t.xp6(1),t.Q6J("deckPrefs",a.stage.component.getDeckPrefs())("animate",a.getPlayerIndex(e))("full",a.stage.component.getFullCardParameter())("card",n)}}function Fo(o,i){if(1&o&&(t.TgZ(0,"div",49),t.YNc(1,Ao,2,5,"div",50),t._UZ(2,"div",51),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getPile())}}function Ft(o){return JSON.parse(JSON.stringify(o))}function Dt(o,i,n){for(let e=0;e<n.length;++e){const a=o+":"+n[e];if(i.indexOf(a)>=0)return[a]}return i}function E(o,i,n){const e=[],a=Ft(i);for(let s=0;s<n.length;++s){const c=o+":"+n[s];i.indexOf(c)>=0&&(e.push(c),a.splice(a.indexOf(c),1))}return 0===a.length?[e[0]]:1===a.length?a:i}function Yt(o,i){const n=[];void 0===i&&(i=o.length);for(let e=0;e<i;++e)0===o[e][0]&&n.push(-1-e);return n}let z=(()=>{class o{constructor(n){this.stage=n}isBetting(){return this.stage.component.data.config.betting}hasSpread(){return this.stage.component.data.isGame(d.Y.Canasta)&&2===this.stage.component.data.info.getPlayerCount()&&this.stage.component.data.hasAssistant()}getPileType(){return this.hasSpread()||this.isBetting()&&!this.stage.component.data.isGame(d.Y.ThirtyOne)||this.stage.component.data.isGame(d.Y.Rummy500)||this.stage.component.data.isGame(d.Y.Cassino)||this.stage.component.data.isGame(d.Y.Bingo)?"flat":"rotated"}getPlayerClass(n,e){let a="";this.stage.isSuggested(e)&&(a+="suggestion ");const s=this.stage.component.data.getStage();let c=this.getPlayerIndex(n);if(s.getState().isPileCardFaded(n))a+="losing ";else if(this.stage.component.data.isGame(d.Y.Cassino)){const m=this.stage.component.data.choiceManager;m.hasSelected()&&!m.isSelected(e)&&(a+="losing ");const f=this.stage.component.data.getState().getProperty("last");if(f){const p=f.split(":");if(p.length>1&&p.indexOf(e)>=0){const u=this.getPile();a+=p[0]==u[u.length-1]?"discard ":"highlight "}}if("B"==e[1])a+="thin spread-1 ";else{const p=this.getPile();for(let u=n;u<p.length;++u)if("B"==p[u][1]){a+="thin ";break}}}return"rotated"===this.getPileType()?a+="player-"+c+"-"+this.getPlayerCount():this.hasSpread()&&(a+="spread-"+c),a}getPile(){return this.stage.component.data.getState().getPile()}hasMelds(){return this.stage.component.data.game.infoManager.hasKey("melds")}isMeldVisible(n){return!(this.stage.component.data.isGame(d.Y.Canasta)||this.stage.component.data.isGame(d.Y.HandAndFoot))||n.length<7}hasAccumulatedPile(){return this.stage.component.data.game.isDoubleSirRung()&&this.stage.component.data.game.infoManager.getKey("accumulated")[0]>0}getAccumulatedPileCount(){return this.stage.component.data.game.infoManager.getKey("accumulated")[0]}isAccumulatedPileInDanger(){return""!==this.stage.component.data.game.infoManager.getKey("accumulated")[1]}getAccumulatedPileUser(){const n=this.stage.component.data.getState();return this.stage.component.findUserById(this.stage.component.data.info.getPlayerId(void 0===n.winner?n.turn:n.winner))}getMelds(){return this.stage.component.data.game.infoManager.getKey("melds")}getPlayerIndex(n){return this.stage.component.data.getState().getPlayerIndexForPileCard(n)}getOffsetSuffix(n){const a=this.stage.component.data.getState().getSource();return Math.floor(a[n]/this.stage.component.data.info.getPlayerCount())}draw(n){this.onCardClick(n,"-1")}canDraw(){return this.isCardEnabled("-1")}isCardEnabled(n){const e=this.stage.component.data.choiceManager,a=e.getChoices();if(void 0!==a){if(e.hasSelected()){const s=e.getSelected();if(s.indexOf(n)>=0)return!0;const c=Ft(s);return c.push(n),q.F.hasMatchingChoice(a,c)}return void 0!==q.F.getMatchingChoice(a,n)}return!1}getMeldClass(n){if(this.stage.component.data.isGame(d.Y.Canasta)||this.stage.component.data.isGame(d.Y.HandAndFoot)){const e=this.stage.component.data.info.getTeams();return(e?e[n].theme:"bright-indigo")+" smaller"}return"bright-indigo compact"}getMeldName(n){return this.stage.component.data.isGame(d.Y.Canasta)||this.stage.component.data.isGame(d.Y.HandAndFoot)?this.stage.component.hasPointsUpdate()&&this.stage.component.data.info.getTeams()?"":this.stage.component.getTeamName(n):0===n?"Sets":"Runs"}getMeldCardHeight(n,e){return 0===e||e===n.length-1||n.length<=4?16:18-n.length}getPlayerCount(){return this.stage.component.data.info.getPlayerCount()}onCardClick(n,e){if(this.stage.component.dragManager.wasJustDragged())return;if(this.stage.component.data.config.solitaire&&!this.stage.component.dataService.canSendSolitaireStageAction())return void this.stage.component.showPendingMove(n);const a=this.stage.component.data.isGame(d.Y.Cassino),s=this.stage.component.data.choiceManager;if(s.hasSelected()&&!a)return void s.clearSelected();if(this.stage.component.data.isGame(d.Y.Palace)&&(e="-2"),this.stage.component.data.isGame(d.Y.Cheat))return void this.stage.component.dataService.stageAction("-2");if(!this.isCardEnabled(e))return void(this.stage.component.data.config.solitaire||this.stage.component.showInvalidMove(n));let c=s.getThrowOptions([e],e);const r=this.stage.component.data;if(c.length>1)if(r.isGame(d.Y.Klondike)||r.isGame(d.Y.Yukon))c=Dt(e,c,[-8-_.Ex.getSuitIndex(e),-8,-9,-10,-11]),c.length>1&&"K"===e[0]&&(c=[c[0]]);else if(r.isGame(d.Y.FreeCell)||r.isGame(d.Y.SeahavenTowers)){const p=r.isGame(d.Y.FreeCell),u=p?[-13,-14,-15,-16]:[-11,-12,-17,-18],C=p?[-1,-2,-3,-4,-5,-6,-7,-8]:[-1,-2,-3,-4,-5,-6,-7,-8,-9,-10],y=p?[-9,-10,-11,-12]:[-13,-14,-15,-16];if(c=Dt(e,c,[u[_.Ex.getSuitIndex(e)]].concat(u)),c.length>1){const b=r.getState().info[k.Lf],x=function Do(o,i){for(let n=0;n<o.length;++n)if(o[n][1].indexOf(i)>=0)return n;return-1}(b,e),P=y.indexOf(-1-x)>=0,w=Yt(b,C.length);if(0===w.length)c=E(e,c,y);else if(P)c=E(e,c,w.concat(y));else{const T=E(e,c,y.concat(w));if(1===T.length){const N=E(e,c,w.concat(y));T[0]===N[0]&&(c=T)}else c=T}}}else r.isGame(d.Y.Spider)&&(c=E(e,c,Yt(r.getState().info[k.Lf])));const m=s.getSuboptions();if(!(c.length>(a?0:1))||this.stage.component.hasThrowDialog()||a&&(0,O.wt)(c)){if(this.stage.component.showThrow(c,m),1===c.length)if("-1"===c[0])(0,O.bO)(this.stage.component.data,0,r.config.solitaire);else if(r.config.solitaire){const p=c[0].split(":")[1];r.playSound(G.g.CARD),(0,O.sK)(n.target.parentElement.parentElement,p)}}else s.onSelect(e,[e],!a),r.config.solitaire&&s.setPendingSmartElement(n.target.parentElement.parentElement)}trackObjectFn(n,e){return e}hasTram(){return void 0!==this.stage.component.data.getState().getProperty("tram")}getTramUser(){const n=this.stage.component.data.getState();return this.stage.component.findUserById(this.stage.component.data.info.getPlayerId(void 0===n.winner?n.turn:n.winner))}getTramHand(){const n=this.stage.component.data.getState(),e=void 0===n.winner?n.turn:n.winner;return n.getProperty("tram")[e]}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-pile-stage"]],decls:8,vars:6,consts:[["fxLayout","column","fxLayoutAlign","center center",2,"position","relative"],["fxLayout","row",4,"ngIf"],["class","tram","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"pile-holder",3,"ngSwitch"],[1,"accumulated"],["class","contents",4,"ngIf"],["class","rotated-pile",4,"ngSwitchCase"],["fxLayout","row","class","flat-pile",4,"ngSwitchCase"],["fxLayout","row"],["class","melds",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"melds",3,"ngClass","click"],["color","primary","mat-mini-fab","",2,"position","absolute","right","-16px","bottom","-16px","z-index","2",3,"click"],[1,"meld-title","theme",3,"ngClass"],[3,"ngClass","update","score",4,"ngIf"],[1,"liner"],["class","liner meld-annotation",4,"ngIf"],["fxLayout","row",2,"padding","2px"],["fxLayout","column","class","meld-background",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass","update","score"],[1,"liner","meld-annotation"],["fxLayout","column",1,"meld-background"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["fxLayout","column",4,"ngIf"],["fxLayout","column"],[3,"height",4,"ngFor","ngForOf","ngForTrackBy"],["star","true",3,"deckPrefs","animate","card"],["fxLayout","column","fxLayoutAlign","center center",1,"tram"],[1,"scaled",3,"deckPrefs","hand"],["size","large",3,"user"],[1,"caption"],[1,"contents"],[1,"small","card","back"],[1,"count",3,"ngClass"],["size","tiny",3,"user",4,"ngIf"],["size","tiny",3,"user"],[1,"rotated-pile"],["class","player-container",3,"ngClass",4,"ngFor","ngForOf"],["id","pile-dummy",1,"player-container","player-2-4"],["class","sec-fade",4,"ngIf"],["id","pile",1,"player-container","player-0-1"],[1,"player-container",3,"ngClass"],[3,"deckPrefs","animate","full","pile","card","click"],[1,"sec-fade"],["pile","2-4-0",3,"deckPrefs","full","card",4,"ngFor","ngForOf"],["pile","2-4-0",3,"deckPrefs","full","card"],["pile","0-2-0",3,"deckPrefs","full","card",4,"ngFor","ngForOf"],["pile","0-2-0",3,"deckPrefs","full","card"],["fxLayout","row",1,"flat-pile"],["fxFlex","","class","pile smart hand-card-container",3,"ngClass",4,"ngFor","ngForOf"],["id","pile"],["fxFlex","",1,"pile","smart","hand-card-container",3,"ngClass"],[3,"deckPrefs","animate","full","card","click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Oo,2,1,"div",1),t.YNc(2,Mo,20,3,"div",2),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,bo,5,5,"div",5),t.qZA(),t.YNc(6,Io,6,3,"div",6),t.YNc(7,Fo,3,1,"div",7),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.hasMelds()),t.xp6(1),t.Q6J("ngIf",e.hasTram()),t.xp6(1),t.Q6J("ngSwitch",e.getPileType()),t.xp6(2),t.Q6J("ngIf",e.hasAccumulatedPile()),t.xp6(1),t.Q6J("ngSwitchCase","rotated"),t.xp6(1),t.Q6J("ngSwitchCase","flat"))},directives:[h.xw,h.Wh,g.O5,g.sg,g.mk,S.oO,F.lW,Y.Hw,j,mt.S,ft,X.A,g.RF,g.n9,M.Ak,h.yH],styles:[".tram[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{position:relative;top:24px;left:16px}.tram[_ngcontent-%COMP%]   .scaled[_ngcontent-%COMP%]{transform:scale(2)}.tram[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{position:relative;font-size:16px;top:26px;left:16px;background:#393169;padding:4px 8px;border-radius:8px}.accumulated[_ngcontent-%COMP%]{position:absolute;top:-56px;right:-48px}@media screen and (min-width: 600px) and (min-height: 768px){.accumulated[_ngcontent-%COMP%]{top:-100px;right:-92px;transform:scale(1.5)}}.accumulated[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-100%)}.accumulated[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.accumulated[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);border-radius:50%;padding:2px 6px;font-size:18px;background:white;color:#000}.accumulated[_ngcontent-%COMP%]   .count.danger[_ngcontent-%COMP%]{background:#f44336;color:#ffebee}.melds[_ngcontent-%COMP%]{position:relative;border-radius:4px;background:rgba(255,255,255,.8);min-width:102px;min-height:96px;margin:0 1px}@media screen and (max-width: 320px){.melds[_ngcontent-%COMP%]{min-width:92px;min-height:92px}}@media screen and (min-width: 400px){.melds[_ngcontent-%COMP%]{min-width:120px}}@media screen and (min-width: 600px){.melds[_ngcontent-%COMP%]{min-width:140px;margin:0 2px}}@media screen and (min-width: 600px) and (min-height: 800px){.melds.double[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 26px 24px}}@media screen and (min-width: 800px) and (min-height: 800px){.melds.triple[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 26px 24px}}@media screen and (min-width: 800px) and (min-height: 800px){.melds.quadruple[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 20px 24px}}.melds[_ngcontent-%COMP%]   .meld-annotation[_ngcontent-%COMP%]{position:absolute;bottom:0px;right:0px;font-size:12px;padding:1px 2px;border-radius:4px 0/4px 0px;background:rgba(0,0,0,.6);color:#ffffffe6}@media screen and (max-width: 320px){.melds[_ngcontent-%COMP%]   .meld-annotation[_ngcontent-%COMP%]{font-size:11px;padding:1px}}.handandfoot.canasta[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.canasta   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot   .canasta[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot   .canasta   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta   .handandfoot[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta   .handandfoot   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-height:104px}.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:152px}@media screen and (min-width: 360px){.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:172px}}@media screen and (min-width: 400px){.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:192px}}.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:102px}@media screen and (min-width: 360px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:116px}}@media screen and (min-width: 375px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:121px}}@media screen and (min-width: 400px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:128px}}@media screen and (min-width: 480px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:156px}}@media screen and (min-width: 540px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:176px}}@media screen and (min-width: 600px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:196px}}.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:78px}@media screen and (min-width: 360px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:88px}}@media screen and (min-width: 375px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:92px}}@media screen and (min-width: 400px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:98px}}@media screen and (min-width: 480px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:118px}}@media screen and (min-width: 540px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:133px}}@media screen and (min-width: 600px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:148px}}.melds[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.melds.active[_ngcontent-%COMP%]{background:#e8eaf6;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f}.melds.active[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.meld-title[_ngcontent-%COMP%]{font-size:12px;min-height:15px;padding:2px 4px;border-top-left-radius:4px;border-top-right-radius:4px}.meld-title.smaller[_ngcontent-%COMP%]{font-size:12px}.meld-title.compact[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0 4px/0px 4px}.meld-background[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;bottom:0;text-align:center;padding-top:32px;color:#000}.meld-background[_ngcontent-%COMP%]   .bg-0[_ngcontent-%COMP%]{font-size:12px}.meld-background[_ngcontent-%COMP%]   .bg-1[_ngcontent-%COMP%]{font-size:30px}.meld-title[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%], .meld-title[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#fff}cm-game-points-review.pts-value[_ngcontent-%COMP%]{float:right}cm-game-points-review.pts-update[_ngcontent-%COMP%]{text-align:center}.flat-pile[_ngcontent-%COMP%]{position:absolute;left:4px;right:4px}.flat-pile[_ngcontent-%COMP%]   .spread-987[_ngcontent-%COMP%], .flat-pile[_ngcontent-%COMP%]   .spread-988[_ngcontent-%COMP%], .flat-pile[_ngcontent-%COMP%]   .spread-989[_ngcontent-%COMP%]{max-width:16px!important}.flat-pile[_ngcontent-%COMP%]   .spread-0[_ngcontent-%COMP%]{position:relative;top:16px}.flat-pile[_ngcontent-%COMP%]   .spread-1[_ngcontent-%COMP%]{position:relative;top:-16px}.flat-pile[_ngcontent-%COMP%]   .spread-1[_ngcontent-%COMP%]   .card-annotation[_ngcontent-%COMP%]{top:-28px}@media screen and (max-width: 320px){.flat-pile[_ngcontent-%COMP%]{left:2px;right:2px}}@media screen and (min-width: 600px) and (min-height: 768px){.flat-pile[_ngcontent-%COMP%]{left:8px;right:8px}}.flat-pile[_ngcontent-%COMP%]   .card-annotation[_ngcontent-%COMP%]{background:#211c43;border-radius:50%;min-width:16px;text-align:center;padding:4px;color:#fff;display:inline-block;position:absolute;left:50%}.blackjack[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .blackjack   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .arizonadiscardem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .arizonadiscardem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .texasholdem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .texasholdem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]{position:relative;top:-72px;left:-16px;z-index:-1}.blackjack[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .blackjack   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .arizonadiscardem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .arizonadiscardem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .texasholdem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .texasholdem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%]{min-width:36px!important}.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:8px;min-height:100px}@media screen and (max-width: 320px){.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:4px}}@media screen and (min-width: 600px) and (min-height: 768px){.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:16px;min-height:125px}}.rotated-pile[_ngcontent-%COMP%]{position:relative;height:64px;width:64px}.rummy[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .canasta[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%]{width:40px;height:40px}.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:156px}@media screen and (max-height: 568px){.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:148px;margin-bottom:-24px}}@media screen and (min-width: 600px) and (min-height: 768px){.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:192px}}.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:176px}@media screen and (min-height: 600px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:200px}}@media screen and (min-height: 620px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:216px}}@media screen and (min-height: 640px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:232px}}@media screen and (min-height: 720px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:280px}}"]}),o})();var ot=l(87327),Jt=l(97817),Qt=l(25788),Yo=l(81956),Gt=l(20709),J=l(48966),Nt=l(66375),U=l(13264);const Jo=["dcTimer"];function Qo(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(n),t.oxw().onDone()}),t._uU(1,"Press done to continue"),t.qZA()}}function Go(o,i){1&o&&(t.TgZ(0,"div",20)(1,"mat-icon",21),t._uU(2,"cloud_done"),t.qZA(),t._uU(3,"SAVED"),t.qZA())}function No(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",16)(1,"button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onDone()}),t.TgZ(2,"mat-icon",18),t._uU(3,"exit_to_app"),t.qZA(),t.TgZ(4,"div",12),t._uU(5,"exit"),t.qZA()(),t.YNc(6,Go,4,0,"div",19),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(6),t.Q6J("ngIf",n.hasSave())}}function Ho(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onStats()}),t.TgZ(1,"mat-icon"),t._uU(2,"leaderboard"),t.qZA(),t.TgZ(3,"div",12),t._uU(4,"stats"),t.qZA()()}}function Uo(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onPlay()}),t.TgZ(1,"mat-icon"),t._uU(2,"play_arrow"),t.qZA(),t.TgZ(3,"mat-icon",24),t._uU(4,"event"),t.qZA(),t.TgZ(5,"div",12),t._uU(6,"next"),t.qZA()()}}function Bo(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onPlay()}),t.TgZ(1,"mat-icon"),t._uU(2,"play_arrow"),t.qZA(),t.TgZ(3,"div",25),t._uU(4),t.qZA(),t.TgZ(5,"div",12),t._uU(6,"next"),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(4),t.Oqu(n.getNextDCText())}}function qo(o,i){if(1&o&&(t.TgZ(0,"button",26)(1,"mat-icon"),t._uU(2,"play_arrow"),t.qZA(),t.TgZ(3,"div",25),t._uU(4),t.qZA(),t.TgZ(5,"div",12),t._uU(6,"next"),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(4),t.Oqu(n.getNextDCText())}}function Lo(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onPlay()}),t.TgZ(1,"mat-icon"),t._uU(2,"restart_alt"),t.qZA(),t.TgZ(3,"mat-icon",27),t._uU(4,"looks_one"),t.qZA(),t.TgZ(5,"div",12),t._uU(6,"restart"),t.qZA()()}}function Eo(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onPlay()}),t.TgZ(1,"mat-icon"),t._uU(2,"play_arrow"),t.qZA(),t.TgZ(3,"mat-icon",24),t._uU(4,"plus_one"),t.qZA(),t.TgZ(5,"div",12),t._uU(6,"next"),t.qZA()()}}function zo(o,i){if(1&o&&(t.TgZ(0,"div",28),t._uU(1,"Next daily available in "),t.TgZ(2,"span",null,29),t._uU(4),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(4),t.Oqu(n.getDCTimer())}}function Ro(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,No,7,1,"div",9),t.YNc(3,Ho,5,0,"button",10),t.TgZ(4,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().onShare()}),t.TgZ(5,"mat-icon"),t._uU(6,"share"),t.qZA(),t.TgZ(7,"div",12),t._uU(8),t.qZA()(),t.YNc(9,Uo,7,0,"button",13),t.YNc(10,Bo,7,1,"button",13),t.YNc(11,qo,7,1,"button",14),t.YNc(12,Lo,7,0,"button",13),t.YNc(13,Eo,7,0,"button",13),t.qZA(),t.YNc(14,zo,5,1,"div",15),t.qZA()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("fxLayoutGap",n.getShareGap()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()),t.xp6(5),t.Oqu(n.shareText),t.xp6(1),t.Q6J("ngIf",!n.isHistory()&&n.isDC()&&n.canPlayDC()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()&&n.isDC()&&!n.canPlayDC()&&n.canPlayX2DC()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()&&n.isDC()&&!n.canPlayDC()&&!n.canPlayX2DC()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()&&!n.isDC()&&n.hasReplay()),t.xp6(1),t.Q6J("ngIf",!n.isHistory()&&!n.isDC()&&!n.hasReplay()),t.xp6(1),t.Q6J("ngIf",n.isDC()&&!n.canPlayDC())}}function Wo(o,i){if(1&o&&t._UZ(0,"cm-game-points-review",42),2&o){const n=t.oxw().index,e=t.oxw(3);t.Q6J("ngClass",e.stage.component.hasPointsUpdate()?"pts-update":"pts-value")("update",e.stage.component.hasPointsUpdate())("score",e.stage.component.data.getRound().getScore(n))}}function Vo(o,i){if(1&o&&(t.TgZ(0,"div",43),t._uU(1),t.qZA()),2&o){const n=t.oxw(),e=n.$implicit,a=n.index,s=t.oxw(3);t.xp6(1),t.hij(" ",s.stage.component.data.game.getMeldAnnotation(e,a)," ")}}function $o(o,i){if(1&o&&(t.TgZ(0,"div",46),t._uU(1),t.qZA()),2&o){const n=i.$implicit;t.Q6J("ngClass","bg-"+i.index),t.xp6(1),t.Oqu(n)}}function Ko(o,i){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,$o,2,2,"div",45),t.qZA()),2&o){const n=t.oxw(),e=n.$implicit,a=n.index,s=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",s.stage.component.data.game.getMeldBackground(e,a))}}function jo(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"cm-mini-card",50),t.qZA()),2&o){const n=i.$implicit,e=i.index,a=t.oxw(2).$implicit,s=t.oxw(4);t.Udp("height",s.getMeldCardHeight(a,e),"px"),t.xp6(1),t.Q6J("deckPrefs",s.stage.component.getDeckPrefs())("animate",s.stage.component.data.getState().turn)("card",n)}}function Xo(o,i){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,jo,2,5,"div",49),t.qZA()),2&o){const n=t.oxw().$implicit,e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",e.trackObjectFn)}}function ta(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Xo,2,2,"div",47),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.isMeldVisible(n))}}const na=function(o,i,n,e){return{active:o,double:i,triple:n,quadruple:e}};function ea(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",34),t.NdJ("click",function(a){const c=t.CHM(n).index;return t.oxw(3).stage.component.onSmartButton(a,c+1)}),t.TgZ(1,"button",35),t.NdJ("click",function(a){const c=t.CHM(n).index;return t.oxw(3).stage.component.onSmartButton(a,c+1),a.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"file_download"),t.qZA()(),t.TgZ(4,"div",36),t.YNc(5,Wo,1,3,"cm-game-points-review",37),t.TgZ(6,"div",38),t._uU(7),t.qZA()(),t.YNc(8,Vo,2,1,"div",39),t.TgZ(9,"div",40),t.YNc(10,Ko,2,1,"div",41),t.YNc(11,ta,2,1,"ng-container",5),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(3);t.Q6J("ngClass",t.l5B(8,na,a.stage.component.hasSmartButton(e+1),2===a.getMelds().length,3===a.getMelds().length,4===a.getMelds().length)),t.uIk("suboption",-2-e),t.xp6(4),t.Q6J("ngClass",a.getMeldClass(e)),t.xp6(1),t.Q6J("ngIf",a.stage.component.data.info.getTeams()),t.xp6(2),t.Oqu(a.getMeldName(e)),t.xp6(1),t.Q6J("ngIf",a.stage.component.data.game.getMeldAnnotation(n,e)),t.xp6(2),t.Q6J("ngIf",a.stage.component.data.game.getMeldBackground(n,e)),t.xp6(1),t.Q6J("ngForOf",n)}}function oa(o,i){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,ea,12,13,"div",33),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.getMelds())}}function aa(o,i){if(1&o&&(t.TgZ(0,"div",30),t.YNc(1,oa,2,1,"div",31),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.hasMelds())}}function ia(o,i){if(1&o&&t._UZ(0,"cm-card",53),2&o){const n=i.$implicit,e=t.oxw(2);t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("full",!1)("card",n)}}function sa(o,i){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ia,1,3,"cm-card",52),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.getPile())}}function ca(o,i){if(1&o&&(t.TgZ(0,"div",62),t._uU(1),t.qZA()),2&o){const n=t.oxw(2),e=n.$implicit,a=n.index,s=t.oxw(2).ngIf,c=t.oxw(2);t.xp6(1),t.Oqu(c.formatMessage(e,s.h[a]))}}function ra(o,i){if(1&o&&(t.TgZ(0,"div",59),t._UZ(1,"cm-game-mini-hand",60),t.YNc(2,ca,2,1,"div",61),t.qZA()),2&o){const n=t.oxw(),e=n.index,a=n.$implicit,s=t.oxw(2).ngIf,c=t.oxw().index,r=t.oxw();t.Udp("min-width",r.isHorizontal(s,c)?76:60,"px"),t.xp6(1),t.Q6J("star",r.hasStars())("deckPrefs",r.stage.component.getDeckPrefs())("hand",r.formatHand(s.h[e])),t.xp6(1),t.Q6J("ngIf",a)}}function da(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ra,3,6,"div",58),t.BQk()),2&o){const n=i.index,e=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",e&&e.h[n]&&e.h[n].length>0)}}function ga(o,i){if(1&o&&(t.TgZ(0,"div",57),t.YNc(1,da,2,1,"ng-container",5),t.qZA()),2&o){const n=t.oxw().ngIf,e=t.oxw().index,a=t.oxw();t.Q6J("fxLayout",a.isHorizontal(n,e)?"row":"column"),t.xp6(1),t.Q6J("ngForOf",n.msg)}}function la(o,i){if(1&o&&(t.TgZ(0,"div",55),t.YNc(1,ga,2,2,"div",56),t.qZA()),2&o){const n=i.ngIf,e=t.oxw().index,a=t.oxw();t.Q6J("ngClass","player-"+e+"-"+a.getPlayerCount()),t.xp6(1),t.Q6J("ngIf",n&&n.h)}}function pa(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,la,2,2,"div",54),t.qZA()),2&o){const n=i.index,e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getPlayer(n))}}const Ht="wz-display-dc-timer",_a={count:75,delay:75,fworkSpeed:2,fworkAccel:4,showShockwave:!1,showTarget:!1,partCount:50,partSpeed:5,partSpeedVariance:10,partWind:50,partFriction:5,partGravity:1,flickerDensity:20,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:50,absoluteTop:!0};let ha=(()=>{class o extends z{constructor(n,e,a,s,c,r){super(n),this.stage=n,this.dialog=e,this.ngZone=a,this.navigationService=s,this.cacheService=c,this.dataService=r,this.shareText="share"}isWordzy(){return 52==this.stage.component.data.config.id}ngOnDestroy(){this.isWordzy()&&this.isDC()&&this.navigationService.removeTimer(Ht)}isHistory(){return this.stage.component.isHistory()}ngOnInit(){if(this.isHistory()||!this.isWordzy())return;this.isDC()&&this.navigationService.addTimer(Ht,()=>{this.dcTimer&&(this.dcTimer.nativeElement.innerHTML=this.getDCTimer())});const n=this.stage.component.data.game.infoManager.getKey("words")[4];n>0&&(this.wzCompleted=!0,this.ngZone.runOutsideAngular(()=>setTimeout(()=>{const e=(0,Jt.N8)("game");if(n<=2&&(new Jt.jL(e,_a),2==n))return;const s=n<=3?2:4===n?10:0,c=n<=3?2:4===n?1.5:1,r=n<6?ot.PC:[(0,ot.$U)(ot.PC)];ot.DI.fire(e,50*c,2500,r,s)},1e3)))}getDCTimer(){return this.cacheService.firebaseCache.dc.getDailyTimerLocal()}hasStars(){return this.stage.component.data.config.betting}getPlayer(n){const e=this.getStagePlayers()[n];return e&&e.h&&e.h.length>0?e:this.getStatePlayers()[n]}getStagePlayers(){return this.stage.component.data.getStage().getPlayers()}getStatePlayers(){return this.stage.component.data.getState().getPlayers()}getPlayerCount(){return this.stage.component.data.info.getPlayerCount()}isHorizontal(n,e){return void 0===n||void 0===n.h||1===n.h.length||e%2==0||2===this.getPlayerCount()}formatMessage(n,e){return this.stage.component.data.game.formatDisplayMessage(n,e)}formatHand(n){return this.stage.component.data.game.formatDisplayHand(n)}getPile(){return this.stage.component.data.isGame(d.Y.Blackjack)?this.stage.component.data.getRound().findStageStateProperty("pile",k.s6):this.stage.component.data.getStage().getProperty(k.s6)}hasSelectedDone(){return this.stage.component.isSelected("done",!1)}onDone(){this.stage.component.onSelect("done",!1)}hasShare(){return this.stage.component.isWordGame()}isDC(){return 7===this.stage.component.data.type}hasReplay(){return!this.isDC()&&!this.wzCompleted}hasSave(){return!this.isDC()&&this.wzCompleted}canPlayX2DC(){if(this.wzCompleted)return!0;const n=this.stage.component.data.config.id,e=this.cacheService.firebaseCache.table.getPreset(),a=1+this.getDCPowerOrZero();return!this.cacheService.firebaseCache.self.meta.isDisabledWordzyStake(n,e,a)}canPlayDC(){return(0,Yo.B)()!=this.stage.component.data.info.getDCRound()&&!this.cacheService.firebaseCache.dc.hasCompletedPubScore(this.stage.component.data.config.id,this.cacheService.firebaseCache.table.getPreset())}getNextDCText(){return Gt.sD+2*this.stage.component.data.game.gridCount}onPlay(){if(this.isDC()&&!this.canPlayDC()){const n=1+this.getDCPowerOrZero();if(n>10)return;const e=this.cacheService.firebaseCache.table.getPreset();this.dataService.dailyChallenge(this.stage.component.data.config.id,e,"",this.cacheService.firebaseCache.dc.todaysTsLocal+":"+n)}else this.stage.component.onSelect(-1,!0)}getDCPowerOrZero(){return this.isDC()?Math.log(this.stage.component.data.game.gridCount)/Math.log(2):0}onStats(){Qt.P.launch(this.dialog,this.stage.component.data.config,this.isDC()?"daily":"maniac",this.getDCPowerOrZero())}getShareGap(){const n=(0,O.fM)();return n>=380?"8px":n>=370?"6px":"4px"}onShare(){var n=this;return(0,de.Z)(function*(){const e=n.stage.component.data.game.getShare(),a={text:e};let s=!1;navigator.share&&navigator.canShare&&navigator.canShare(a)&&(yield navigator.share(a).then(c=>{s=!0,console.log(JSON.stringify(c))}).catch(c=>{console.log(JSON.stringify(c))}),console.log("Success: "+s)),s||(navigator.clipboard.writeText(e),n.shareText="copied!",setTimeout(()=>{n.shareText="share",n.stage.component.cd.markForCheck()},2e3))})()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1),t.Y36(J.uw),t.Y36(t.R0b),t.Y36(Nt.f),t.Y36(U.Q),t.Y36(tt.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-display-stage"]],viewQuery:function(n,e){if(1&n&&t.Gf(Jo,5),2&n){let a;t.iGM(a=t.CRH())&&(e.dcTimer=a.first)}},features:[t.qOj],decls:7,vars:7,consts:[[1,"display-stage"],["class","msg",3,"click",4,"ngIf"],["class","share-container",4,"ngIf"],["class","pile","fxLayout","column","style","position:relative;","fxLayoutAlign","center center",4,"ngIf"],["class","pile","fxLayout","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"msg",3,"click"],[1,"share-container"],["fxLayout","row",3,"fxLayoutGap"],["style","position: relative; text-align: center;","fxLayout","column","fxLayoutAlign","end center",4,"ngIf"],["matRipple","","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["matRipple","","mat-raised-button","","color","accent",3,"click"],[1,"txt"],["matRipple","","mat-raised-button","","color","green",3,"click",4,"ngIf"],["matRipple","","mat-raised-button","","color","green","disabled","true",4,"ngIf"],["style","position: absolute; padding: 12px; text-align: center; left: 0; right: 0;",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end center",2,"position","relative","text-align","center"],["matRipple","","mat-raised-button","","color","white",3,"click"],[1,"rotate180"],["fxLayout","row","fxLayoutAlign","center center","style","position: absolute; top: -8px; left: 0; right: 0; font-size: 12px; background: #1c9e21; padding: 2px 4px; border-radius: 8px; font-weight: bold;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",2,"position","absolute","top","-8px","left","0","right","0","font-size","12px","background","#1c9e21","padding","2px 4px","border-radius","8px","font-weight","bold"],[2,"font-size","14px","height","16px","width","16px","margin","-4px 0","margin-right","2px"],["matRipple","","mat-raised-button","","color","primary",3,"click"],["matRipple","","mat-raised-button","","color","green",3,"click"],[1,"superscript","right"],[1,"superscript","right","text"],["matRipple","","mat-raised-button","","color","green","disabled","true"],[1,"superscript","left"],[2,"position","absolute","padding","12px","text-align","center","left","0","right","0"],["dcTimer",""],["fxLayout","column","fxLayoutAlign","center center",1,"pile",2,"position","relative"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["class","melds",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"melds",3,"ngClass","click"],["color","primary","mat-mini-fab","",2,"position","absolute","right","-16px","bottom","-16px","z-index","2",3,"click"],[1,"meld-title","theme",3,"ngClass"],[3,"ngClass","update","score",4,"ngIf"],[1,"liner"],["class","liner meld-annotation",4,"ngIf"],["fxLayout","row",2,"padding","2px"],["fxLayout","column","class","meld-background",4,"ngIf"],[3,"ngClass","update","score"],[1,"liner","meld-annotation"],["fxLayout","column",1,"meld-background"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["fxLayout","column",4,"ngIf"],["fxLayout","column"],[3,"height",4,"ngFor","ngForOf","ngForTrackBy"],["star","true",3,"deckPrefs","animate","card"],["fxLayout","row",1,"pile"],[3,"deckPrefs","full","card",4,"ngFor","ngForOf"],[3,"deckPrefs","full","card"],["class","player-container",3,"ngClass",4,"ngIf"],[1,"player-container",3,"ngClass"],["fxLayoutAlign","center center",3,"fxLayout",4,"ngIf"],["fxLayoutAlign","center center",3,"fxLayout"],["fxLayout","column","fxLayoutAlign","center center",3,"min-width",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center"],[2,"height","36px",3,"star","deckPrefs","hand"],["class","mh-label",4,"ngIf"],[1,"mh-label"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Qo,2,0,"div",1),t.YNc(2,Ro,15,10,"div",2),t.YNc(3,aa,2,1,"div",3),t.YNc(4,sa,2,1,"div",4),t.YNc(5,pa,2,1,"div",5),t.ALo(6,"cmArray"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!e.hasSelectedDone()&&!e.hasShare()),t.xp6(1),t.Q6J("ngIf",e.hasShare()),t.xp6(1),t.Q6J("ngIf",e.hasMelds()),t.xp6(1),t.Q6J("ngIf",e.getPile()),t.xp6(1),t.Q6J("ngForOf",t.lcZ(6,5,e.getPlayerCount())))},directives:[g.O5,h.xw,h.SQ,h.Wh,F.lW,st.wG,Y.Hw,g.sg,g.mk,S.oO,j,mt.S,M.Ak,ft],pipes:[rt.I],styles:[".tram[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{position:relative;top:24px;left:16px}.tram[_ngcontent-%COMP%]   .scaled[_ngcontent-%COMP%]{transform:scale(2)}.tram[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{position:relative;font-size:16px;top:26px;left:16px;background:#393169;padding:4px 8px;border-radius:8px}.accumulated[_ngcontent-%COMP%]{position:absolute;top:-56px;right:-48px}@media screen and (min-width: 600px) and (min-height: 768px){.accumulated[_ngcontent-%COMP%]{top:-100px;right:-92px;transform:scale(1.5)}}.accumulated[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-100%)}.accumulated[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%)}.accumulated[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);border-radius:50%;padding:2px 6px;font-size:18px;background:white;color:#000}.accumulated[_ngcontent-%COMP%]   .count.danger[_ngcontent-%COMP%]{background:#f44336;color:#ffebee}.melds[_ngcontent-%COMP%]{position:relative;border-radius:4px;background:rgba(255,255,255,.8);min-width:102px;min-height:96px;margin:0 1px}@media screen and (max-width: 320px){.melds[_ngcontent-%COMP%]{min-width:92px;min-height:92px}}@media screen and (min-width: 400px){.melds[_ngcontent-%COMP%]{min-width:120px}}@media screen and (min-width: 600px){.melds[_ngcontent-%COMP%]{min-width:140px;margin:0 2px}}@media screen and (min-width: 600px) and (min-height: 800px){.melds.double[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 26px 24px}}@media screen and (min-width: 800px) and (min-height: 800px){.melds.triple[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 26px 24px}}@media screen and (min-width: 800px) and (min-height: 800px){.melds.quadruple[_ngcontent-%COMP%]{transform:scale(1.25);margin:0 20px 24px}}.melds[_ngcontent-%COMP%]   .meld-annotation[_ngcontent-%COMP%]{position:absolute;bottom:0px;right:0px;font-size:12px;padding:1px 2px;border-radius:4px 0/4px 0px;background:rgba(0,0,0,.6);color:#ffffffe6}@media screen and (max-width: 320px){.melds[_ngcontent-%COMP%]   .meld-annotation[_ngcontent-%COMP%]{font-size:11px;padding:1px}}.handandfoot.canasta[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.canasta   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot   .canasta[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot   .canasta   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta   .handandfoot[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta   .handandfoot   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-height:104px}.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:152px}@media screen and (min-width: 360px){.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:172px}}@media screen and (min-width: 400px){.handandfoot.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p2   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.teams   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:192px}}.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:102px}@media screen and (min-width: 360px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:116px}}@media screen and (min-width: 375px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:121px}}@media screen and (min-width: 400px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:128px}}@media screen and (min-width: 480px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:156px}}@media screen and (min-width: 540px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:176px}}@media screen and (min-width: 600px){.handandfoot.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p3   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p6   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:196px}}.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:78px}@media screen and (min-width: 360px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:88px}}@media screen and (min-width: 375px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:92px}}@media screen and (min-width: 400px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:98px}}@media screen and (min-width: 480px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:118px}}@media screen and (min-width: 540px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:133px}}@media screen and (min-width: 600px){.handandfoot.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo.handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p4.solo   .handandfoot.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .handandfoot.p8   .canasta.p4.solo   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8[_nghost-%COMP%]   .melds[_ngcontent-%COMP%], .canasta.p8   [_nghost-%COMP%]   .melds[_ngcontent-%COMP%]{min-width:148px}}.melds[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.melds.active[_ngcontent-%COMP%]{background:#e8eaf6;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f}.melds.active[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.meld-title[_ngcontent-%COMP%]{font-size:12px;min-height:15px;padding:2px 4px;border-top-left-radius:4px;border-top-right-radius:4px}.meld-title.smaller[_ngcontent-%COMP%]{font-size:12px}.meld-title.compact[_ngcontent-%COMP%]{position:absolute;top:0;right:0;border-radius:0 4px/0px 4px}.meld-background[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;bottom:0;text-align:center;padding-top:32px;color:#000}.meld-background[_ngcontent-%COMP%]   .bg-0[_ngcontent-%COMP%]{font-size:12px}.meld-background[_ngcontent-%COMP%]   .bg-1[_ngcontent-%COMP%]{font-size:30px}.meld-title[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%], .meld-title[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#fff}cm-game-points-review.pts-value[_ngcontent-%COMP%]{float:right}cm-game-points-review.pts-update[_ngcontent-%COMP%]{text-align:center}.flat-pile[_ngcontent-%COMP%]{position:absolute;left:4px;right:4px}.flat-pile[_ngcontent-%COMP%]   .spread-987[_ngcontent-%COMP%], .flat-pile[_ngcontent-%COMP%]   .spread-988[_ngcontent-%COMP%], .flat-pile[_ngcontent-%COMP%]   .spread-989[_ngcontent-%COMP%]{max-width:16px!important}.flat-pile[_ngcontent-%COMP%]   .spread-0[_ngcontent-%COMP%]{position:relative;top:16px}.flat-pile[_ngcontent-%COMP%]   .spread-1[_ngcontent-%COMP%]{position:relative;top:-16px}.flat-pile[_ngcontent-%COMP%]   .spread-1[_ngcontent-%COMP%]   .card-annotation[_ngcontent-%COMP%]{top:-28px}@media screen and (max-width: 320px){.flat-pile[_ngcontent-%COMP%]{left:2px;right:2px}}@media screen and (min-width: 600px) and (min-height: 768px){.flat-pile[_ngcontent-%COMP%]{left:8px;right:8px}}.flat-pile[_ngcontent-%COMP%]   .card-annotation[_ngcontent-%COMP%]{background:#211c43;border-radius:50%;min-width:16px;text-align:center;padding:4px;color:#fff;display:inline-block;position:absolute;left:50%}.blackjack[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .blackjack   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .arizonadiscardem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .arizonadiscardem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .texasholdem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%], .texasholdem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]{position:relative;top:-72px;left:-16px;z-index:-1}.blackjack[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .blackjack   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .arizonadiscardem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .arizonadiscardem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .texasholdem[_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%], .texasholdem   [_nghost-%COMP%]   .flat-pile[_ngcontent-%COMP%]   .hand-card-container[_ngcontent-%COMP%]{min-width:36px!important}.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:8px;min-height:100px}@media screen and (max-width: 320px){.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:4px}}@media screen and (min-width: 600px) and (min-height: 768px){.bingo[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .bingo   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .cassino   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy500   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{margin-top:16px;min-height:125px}}.rotated-pile[_ngcontent-%COMP%]{position:relative;height:64px;width:64px}.rummy[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .canasta[_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .rotated-pile[_ngcontent-%COMP%]{width:40px;height:40px}.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:156px}@media screen and (max-height: 568px){.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:148px;margin-bottom:-24px}}@media screen and (min-width: 600px) and (min-height: 768px){.rummy[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .rummy   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .handandfoot   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:192px}}.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:176px}@media screen and (min-height: 600px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:200px}}@media screen and (min-height: 620px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:216px}}@media screen and (min-height: 640px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:232px}}@media screen and (min-height: 720px){.canasta[_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%], .canasta   [_nghost-%COMP%]   .pile-holder[_ngcontent-%COMP%]{min-height:280px}}.display-stage[_ngcontent-%COMP%]{position:absolute;top:26px;left:52px;right:52px;bottom:8px}@media screen and (max-width: 320px){.display-stage[_ngcontent-%COMP%]{left:36px;right:36px}}@media screen and (min-width: 600px){.display-stage[_ngcontent-%COMP%]{left:60px;right:60px}}@media screen and (min-width: 600px) and (min-height: 768px){.display-stage[_ngcontent-%COMP%]{top:40px;left:80px;right:80px;bottom:20px}}.display-stage[_ngcontent-%COMP%]   .pile[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.display-stage[_ngcontent-%COMP%]   .pile[_ngcontent-%COMP%]   cm-card[_ngcontent-%COMP%]{max-width:24px}.display-stage[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{color:#000;background:white;padding:4px 6px;border-radius:8px;position:absolute;left:50%;bottom:10%;transform:translate(-50%,-50%)}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]{position:absolute;z-index:1;left:50%;bottom:0px;transform:translate(-50%,-50%)}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;width:88px;height:88px;overflow:hidden}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-12px;font-size:48px;width:48px;height:48px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .superscript[_ngcontent-%COMP%]{position:absolute;font-size:28px;height:28px;width:28px;top:4px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .superscript.right[_ngcontent-%COMP%]{right:4px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .superscript.left[_ngcontent-%COMP%]{left:4px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .superscript.text[_ngcontent-%COMP%]{font-weight:700;font-size:20px;top:-4px;width:auto}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{position:absolute;bottom:0px;left:0;right:0;font-size:16px;font-weight:700;text-transform:uppercase}@media screen and (max-width: 399px){.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:84px;height:84px}}@media screen and (max-width: 359px){.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;height:80px}}@media screen and (max-width: 339px){.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:72px;height:72px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-12px;font-size:36px;width:36px;height:36px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.superscript[_ngcontent-%COMP%]{top:2px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.superscript.right[_ngcontent-%COMP%]{right:2px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon.superscript.left[_ngcontent-%COMP%]{left:2px}.display-stage[_ngcontent-%COMP%]   .share-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{font-size:14px}}.display-stage[_ngcontent-%COMP%]   .mh-label[_ngcontent-%COMP%]{text-transform:capitalize;padding:2px 4px;background:#211c43;transform:translate(25%);border-radius:4px;font-size:14px}"]}),o})();const fa=function(o){return{fade0:o}};function ua(o,i){if(1&o&&(t.TgZ(0,"div",4),t._UZ(1,"cm-small-card",5),t.qZA()),2&o){const n=i.$implicit,e=t.oxw().$implicit,a=t.oxw();t.Q6J("ngClass",t.VKq(3,fa,a.getPile().indexOf(n+e)<0)),t.xp6(1),t.Q6J("deckPrefs",a.stage.component.getDeckPrefs())("card",n+e)}}const Ca=function(){return["2","3","4","5","6","7","8","9","T","J","Q","K","A"]};function xa(o,i){1&o&&(t.TgZ(0,"div",2),t.YNc(1,ua,2,5,"div",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Ca)))}const Pa=function(){return["D","C","H","S"]};let Oa=(()=>{class o extends z{constructor(n){super(n),this.stage=n}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-dominoes-stage"]],features:[t.qOj],decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",2,"margin-top","-20px","margin-left","-11px"],["fxLayout","row","fxLayoutAlign","center center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center"],["style","max-width: 16px; max-height: 40px;",3,"ngClass",4,"ngFor","ngForOf"],[2,"max-width","16px","max-height","40px",3,"ngClass"],[3,"deckPrefs","card"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,xa,2,2,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Pa)))},directives:[h.xw,h.Wh,g.sg,g.mk,S.oO,kt.c],encapsulation:2}),o})();var Z=l(74784);const Ct=function(o){return{highlight:o}};function Ma(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(2).onCardClick(a,c)}),t._UZ(1,"cm-stack-card",9),t.qZA()}if(2&o){const n=i.$implicit,e=t.oxw(2);t.Udp("margin-left",e.getMargin()/2+"px"),t.uIk("card",n),t.xp6(1),t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("ngClass",t.VKq(7,Ct,e.isNext(n)))("piles",e.tableaus)("card",e.onDisplayCard(n))}}function va(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"cm-card-pile",5),t.NdJ("click",function(a){return t.CHM(n),t.oxw().draw(a)}),t.qZA(),t.YNc(2,Ma,2,9,"div",6),t._UZ(3,"div",7),t.BQk()}if(2&o){const n=t.oxw();t.xp6(1),t.Udp("margin-left",n.getMargin()/2+"px"),t.Q6J("piles",n.tableaus)("pile",n.stage.component.data.getState().getDeck()),t.xp6(1),t.Q6J("ngForOf",n.stage.component.data.getState().getPile())("ngForTrackBy",n.trackObjectFn)}}function ya(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(3).onCardClick(a,c)}),t.TgZ(1,"div",15),t._UZ(2,"cm-stack-card",9),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw(2).index,s=t.oxw();t.Udp("left",4*e/26,"px")("bottom",4*e/26,"px"),t.xp6(1),t.uIk("card",n),t.xp6(1),t.Q6J("deckPrefs",s.stage.component.getDeckPrefs())("ngClass",t.VKq(9,Ct,!s.isFoundation(a)&&s.isNext(n)))("piles",s.tableaus)("card",s.onDisplayCard(n))}}function ba(o,i){if(1&o){const n=t.EpF();t.ynx(0),t._UZ(1,"cm-stack-card",11),t.YNc(2,ya,3,11,"div",12),t.TgZ(3,"cm-stack-card",13),t.NdJ("click",function(a){t.CHM(n);const s=t.oxw().index,c=t.oxw();return c.stage.component.hasSmartButton(c.getTopIndex(s)+c.tableaus)&&c.stage.component.onSmartButton(a,c.getTopIndex(s)+c.tableaus)}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(),e=n.index,a=n.$implicit,s=t.oxw();t.xp6(1),t.Q6J("deckPrefs",s.stage.component.getDeckPrefs())("piles",s.tableaus)("foundation",s.isFoundation(e)),t.xp6(1),t.Q6J("ngForOf",a)("ngForTrackBy",s.trackObjectFn),t.xp6(1),t.Q6J("deckPrefs",s.stage.component.getDeckPrefs())("piles",s.tableaus)("ngClass",s.stage.component.hasSmartButton(s.getTopIndex(e)+s.tableaus)?"active":a.length>0?"inactive":""),t.uIk("suboption",-1-(s.getTopIndex(e)+s.tableaus))}}function Sa(o,i){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,ba,4,9,"ng-container",1),t.qZA()),2&o){const n=i.$implicit,e=t.oxw();t.Udp("margin","0 "+e.getMargin()/2+"px"),t.Q6J("fxFlex",e.getFlex()),t.xp6(1),t.Q6J("ngIf",n)}}function wa(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw(2).onCardClick(a,c)}),t._UZ(1,"cm-stack-card",9),t.qZA()}if(2&o){const n=i.$implicit,e=t.oxw(2);t.Udp("height",e.getHeight(n)+"px"),t.uIk("card",n),t.xp6(1),t.Q6J("deckPrefs",e.stage.component.getDeckPrefs())("ngClass",t.VKq(7,Ct,e.isNext(n)))("piles",e.tableaus)("card",e.onDisplayCard(n))}}function Ta(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div"),t.YNc(1,wa,2,9,"div",16),t.TgZ(2,"cm-stack-card",17),t.NdJ("click",function(a){const c=t.CHM(n).index,r=t.oxw();return r.stage.component.hasSmartButton(c)&&r.stage.component.onSmartButton(a,c)}),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw();t.Udp("margin","0 "+a.getMargin()/2+"px"),t.xp6(1),t.Q6J("ngForOf",n)("ngForTrackBy",a.trackObjectFn),t.xp6(1),t.Q6J("deckPrefs",a.stage.component.getDeckPrefs())("piles",a.tableaus)("ngClass",a.stage.component.hasSmartButton(e)?"active":n.length>0?"inactive":""),t.uIk("suboption",-1-e)}}let xt=(()=>{class o extends z{constructor(n){super(n),this.stage=n}ngOnInit(){this.tableaus=this.getStateInfo().tableau.length}getFlex(){return this.stage.component.data.getState().hasDeck()?"initial":4===this.getStateInfo().top.length?"nogrow":"true"}getStateInfo(){return this.stage.getState().info}getMargin(){return M.Ak.calculateMargin(this.tableaus)}getMarginText(n){const e=this.getMargin();return this.stage.component.data.isGame(d.Y.FreeCell)?n<4?"0 "+(3===n?e:e/2)+"px 0 0":"0 0 0 "+(4===n?e:e/2)+"px":"0 "+e/2+"px"}getTopIndex(n){if(this.stage.component.data.isGame(d.Y.SeahavenTowers)){if(n>7)return n-2;if(n>1)return n-1}return n}isFoundation(n){return this.stage.getState().isFoundation(n)}getHeight(n){const a=M.Ak.calculateStackWidth(this.tableaus)>72;return"-"===n[_.Ti]?a?16:8:a?48:40}isNext(n){return!this.stage.component.data.isGame(d.Y.Spider)&&("A"===n[_.Ti]||this.getStateInfo().highlight.indexOf(n)>-1)}onDisplayCard(n){return"-"!==n[0]&&this.stage.component.data.isGame(d.Y.Spider)&&1===this.stage.component.data.getVariationValue(I.V.Spider.Option.SUITS)?n[0]+"S":n}trackIndexFn(n,e){return n}trackObjectFn(n,e){return e}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-solitaire-stage"]],features:[t.qOj],decls:5,vars:7,consts:[["fxLayout","row","fxLayoutAlign","end"],[4,"ngIf"],["fxLayout","column","style","position: relative;",3,"fxFlex","margin",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row"],[3,"margin",4,"ngFor","ngForOf","ngForTrackBy"],[3,"piles","pile","click"],["cmDraggable","","style","max-width: 20px;",3,"margin-left","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxFlex",""],["cmDraggable","",2,"max-width","20px",3,"click"],[3,"deckPrefs","ngClass","piles","card"],["fxLayout","column",2,"position","relative",3,"fxFlex"],[1,"slot",3,"deckPrefs","piles","foundation"],["style","position: absolute;",3,"left","bottom","click",4,"ngFor","ngForOf","ngForTrackBy"],["cmDroppable","",1,"slot",2,"position","absolute","top","0",3,"deckPrefs","piles","ngClass","click"],[2,"position","absolute",3,"click"],["cmDraggable",""],["cmDraggable","","children","",3,"height","click",4,"ngFor","ngForOf","ngForTrackBy"],["cmDroppable","",1,"slot",3,"deckPrefs","piles","ngClass","click"],["cmDraggable","","children","",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,va,4,6,"ng-container",1),t.YNc(2,Sa,2,4,"div",2),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,Ta,3,8,"div",4),t.qZA()),2&n&&(t.Udp("margin",4+e.getMargin()+"px 0px "+e.getMargin()+"px"),t.xp6(1),t.Q6J("ngIf",e.stage.component.data.getState().hasDeck()),t.xp6(1),t.Q6J("ngForOf",e.getStateInfo().top)("ngForTrackBy",e.trackIndexFn),t.xp6(2),t.Q6J("ngForOf",e.getStateInfo().tableau)("ngForTrackBy",e.trackIndexFn))},encapsulation:2}),o})(),Bt=(()=>{class o{constructor(n,e,a){this.hand=n,this.solitaire=e,this.element=a}onStart(n){const e=this.hand?this.hand.component:this.solitaire.stage.component,a=e.dragManager,s=a.getDragMode();if(0===s)return;const c=this.element.nativeElement;if(2!==s||e.dataService.canSendSolitaireStageAction())if(1===s||function Ia(o,i){const n=document.querySelectorAll("[cmDroppable]");let e=!1;for(let a=0;a<n.length;a++){const s=n[a];o.hasDroppable(i,s)&&(s.classList.add("drop-active"),e=!0)}return e}(a,c)){const r=Z.O.getXY(n);a.onStart(c,Z.O.roundForSpeed(r[0]),Z.O.roundForSpeed(r[1]))}else e.showInvalidMove(n)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(nt,9),t.Y36(xt,9),t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","cmDraggable",""]],hostBindings:function(n,e){1&n&&t.NdJ("touchstart.out-zone",function(s){return e.onStart(s)})("mousedown.out-zone",function(s){return e.onStart(s)})}}),o})();const Pt="drop-active";function Aa(o,i,n,e,a,s,c,r){const m=Math.max(o,a),f=Math.min(o+n,a+c),p=Math.max(i,s),u=Math.min(i+e,s+r);return m<f&&p<u?(f-m)*(u-p):0}let Ja=(()=>{class o{constructor(n,e){this.component=n,this.element=e}onMove(n){const e=this.component.dragManager;if(!e.isDragging())return;const a=Z.O.getXY(n,!0),s=a[0],c=a[1],r=[],m=e.getSelf();if(1===e.getDragMode()){let p;const u=e.getHand(),C=m.element.getBoundingClientRect(),b=m.index;if(C.left<m.left){for(let x=b-1;x>=0;--x){const P=u[x],w=x+1;void 0===p?s<P.left+P.element.offsetWidth?r.push([P.element,w,C.width]):(p=w,r.push([P.element,w,0])):r.push([P.element,w,0])}void 0===p&&(p=0);for(let x=b+1;x<u.length;++x)r.push([u[x].element,x,0])}else{for(let x=b+1;x<u.length;++x){const P=u[x];void 0===p?s>P.left?r.push([P.element,x,-C.width]):(p=x,r.push([P.element,x+1,0])):r.push([P.element,x+1,0])}void 0===p&&(p=u.length)}r.push([m.element,p,s-e.getStartX(),c-e.getStartY()])}else{const p=s-e.getStartX(),u=c-e.getStartY(),C=e.getZIndex();r.push([m.element,C,p,u]);const y=e.getMovingCards();for(let b=0;b<y.length;++b)r.push([y[b],C,p,u]);e.setDroppable(function Ya(o){const i=o.element,n=document.querySelectorAll("."+Pt+" .card");let e=null;const a=i.getBoundingClientRect(),s=Z.O.roundForSpeed(a.left),c=Z.O.roundForSpeed(a.top),r=Z.O.roundForSpeed(a.width),m=Z.O.roundForSpeed(a.height),y=(r>>1)*(m>>1);let x=0;for(let P=0;P<n.length&&x<y;P++){const w=n[P],T=w.getBoundingClientRect(),en=Aa(s,c,r,m,Z.O.roundForSpeed(T.left),Z.O.roundForSpeed(T.top),r,m);en>x&&(e=w.parentElement,x=en)}return e}(m))}for(let p=0;p<r.length;++p)Z.O.setRelativeOffset(r[p][0],r[p][1],r[p][2],r[p][3])}onEnd(n){const e=this.component.dragManager;if(!e.isDragging())return;if(e.getSelf(),1===e.getDragMode()){const r=e.getHand();if(r.length>0){const m=function Da(o){const i=o.getSelf(),n=i.element.getBoundingClientRect();if(Math.abs(n.left-i.left)<8)return null;const e=n.left<i.left,a=o.getHand();if(a.length>0){let s=e?0:a.length-1;for(;;){const c=a[s];if(c===i)return null;if("0px"!==c.element.style.left)return c.element.getAttribute("card");s=e?s+1:s-1}}}(e);m&&e.moveCard(m);const f=[];for(let p=0;p<r.length;p++)f.push(r[p].element);Z.O.clearAllRelativeOffsets(f)}}const c=Z.O.getXY(n);e.onEnd(n,c[0],c[1]),function Fa(){const o=document.querySelectorAll("."+Pt);for(let i=0;i<o.length;i++)o[i].classList.remove(Pt)}()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(H.$,1),t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","cmDragGame",""]],hostBindings:function(n,e){1&n&&t.NdJ("touchmove.out-zone",function(s){return e.onMove(s)})("mousemove.out-zone",function(s){return e.onMove(s)})("touchend",function(s){return e.onEnd(s)})("mouseup",function(s){return e.onEnd(s)})}}),o})();function Qa(o,i){if(1&o&&t._UZ(0,"cm-user",6),2&o){const n=t.oxw().index,e=t.oxw();t.Q6J("user",e.getUser(n))}}const qt=function(o){return{defend:o}};function Ga(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",3),t.YNc(1,Qa,1,1,"cm-user",4),t.TgZ(2,"cm-card",5),t.NdJ("click",function(a){const c=t.CHM(n).$implicit;return t.oxw().onCardClick(a,c)}),t.qZA()()}if(2&o){const n=i.$implicit,e=i.index,a=t.oxw();t.Q6J("ngClass",t.VKq(5,qt,a.isDefender(e))),t.xp6(1),t.Q6J("ngIf",!a.isDefender(e)),t.xp6(1),t.Q6J("deckPrefs",a.stage.component.getDeckPrefs())("animate",a.getPlayerIndex(e))("card",n)}}let Na=(()=>{class o extends z{constructor(n){super(n),this.stage=n}isSelfDefender(){const n=this.stage.component.data;return n.getState().getProperty("defender")===n.info.selfIndex}isDefender(n){return n%2==1&&n<this.getState().info.marker}getState(){return this.stage.component.data.getState()}getPlayerIndex(n){const e=this.stage.component.data;if(this.isDefender(n))return e.info.adjustIndex(e.getState().getProperty("defender"));const a=e.getState().getProperty("owners")[n];return e.info.adjustIndex(a)}getUser(n){const e=this.getPlayerIndex(n);return this.stage.component.findUserById(this.stage.component.data.info.getPlayerId(e))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-durak-stage"]],features:[t.qOj],decls:3,vars:4,consts:[["fxLayout","row",1,"durak"],["fxFlex","",3,"ngClass",4,"ngFor","ngForOf"],["id","pile",3,"ngClass"],["fxFlex","",3,"ngClass"],["size","small",3,"user",4,"ngIf"],[3,"deckPrefs","animate","card","click"],["size","small",3,"user"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Ga,3,7,"div",1),t._UZ(2,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",e.getPile()),t.xp6(1),t.Q6J("ngClass",t.VKq(2,qt,e.isSelfDefender())))},directives:[h.xw,g.sg,h.yH,g.mk,S.oO,g.O5,X.A,M.Ak],styles:[".durak[_ngcontent-%COMP%]{position:relative}.durak[_ngcontent-%COMP%]   .defend[_ngcontent-%COMP%]{position:relative;margin-top:42px;margin-left:-90px}.durak[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{position:absolute;margin-left:29px;margin-top:-20px;z-index:1}@media screen and (max-width: 599px),screen and (max-height: 767px){.durak[_ngcontent-%COMP%]   .defend[_ngcontent-%COMP%]{margin-left:-72px}.durak[_ngcontent-%COMP%]   cm-user[_ngcontent-%COMP%]{margin-left:20px}}"]}),o})();var Lt=l(40740);function Ha(o,i){if(1&o&&t._UZ(0,"cm-user-face",9),2&o){const n=t.oxw().$implicit,e=t.oxw(3);t.Q6J("url",e.getUrl(n))}}function Ua(o,i){if(1&o&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.xp6(1),t.Oqu(e.format(n).small)}}function Ba(o,i){if(1&o&&t._UZ(0,"div"),2&o){const n=t.oxw(2).$implicit,e=t.oxw(3);t.uIk("suitxt",e.getSuitText(e.format(n).suit))}}function qa(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Ua,2,1,"small",10),t.YNc(3,Ba,1,1,"div",10),t.qZA()),2&o){const n=t.oxw().$implicit,e=t.oxw(3);t.xp6(1),t.hij(" ",e.format(n).text,""),t.xp6(1),t.Q6J("ngIf",e.format(n).small),t.xp6(1),t.Q6J("ngIf",void 0!==e.format(n).suit)}}function La(o,i){if(1&o&&(t.TgZ(0,"div",6),t.YNc(1,Ha,1,1,"cm-user-face",7),t.YNc(2,qa,4,3,"span",8),t.qZA()),2&o){const n=i.$implicit,e=t.oxw().index,a=t.oxw(2);t.Q6J("ngSwitch",0==e)("ngClass",a.getMatrixClass(n,e)),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}function Ea(o,i){if(1&o&&(t.TgZ(0,"div",4),t.YNc(1,La,3,4,"div",5),t.qZA()),2&o){const n=i.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function za(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,Ea,2,1,"div",3),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.getMatrix())}}let Ra=(()=>{class o{constructor(n){this.stage=n}getMatrix(){return this.stage.component.data.game.getMatrix()}getMatrixClass(n,e){if(0==e)return"cell header pics";const a=(0,O.d8)(n);return void 0===a.suit?"cell":"cell "+_.Ex.getColorName(a.suit,this.stage.component.getDeckPrefs())+"-suit"}format(n){const e=(0,O.d8)(n);return e.text.indexOf("NT")>0&&(e.text=e.text.replace("NT",""),e.small=e.text.length>1?"N":"NT"),e}getUrl(n){return this.stage.component.findUserById(n).meta.getUrl()}getSuitText(n){return _.Ex.getSuitText(n,this.stage.component.getDeckPrefs())}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-auction-history"]],decls:1,vars:1,consts:[["fxLayout","row","fxLayoutAlign","center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center"],[1,"matrix"],["class","outer","fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row",1,"outer"],["class","inner",3,"ngSwitch","ngClass",4,"ngFor","ngForOf"],[1,"inner",3,"ngSwitch","ngClass"],["size","tiny",3,"url",4,"ngSwitchCase"],[4,"ngSwitchCase"],["size","tiny",3,"url"],[4,"ngIf"]],template:function(n,e){1&n&&t.YNc(0,za,3,1,"div",0),2&n&&t.Q6J("ngIf",e.getMatrix())},directives:[g.O5,h.xw,h.Wh,g.sg,g.RF,g.mk,S.oO,g.n9,Lt._],styles:[".matrix[_ngcontent-%COMP%]{color:#000000de;text-align:center;padding:2px;background:#edf0f3}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #aaa}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner[_ngcontent-%COMP%]{min-width:12px;min-height:8px}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner.cell[_ngcontent-%COMP%]{height:16px;max-height:16px;width:24px;max-width:24px;font-size:13px;border-left:1px solid #aaa;border-top:1px solid #aaa}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner.cell.header[_ngcontent-%COMP%]{font-weight:700}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner.cell.header.pics[_ngcontent-%COMP%]{min-width:24px;min-height:24px}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner.cell[_ngcontent-%COMP%]   [suitxt][_ngcontent-%COMP%]{display:inline-block;position:relative;top:2px;width:12px;height:12px;margin-left:-1px;margin-right:-2px}.matrix[_ngcontent-%COMP%]   div.outer[_ngcontent-%COMP%]   div.inner.cell[_ngcontent-%COMP%]:last-child{border-right:1px solid #aaa}"]}),o})();var D=l(35332),Et=l(77836),Wa=l(49580),R=l(92773);function Va(o,i){if(1&o&&(t._UZ(0,"cm-cost",5),t.ALo(1,"cmCompactNumber")),2&o){const n=t.oxw();t.Q6J("amount",t.lcZ(1,1,n.getCost()))}}const $a=function(o){return{"has-cost":o}};let Ka=(()=>{class o{constructor(n,e){this.cacheService=n,this.loginService=e}hasCost(){return this.loginService.isLoggedIn()}getCost(){return this.cacheService.firebaseCache.table.isPrivate()?250:1e3}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(U.Q),t.Y36(Et.r))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-timeout-game-dialog"]],decls:14,vars:4,consts:[["mat-dialog-title",""],[1,"sec-fade"],["mat-button","","mat-dialog-close",""],["color","green","mat-raised-button","","mat-dialog-close","true",3,"ngClass"],[3,"amount",4,"ngIf"],[3,"amount"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Pause Game?"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._uU(3," Timer will be disabled until someone hits resume. "),t._UZ(4,"br")(5,"br"),t.TgZ(6,"small",1),t._uU(7,"Note: You can resume anytime and others can resume only after three minutes."),t.qZA()(),t.TgZ(8,"mat-dialog-actions")(9,"button",2),t._uU(10,"Cancel"),t.qZA(),t.TgZ(11,"button",3),t._uU(12,"Pause Game "),t.YNc(13,Va,2,3,"cm-cost",4),t.qZA()()),2&n&&(t.xp6(11),t.Q6J("ngClass",t.VKq(2,$a,e.hasCost())),t.xp6(2),t.Q6J("ngIf",e.hasCost()))},directives:[J.uh,J.xY,J.H8,F.lW,J.ZT,g.mk,S.oO,g.O5,Wa.O],pipes:[R.L],encapsulation:2}),o})();var v=l(82370),ja=l(26210);let at=(()=>{class o{constructor(n){this.dialogRef=n}ngOnInit(){v.c.trackEvent(D.sP.getAnalyticsCategory(this.type),v.c.Action.Open)}getTitle(){return this.group?this.group:D.sP.getData(this.type).title}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(J.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-preferences-dialog"]],decls:3,vars:4,consts:[[2,"min-width","320px","margin","0","margin-bottom","8px"],[3,"group","lock","type"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t._UZ(2,"cm-preferences",1)),2&n&&(t.xp6(1),t.Oqu(e.getTitle()),t.xp6(1),t.Q6J("group",e.group)("lock",!!e.group)("type",e.type))},directives:[ja.h],encapsulation:2}),o})();var Xa=l(52021);let ti=(()=>{class o{constructor(n,e){this.dialogRef=n,this.cacheService=e}static launch(n,e){n.open(o,{panelClass:"no-padding-dialog"}).componentInstance.friend=e}ngOnInit(){v.c.trackEvent(v.c.Action.Chat,v.c.Action.Open)}ngOnDestroy(){!this.cacheService.hasFirebase()||this.friend||(this.cacheService.firebaseCache.table.unreadChat=!1)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(J.so),t.Y36(U.Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-chat-dialog"]],decls:2,vars:1,consts:[[3,"friend"]],template:function(n,e){1&n&&(t.TgZ(0,"mat-dialog-content"),t._UZ(1,"cm-chat",0),t.qZA()),2&n&&(t.xp6(1),t.Q6J("friend",e.friend))},directives:[J.xY,Xa.P],encapsulation:2}),o})();var ni=l(36915);const ei=[{txt:"Pause",icon:"pause"},{txt:"Scoreboard",icon:"trending_up"},{txt:"Info",icon:"info"},{txt:"Auto",hide:!0,icon:"flash_on",raised:o=>o.cacheService.firebaseCache.self.meta.hasAutoplay()},{txt:"TRAM",hide:!0,icon:"flash_on",raised:o=>o.cacheService.firebaseCache.self.meta.hasTram()},{txt:"Video",icon:"videocam",raised:o=>o.cacheService.firebaseCache.self.hasVideo()},{txt:"Sound Effects",icon:"volume_up",hide:!0,raised:o=>o.cacheService.firebaseCache.self.meta.hasSounds()},{txt:"Deck",icon:"style",hide:!0,new:!0},{txt:"Variations",icon:"tune",hide:!0},{txt:"Rules",icon:"help",hide:!0},{txt:"Quit",icon:"exit_to_app",hide:!0}],oi=[{txt:"New",icon:"autorenew",suboption:-2,sound:G.g.SOLITAIRE_NEW},{txt:"Undo",icon:"undo",suboption:-3,except:-4,sound:G.g.SOLITAIRE_UNDO},{txt:"Auto",icon:"flash_on",suboption:-4,raised:o=>o.data.getState().getProperty("auto"),sound:G.g.SOLITAIRE_AUTO},{txt:"Sound Effects",icon:"volume_up",hide:!0,raised:o=>o.cacheService.firebaseCache.self.meta.hasSounds()},{txt:"Deck",icon:"style",hide:!0,new:!0},{txt:"Chat",icon:"chat"},{txt:"Rules",icon:"help",hide:!0},{txt:"Quit",icon:"exit_to_app"}],ai=[{txt:"Auto",icon:"flash_on",raised:o=>o.cacheService.firebaseCache.self.meta.hasAutoplay()},{txt:"Clear",icon:"delete"},{txt:"Color",icon:"palette",custom:o=>o.cacheService.firebaseCache.self.meta.getWordHighlightsClass()},{txt:"Instructions",icon:"info"},{txt:"Save & Exit",icon:"exit_to_app",class:"rotate180"}],ii=[{txt:"Points",icon:"trending_up"},{txt:"Variations",icon:"tune"}];var si=l(93630),ci=l(14604),ri=l(84027),Ot=l(65867),zt=l(34594),Rt=l(94638);function di(o,i){1&o&&(t.TgZ(0,"div",8),t._uU(1,"CardzMania"),t.qZA())}function gi(o,i){if(1&o&&(t.TgZ(0,"div",9),t._uU(1," CardzMania "),t.TgZ(2,"div",10),t._uU(3),t.ALo(4,"cmTranslate"),t.qZA(),t.TgZ(5,"div",11),t._uU(6),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(3),t.lnq("",t.lcZ(4,4,n.getGameComponent().data.config.name),"",n.getTableId()," - ",n.getVariationTitle(),""),t.xp6(3),t.Oqu(n.getTitle())}}function li(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",3)(2,"div"),t._uU(3),t.ALo(4,"cmTranslate"),t.qZA(),t._UZ(5,"div",4),t.TgZ(6,"div",5),t._uU(7),t.qZA()(),t.YNc(8,di,2,0,"div",6),t.YNc(9,gi,7,6,"div",7),t.BQk()),2&o){const n=t.oxw();t.xp6(3),t.lnq("",t.lcZ(4,7,n.getGameComponent().data.config.name),"",n.getTableId()," - ",n.getVariationTitle(),""),t.xp6(3),t.Q6J("ngClass",n.getThinTitleClass()),t.xp6(1),t.Oqu(n.getTitle()),t.xp6(1),t.Q6J("ngIf",!n.getGameComponent().isWordGame()),t.xp6(1),t.Q6J("ngIf",!1)}}function pi(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).onClick(a)}),t.TgZ(1,"mat-icon",5),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getMenuDropdownClass(n)),t.xp6(1),t.Q6J("ngClass",n.class),t.xp6(1),t.Oqu(n.icon),t.xp6(1),t.hij(" ",e.getBtnText(n)," ")}}function mi(o,i){if(1&o&&(t.ynx(0),t.YNc(1,pi,4,4,"button",15),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isVisible(n))}}function _i(o,i){if(1&o&&(t.TgZ(0,"button",17)(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t.TgZ(3,"div",18),t._uU(4,"MENU"),t.qZA()()),2&o){t.oxw();const n=t.MAs(2);t.Q6J("matMenuTriggerFor",n)}}function hi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-menu",null,12),t.YNc(3,mi,2,1,"ng-container",13),t.qZA(),t.YNc(4,_i,5,1,"button",14),t.BQk()),2&o){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.getButtons()),t.xp6(1),t.Q6J("ngIf",n.hasSelf())}}function fi(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).onClick(a)}),t.TgZ(1,"mat-icon",5),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getMenuDropdownClass(n)),t.xp6(1),t.Q6J("ngClass",n.class),t.xp6(1),t.Oqu(n.icon),t.xp6(1),t.hij(" ",e.getBtnText(n)," ")}}function ui(o,i){if(1&o&&(t.ynx(0),t.YNc(1,fi,4,4,"button",15),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isVisible(n))}}function Ci(o,i){if(1&o&&(t.TgZ(0,"button",20)(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t.TgZ(3,"div",18),t._uU(4,"MENU"),t.qZA()()),2&o){t.oxw();const n=t.MAs(2);t.Q6J("matMenuTriggerFor",n)}}function xi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-menu",null,12),t.YNc(3,ui,2,1,"ng-container",13),t.qZA(),t.YNc(4,Ci,5,1,"button",19),t.BQk()),2&o){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.getButtons()),t.xp6(1),t.Q6J("ngIf",n.hasSelf())}}function Pi(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).onClick(a)}),t.TgZ(1,"mat-icon",5),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getMenuDropdownClass(n)),t.xp6(1),t.Q6J("ngClass",n.class),t.xp6(1),t.Oqu(n.icon),t.xp6(1),t.hij(" ",e.getBtnText(n)," ")}}function Oi(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Pi,4,4,"button",15),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isVisible(n))}}function Mi(o,i){if(1&o&&(t.TgZ(0,"button",25)(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t.TgZ(3,"div",18),t._uU(4,"MENU"),t.qZA()()),2&o){t.oxw();const n=t.MAs(2);t.Q6J("matMenuTriggerFor",n)}}function vi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"cmTranslate"),t.qZA(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,2,n.getGameComponent().data.config.name)," # ",n.getTitle(),"")}}const yi=function(o){return{alone:o}};function bi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",26),t._uU(2),t.ALo(3,"cmTranslate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(6,yi,!n.hasSubtitle())),t.xp6(1),t.AsE("",t.lcZ(3,4,n.getGameComponent().data.config.name),"",n.getTableId(),""),t.xp6(3),t.Oqu(n.getTitle())}}function Si(o,i){if(1&o&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Oqu(n.getVariationTitle())}}function wi(o,i){if(1&o&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getBadgeClass(n)),t.xp6(1),t.Oqu(e.getBadge(n))}}function Ti(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit;return t.oxw(2).onClick(a)}),t.TgZ(1,"mat-icon",5),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._uU(4),t.qZA(),t.YNc(5,wi,2,2,"div",30),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.Q6J("ngClass",e.getButtonClass(n)),t.xp6(1),t.Q6J("ngClass",n.class),t.xp6(1),t.Oqu(n.icon),t.xp6(2),t.Oqu(n.txt),t.xp6(1),t.Q6J("ngIf",e.hasBadge(n))}}function ki(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Ti,6,5,"button",28),t.BQk()),2&o){const n=i.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.hide&&e.isVisible(n))}}function Zi(o,i){if(1&o&&(t.TgZ(0,"mat-toolbar",21)(1,"mat-menu",null,12),t.YNc(3,Oi,2,1,"ng-container",13),t.qZA(),t.YNc(4,Mi,5,1,"button",22),t.TgZ(5,"div",11),t.YNc(6,vi,4,4,"ng-container",23),t.YNc(7,bi,6,8,"ng-container",23),t.YNc(8,Si,2,1,"div",24),t.qZA(),t._UZ(9,"div",4),t.YNc(10,ki,2,1,"ng-container",13),t.qZA()),2&o){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.getButtons()),t.xp6(1),t.Q6J("ngIf",n.hasSelf()),t.xp6(2),t.Q6J("ngIf",n.getGameComponent().isWordGame()),t.xp6(1),t.Q6J("ngIf",!n.getGameComponent().isWordGame()),t.xp6(1),t.Q6J("ngIf",n.hasSubtitle()),t.xp6(2),t.Q6J("ngForOf",n.getButtons())}}const Ii=[];let Wt=(()=>{class o{constructor(n,e,a,s,c,r){this.component=n,this.dialog=e,this.cacheService=a,this.dataService=s,this.loginService=c,this.navigationService=r,this.clearChatNotification()}getGameComponent(){return this.component?this.component:this.cacheService.game.component}clearChatNotification(){!this.cacheService.hasFirebase()||(this.cacheService.firebaseCache.table.unreadChat=!1)}getWordGameId(n){return 7===n.data.type?this.getGameComponent().data.info.getDCRound():void 0}getTableId(){const n=this.getGameComponent(),e=n.isWordGame();if(n.data.history&&!e)return"";const a=e?this.getWordGameId(n):n.cacheService.firebaseCache.self.place.getTableId();return!a||a<0?"":" #"+a+(!e&&this.loginService.isLoggedIn()&&this.cacheService.firebaseCache.table.isTransient()?" - "+R.L.transform(this.getGameComponent().cacheService.firebaseCache.table.getStakes())+" coins":"")}hasSelf(){return this.getGameComponent().data.hasSelf()}hasSubtitle(){return!(this.getGameComponent().isSolitaire()&&this.getGameComponent().data.config.presets.length<=1||this.getGameComponent().isWordGame())}getVariationTitle(){const n=this.getGameComponent(),e=D.sP.getVariationTitleHelper(n.data.detail.id,n.data.detail.options,n.data.getVariation(),n.data.type);return this.getGameComponent().isDuplicateBridge()?e.replace("Rubber","Duplicate").replace("round","board"):e}getThinTitleClass(){const n=this.getGameComponent();return n.isWordGame()?n.data.game.getWordGameStatusAndClass().class:"bold-text"}getTitle(){const n=this.getGameComponent(),e=this.cacheService.firebaseCache.dc.getRounds(n.data.config.id,n.data.getVariation()[0]),a=7===n.data.type?"Round "+n.data.info.getDCRound()+" of "+e:void 0;if(n.isSolitaire())return this.hasSelf()||n.data.history||a?(a?a+" - ":"")+(n.data.getState().getProperty("moves")||0)+" moves":"Waiting for others...";if(n.isWordGame())return n.data.game.getWordGameStatusAndClass().text;if(a)return a;const s=n.data.getStage();if("final"===s.type)return"End of game";let c=(n.isDuplicateBridge()?"Board ":"Round ")+(n.data.getRound().getIndex()+1);return n.data.game.hasStageTitlePostfix()&&(c+=", "+this.getStageTitle(s)),c}getStageTitle(n){const e=n.type;return"trick"===e?"Trick "+(n.getTrickIndex()+1):"final"===e?"End of game":e[0].toUpperCase()+e.slice(1).replace("_alt","")+" stage"}hasBadge(n){return"Chat"===n.txt?this.cacheService.hasFirebase()&&this.cacheService.firebaseCache.table.unreadChat:!(!this.getGameComponent().loginService.isLoggedIn()||this.isRaised(n)||"New"!==n.txt&&"Undo"!==n.txt&&"Assistant"!==n.txt)}getMenuDropdownClass(n){if(n.custom)return n.custom(this.getGameComponent())}getButtonClass(n){let e="";return n.wide&&(e+="wide "),this.isRaised(n)&&(e+="raised "),n.custom&&(e+=n.custom(this.getGameComponent())),e}getBadgeClass(n){if("Chat"===n.txt)return"alert";if("New"===n.txt||"Undo"===n.txt&&0===this.getUndoLeft())return"cost";if("Assistant"===n.txt){const e=this.getGameComponent().data.getAssistantCost();return 0===e?"free":e<=this.cacheService.firebaseCache.self.meta.getCoins()?"cost":"cost buy"}}getBtnText(n){let e=n.txt;return"Color"===e?e+=": "+["Green","Blue"][this.cacheService.firebaseCache.self.meta.getAlternateWordHighlightsIndex()]:"Timer"==e?e+=" (DISABLED)":"Auto"!=e||this.getGameComponent().isSolitaire()?"TRAM"==e?e+=" - "+(this.cacheService.firebaseCache.self.meta.hasTram()?"ON":"OFF"):"Sound Effects"==e?e+=" - "+(this.cacheService.firebaseCache.self.meta.hasSounds()?"ON":"OFF"):"Video"==e?e+=" - "+(this.cacheService.firebaseCache.self.hasVideo()?"ON":"OFF"):"Deck"==e&&(e+=" - "+M.S9[this.cacheService.firebaseCache.self.meta.getSuitOrderIndex()].icons+(this.cacheService.firebaseCache.self.meta.isAscending()?"\u2191":"\u2193")):e+=" - "+(this.cacheService.firebaseCache.self.meta.hasAutoplay()?"ON":"OFF"),e}getUndoLeft(){return this.getGameComponent().data.getState().getProperty("undo")||0}getBadge(n){if("Chat"===n.txt)return"\xb7";if("Undo"===n.txt){const e=this.getUndoLeft();return e>0?e:R.L.transform(.2*this.getGameComponent().getBuyin())}return"New"===n.txt?R.L.transform(this.getGameComponent().getBuyin()):"Assistant"===n.txt?R.L.transform(this.getGameComponent().data.getAssistantCost()):void 0}onClick(n){if(this.getGameComponent().data.playSound(n.sound),void 0!==n.suboption)return void this.getGameComponent().onSelect(n.suboption,!0);const e=n.txt,a=n.icon;"Chat"===e?this.chat():"Auto"!==e||this.getGameComponent().isSolitaire()?"TRAM"===e?this.tram():"Sound Effects"===e?this.sound():"Video"===e?this.video():"exit_to_app"===a?this.quit():"Scoreboard"===e?this.scores():"Pause"===e?this.pause():"Settings"===e?this.settings():"Deck"===e?this.deck():"Color"===e?this.toggleWordColor():"Assistant"!==e||this.isRaised(n)?"tune"===n.icon?this.variations():"Rules"===e||"Instructions"===e?this.rules():"Info"===e?this.dcInfo():"Clear"===e&&this.getGameComponent().data.game.onClear(this.dataService):this.assistant():this.autoplay()}isRaised(n){return!!n.raised&&n.raised(this.getGameComponent())}isVisible(n){return(void 0===n.except||!this.getGameComponent().data.game.isEnabled(n.except,!0))&&(void 0!==n.suboption?this.getGameComponent().data.game.isEnabled(n.suboption,!0):n.admin?this.cacheService.firebaseCache.self.isAdmin():"Pause"===n.txt?this.canPause():"Video"===n.txt?this.cacheService.firebaseCache.table.isPrivate()||this.cacheService.firebaseCache.table.isKnockoutOrRoundRobinTournament():"Scoreboard"===n.txt?!this.cacheService.firebaseCache.table.isDailyChallenge():"Info"===n.txt?this.cacheService.firebaseCache.table.isDailyChallenge():"Chat"===n.txt?!this.cacheService.firebaseCache.table.isPrivate():"Clear"===n.txt?this.getGameComponent().data.getStage().isWordzyMaster():"Auto"!==n.txt||this.getGameComponent().data.getStage().isWordzyMaster())}autoplay(){const n=this.cacheService.firebaseCache.self.meta.hasAutoplay();if(this.cacheService.firebaseCache.self.meta.setAutoplay(!n),v.c.trackEvent(v.c.Category.Game,v.c.Category.Auto,n?v.c.Action.Cancel:v.c.Action.Done),!n){const e=this.getGameComponent().isWordGame()?"Obvious highlights from previous user selections will be automatically updated. These are based on your original selections so if your original selections are correct, these will be correct as well. These apply to non-existing lettters and exact matches found in the word.":"Single option moves will now be autoplayed. For trick games, this includes consecutive cards. Cards are also considered consecutive when all of the cards between them have been discarded.";this.navigationService.onAlertCallback(e)}this.getGameComponent().cd.markForCheck()}toggleWordColor(){setTimeout(()=>{const n=this.cacheService.firebaseCache.self.meta.hasAlternateWordHighlights();this.cacheService.firebaseCache.self.meta.setWordColor(!n),this.getGameComponent().cd.markForCheck()},100)}tram(){const n=this.cacheService.firebaseCache.self.meta.hasTram();this.cacheService.firebaseCache.self.meta.setTram(!n),v.c.trackEvent(v.c.Category.Game,v.c.Category.Tram,n?v.c.Action.Cancel:v.c.Action.Done),n||this.navigationService.onAlertCallback("The rest are mine will be offered to you if you are guaranteed to win the rest of the tricks (all your cards beat everyone else's cards). If you disable this, you might still see other players using this option, its basically your preference whether you would like to use this option to end the round quickly or not."),this.getGameComponent().cd.markForCheck()}sound(){const n=this.dialog.open(at);n.componentInstance.type=D.sP.profile,n.componentInstance.group="Sound Effects"}video(){const n=this.cacheService.firebaseCache.self.hasVideo();n?this.cacheService.firebaseCache.self.stopVideo():ri.g.launch(this.dialog,this.loginService.isLoggedIn()),v.c.trackEvent(v.c.Category.Game,v.c.Category.Video,n?v.c.Action.Cancel:v.c.Action.Done)}assistant(){this.getGameComponent().data.getAssistantCost()>this.cacheService.firebaseCache.self.meta.getCoins()?ni.y.launchPay(this.dialog):this.dataService.enableAssistant()}chat(){this.clearChatNotification(),this.dialog.open(ti)}scores(){this.getGameComponent().showScores()}settings(){this.dialog.open(at).componentInstance.type=D.sP.profile}deck(){const n=this.dialog.open(at);n.componentInstance.type=D.sP.profile,n.componentInstance.group=D.O3}variations(){this.dialog.open(at).componentInstance.type=D.sP.game}rules(){Qt.P.launch(this.dialog,this.getGameComponent().data.config)}quit(){const n=this.getGameComponent().data.config.name===d.Y.Wordzy;(0,ci.Z)(this.dialog,this.dataService,n)}pause(){this.dialog.open(Ka).afterClosed().subscribe(n=>{if(n){if(!this.dataService.chargeCoins(K.UV.PAUSE,"Pause",1e3))return;this.dataService.setTimeout(!0)}})}canPause(){if(this.getGameComponent().timerManager.isDisabled())return!1;if(this.getGameComponent().data){const n=this.getGameComponent().data.getLive();if(n&&(n.hasTimeout()||n.isLastHumanPlayer()||!n.hasRemainingTimeout()))return!1}return!0}getButtons(){return this.hasSelf()?this.getGameComponent().isWordGame()?ai:this.getGameComponent().isSolitaire()?oi:ei:this.getGameComponent().isSolitaire()?Ii:ii}dcInfo(){si.W.launch(this.dialog,"daily-challenge",this.getGameComponent().data.config.id)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(H.$,9),t.Y36(J.uw),t.Y36(U.Q),t.Y36(tt.D),t.Y36(Et.r),t.Y36(Nt.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-toolbar"]],inputs:{mode:"mode"},decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-elevation-z1",4,"ngSwitchDefault"],["fxLayout","row",1,"thin-title"],["fxFlex",""],[3,"ngClass"],["class","center-info",4,"ngIf"],["class","updated-center-info",4,"ngIf"],[1,"center-info"],[1,"updated-center-info"],[1,"name"],[1,"title"],["gameMenu","matMenu"],[4,"ngFor","ngForOf"],["mat-icon-button","","class","txt-icon no-shadow main-btn",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"ngClass","click",4,"ngIf"],["mat-menu-item","",3,"ngClass","click"],["mat-icon-button","",1,"txt-icon","no-shadow","main-btn",3,"matMenuTriggerFor"],[1,"txt"],["color","primary","mat-mini-fab","","class","self-action white-glow",3,"matMenuTriggerFor",4,"ngIf"],["color","primary","mat-mini-fab","",1,"self-action","white-glow",3,"matMenuTriggerFor"],[1,"mat-elevation-z1"],["mat-icon-button","","class","txt-icon main-btn",3,"matMenuTriggerFor",4,"ngIf"],[4,"ngIf"],["class","subtitle",4,"ngIf"],["mat-icon-button","",1,"txt-icon","main-btn",3,"matMenuTriggerFor"],[1,"pretitle",3,"ngClass"],[1,"subtitle"],["mat-icon-button","","class","txt-icon",3,"ngClass","click",4,"ngIf"],["mat-icon-button","",1,"txt-icon",3,"ngClass","click"],["class","badge",3,"ngClass",4,"ngIf"],[1,"badge",3,"ngClass"]],template:function(n,e){1&n&&(t.ynx(0,0),t.YNc(1,li,10,9,"ng-container",1),t.YNc(2,hi,5,2,"ng-container",1),t.YNc(3,xi,5,2,"ng-container",1),t.YNc(4,Zi,11,6,"mat-toolbar",2),t.BQk()),2&n&&(t.Q6J("ngSwitch",e.mode),t.xp6(1),t.Q6J("ngSwitchCase","title"),t.xp6(1),t.Q6J("ngSwitchCase","text"),t.xp6(1),t.Q6J("ngSwitchCase","menu"))},directives:[g.RF,g.n9,h.xw,h.yH,g.mk,S.oO,g.O5,Ot.VK,g.sg,Ot.OP,Y.Hw,F.lW,Ot.p6,g.ED,zt.Ye],pipes:[Rt.X],styles:['#ghc[_ngcontent-%COMP%]{position:absolute;z-index:2;right:2px;bottom:2px}@media screen and (min-width: 600px) and (min-height: 768px){#ghc[_ngcontent-%COMP%]{right:8px}}@media screen and (min-width: 600px) and (min-height: 768px){#game-header.scalable[_ngcontent-%COMP%]{transform:scale(1.2);transform-origin:bottom right}}#game-header[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{max-height:102px}#game-header[_ngcontent-%COMP%]   .info-container.tall[_ngcontent-%COMP%]{max-height:152px}#game-header[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{position:relative;max-height:100px;border-radius:4px;box-shadow:0 0 0 2px #0000004d}#game-header[_ngcontent-%COMP%]   .info.has-deck[_ngcontent-%COMP%]{max-width:74px;background:rgba(0,0,0,.3)}#game-header[_ngcontent-%COMP%]   .info.has-deck.drawable-deck[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff9}#game-header[_ngcontent-%COMP%]   .info.has-card.under[_ngcontent-%COMP%]{margin-right:-56px!important}#game-header[_ngcontent-%COMP%]   .info.caution[_ngcontent-%COMP%]{border-radius:4px 4px 6px 6px;box-shadow:0 0 0 2px red}#game-header[_ngcontent-%COMP%]   .info.caution[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{background:#f8bbd0}.game.fivehundred.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.fivehundred.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.bridge.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.bridge.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p4[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p4   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p8[_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%], .game.spades.p8   [_nghost-%COMP%]   .info.simple[_ngcontent-%COMP%]{margin-top:50px}#game-header[_ngcontent-%COMP%]   div.head.grey[_ngcontent-%COMP%]{background:#D1C4E9;color:#000000de}#game-header[_ngcontent-%COMP%]   div.head[_ngcontent-%COMP%]{text-align:center;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 4px;border:0;font-size:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#game-header[_ngcontent-%COMP%]   div.head.tr[_ngcontent-%COMP%]{padding:2px 4px;border-top-left-radius:0;border-top-right-radius:2px;border-bottom-left-radius:4px;background:#2b2553;color:#fff;position:absolute;right:-1px;top:-1px;z-index:1}#game-header[_ngcontent-%COMP%]   div.display[_ngcontent-%COMP%]{text-align:center;color:#000000de;background:#fafafa;white-space:nowrap;font-size:20px;padding:7px 6px 6px;border-radius:0 0 6px 6px}#game-header[_ngcontent-%COMP%]   div.display.caution[_ngcontent-%COMP%]{background:red;color:#fff}#game-header[_ngcontent-%COMP%]   div.display.team[_ngcontent-%COMP%]{padding:0 2px;font-size:16px}#game-header[_ngcontent-%COMP%]   div.display.small[_ngcontent-%COMP%]{font-size:16px;padding:9px 6px}#game-header[_ngcontent-%COMP%]   .display.trump[_ngcontent-%COMP%]   [suitxt][_ngcontent-%COMP%]{margin:auto;width:24px;height:24px}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{padding:0;margin-top:-4px}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]   .mat-select-icon[_ngcontent-%COMP%]{width:12px;opacity:.54;transform:none}#game-header[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]   .mat-select-icon[_ngcontent-%COMP%]:after{font-size:10px}#game-header[_ngcontent-%COMP%]   cm-game-points-review[_ngcontent-%COMP%]{position:relative;top:2px}.inline-block[_ngcontent-%COMP%]{display:inline-block}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]{padding:2px;background:#edf0f3}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{min-width:11px;min-height:8px}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.neg[_ngcontent-%COMP%]{background:#ccc}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.zero[_ngcontent-%COMP%]{background:#fff}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.one[_ngcontent-%COMP%]{background:#ef5350}#game-header[_ngcontent-%COMP%]   .display.color-matrix[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div.two[_ngcontent-%COMP%]{background:#7B1FA2}#game-header[_ngcontent-%COMP%]   .matrix[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;transform:translateY(-100%);color:#000000de;text-align:center;padding:2px;background:#edf0f3}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:-20px;top:-20px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]{border:1px solid #aaa;border-right:0}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]{border-right:1px solid #aaa}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]{height:24px;max-height:24px;width:48px;max-width:48px;font-size:14px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell.final[_ngcontent-%COMP%]{font-weight:700;border-top:1px solid #aaa;color:#393169}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]   .annotation[_ngcontent-%COMP%]{font-size:11px;opacity:.54;min-width:14px;text-align:right}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-size:16px;text-align:right;padding-right:4px}#game-header[_ngcontent-%COMP%]   .matrix.gin[_ngcontent-%COMP%]   div.player[_ngcontent-%COMP%]   div.game[_ngcontent-%COMP%]   div.cell[_ngcontent-%COMP%]:first-child{font-weight:700;border-bottom:1px solid #aaa}.game[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;background:#0f8e03 url(/res/images/bg/green_felt.png) repeat}.game.solitaire[_ngcontent-%COMP%]{overflow:initial}.daily-challenge[_nghost-%COMP%]   .game[_ngcontent-%COMP%], .daily-challenge   [_nghost-%COMP%]   .game[_ngcontent-%COMP%]{background:#f56c04 url(/res/images/bg/orange_felt.png) repeat}.weekly-challenge[_nghost-%COMP%]   .game[_ngcontent-%COMP%], .weekly-challenge   [_nghost-%COMP%]   .game[_ngcontent-%COMP%]{background:#b90000 url(/res/images/bg/red_felt.png) repeat}.wm[_nghost-%COMP%]   .game[_ngcontent-%COMP%], .wm   [_nghost-%COMP%]   .game[_ngcontent-%COMP%]{background:#2d0f0f url(/res/images/bg/dark_felt.png) repeat}.wm   .daily-challenge[_nghost-%COMP%]   .game[_ngcontent-%COMP%], .wm   .daily-challenge   [_nghost-%COMP%]   .game[_ngcontent-%COMP%]{background:#0e2219 url(/res/images/bg/dark_felt.png) repeat}#game-core[_ngcontent-%COMP%]{position:relative}#game-core.with-top-dummy[_ngcontent-%COMP%]{margin-top:105px}@media screen and (max-width: 599px),screen and (max-height: 767px){#game-core.with-top-dummy[_ngcontent-%COMP%]{margin-top:64px}}#game-core.with-right-dummy[_ngcontent-%COMP%]{margin-right:80px}@media screen and (max-width: 599px),screen and (max-height: 767px){#game-core.with-right-dummy[_ngcontent-%COMP%]{margin-right:40px}}#game-core.with-left-dummy[_ngcontent-%COMP%]{margin-left:80px}@media screen and (max-width: 599px),screen and (max-height: 767px){#game-core.with-left-dummy[_ngcontent-%COMP%]{margin-left:40px}}.stamp[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;color:#ffffff4d;font-size:32px}#game-core.full-width[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.dealer[_ngcontent-%COMP%]:before{position:absolute;content:"D";font-family:Roboto;background:black;color:#fff;border-radius:50%;font-size:11px;font-weight:700;margin-left:-32px;margin-top:-18px;z-index:1;border:2px solid black;padding:1px 2px 0 3px}.medal[_ngcontent-%COMP%]{position:absolute;right:4px;margin-top:-20px;padding:2px;background:#f1f1f1;border-radius:50%;max-height:16px;max-width:16px;font-size:16px}#deck[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%);left:50%;top:50%}.team-color[_ngcontent-%COMP%]{position:relative;top:-5px;height:0px;z-index:10}.team-color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:8px;width:36px;margin:auto;border-radius:24px}#player-0[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-left:-16px;margin-right:16px;color:#333}@media screen and (max-width: 320px){#player-0[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-left:-10px;margin-right:10px}}@media screen and (min-width: 600px) and (min-height: 768px){#player-0[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-left:-24px;margin-right:24px}}#error-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;visibility:hidden}.error-focus[_ngcontent-%COMP%]{box-shadow:0 0 32px 16px #ffffff80}.spinning[_ngcontent-%COMP%]{-webkit-animation-name:spin;-webkit-animation-duration:1s;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:linear;-moz-animation-name:spin;-moz-animation-duration:1s;-moz-animation-iteration-count:1;-moz-animation-timing-function:linear;-ms-animation-name:spin;-ms-animation-duration:1s;-ms-animation-iteration-count:1;-ms-animation-timing-function:linear;animation-name:spin;animation-duration:1s;animation-iteration-count:1;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.subtle-btn[_ngcontent-%COMP%]{color:#222;font-size:12px;transform:scale(.8);opacity:.8;background:rgba(255,255,255,.25)}.hud[_ngcontent-%COMP%]:not(.teams)   .top[_ngcontent-%COMP%]{background:#D1C4E9;border-radius:4px}.hud[_ngcontent-%COMP%]:not(.teams).has-hud-status   .top[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.hud[_ngcontent-%COMP%]{position:absolute;bottom:8px;transform:translateY(100%);white-space:nowrap;background:#D1C4E9;color:#14122e;border-radius:4px;z-index:12;min-width:64px;height:16px;min-height:16px;font-size:14px}@media screen and (max-width: 320px){.hud[_ngcontent-%COMP%]{min-width:60px}}@media screen and (min-width: 600px) and (min-height: 768px){.hud[_ngcontent-%COMP%]{min-width:76px;bottom:10px;transform:scale(1.2) translateY(100%)}}.hud.theme[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-align:center}.hud.update[_ngcontent-%COMP%]{width:initial;max-width:initial}.hud.update[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{opacity:1;padding:0 1px;background:#D1C4E9;border-radius:4px;font-size:14px}.hud.update[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}.hud.update[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .pts[_ngcontent-%COMP%]{float:none;padding-left:0}.hud[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{white-space:nowrap;position:relative;padding:1px 2px 0;font-size:12px}.hud[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-align:left}.hud[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .pts[_ngcontent-%COMP%]{float:right;padding-left:4px}.hud.has-hud-status[_ngcontent-%COMP%]{background:#EDE7F6;color:#000000de;height:32px;min-height:32px}.alert[_ngcontent-%COMP%]{position:absolute;right:2px;left:2px;bottom:2px;background:#ffecb3;border-radius:4px;padding:0 4px;z-index:50;min-height:44px}.alert[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px;margin-right:8px;opacity:.54}.alert.timedout[_ngcontent-%COMP%]{box-shadow:0 0 400px 200px #ffebee;font-size:14px;background:#ffcdd2;bottom:47%;min-height:80px}.alert.timedout[_ngcontent-%COMP%]   .liner[_ngcontent-%COMP%]{white-space:normal}cm-game-hand.self-hand[_ngcontent-%COMP%]{z-index:10;padding:2px}@media screen and (min-width: 600px) and (min-height: 768px){cm-game-hand.self-hand[_ngcontent-%COMP%]{padding:8px}}button.self-action[_ngcontent-%COMP%]{border-radius:4px}button.self-action[disabled][_ngcontent-%COMP%]{color:#ffffffb3}button.self-action.white-glow[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #fff9}button.self-action.chat[_ngcontent-%COMP%]{background:#FFEB3B;color:#000000de}button.self-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-8px}button.self-action[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:relative;top:-6px;height:25px;font-size:20px}button.self-action[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{position:relative;top:-14px;text-transform:uppercase;font-size:10px}@media screen and (min-width: 600px) and (min-height: 768px){button.self-action[_ngcontent-%COMP%]{width:48px;height:48px}button.self-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:-6px;width:28px;height:28px;font-size:28px}button.self-action[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{top:-4px;height:28px;font-size:24px}button.self-action[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{top:-10px;font-size:12px}}.thin-title[_ngcontent-%COMP%]{background:#00000055;color:#fffb;padding:1px 8px;font-size:10px}@media screen and (min-width: 600px) and (min-height: 768px){.thin-title[_ngcontent-%COMP%]{font-size:12px;padding:2px 8px}}.thin-title[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{opacity:.9;padding:0 4px;margin:0 -4px;border-radius:4px;color:#000;font-weight:700}.thin-title[_ngcontent-%COMP%]   .highlight.white-back[_ngcontent-%COMP%]{background:#eee}.thin-title[_ngcontent-%COMP%]   .highlight.yellow-back[_ngcontent-%COMP%]{background:yellow}.thin-title[_ngcontent-%COMP%]   .highlight.orange-back[_ngcontent-%COMP%]{background:darkorange}.thin-title[_ngcontent-%COMP%]   .highlight.red-back[_ngcontent-%COMP%]{background:red;color:#fff}.thin-title[_ngcontent-%COMP%]   .highlight.line-through[_ngcontent-%COMP%]{text-decoration:line-through}.bold-text[_ngcontent-%COMP%]{font-weight:700}.center-info[_ngcontent-%COMP%]{position:absolute;font-size:32px;left:50%;top:40%;color:#fff3;transform-origin:top left;transform:translate(-50%,-50%)}.updated-center-info[_ngcontent-%COMP%]{position:absolute;font-size:24px;left:50%;top:30%;color:#fff6;text-align:center;transform-origin:top left;transform:translate(-50%,-50%)}.updated-center-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin:8px 0;font-size:16px;color:#ffffff80}.updated-center-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff9}@media screen and (min-width: 600px) and (min-height: 768px){.updated-center-info[_ngcontent-%COMP%]{transform:scale(1.5) translate(-50%,-50%)}}mat-toolbar[_ngcontent-%COMP%]{padding:0 4px;background:#0000005e;color:#fff}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}mat-toolbar[_ngcontent-%COMP%]   .main-btn[_ngcontent-%COMP%]{margin-left:0;margin-right:0}mat-toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:0;margin-left:4px}mat-toolbar[_ngcontent-%COMP%]   .pretitle[_ngcontent-%COMP%]{margin-top:-8px;margin-bottom:-4px;opacity:.7;font-size:10px}mat-toolbar[_ngcontent-%COMP%]   .pretitle.alone[_ngcontent-%COMP%]{margin-top:-2px;margin-bottom:2px;font-size:12px;opacity:.8}mat-toolbar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-top:-14px;margin-bottom:-8px;opacity:.8;font-size:11px}@media screen and (min-width: 600px) and (min-height: 768px){mat-toolbar[_ngcontent-%COMP%]{padding:0 16px}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}mat-toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:16px}}button.txt-icon[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);color:#fffffff2;border-radius:8px;width:48px;height:48px;box-shadow:0 1px 2px #fff3}button.txt-icon.no-shadow[_ngcontent-%COMP%]{box-shadow:none}button.txt-icon.wide[_ngcontent-%COMP%]{width:64px}button.txt-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-8px}button.txt-icon[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{position:absolute;bottom:-10px;left:0;right:0;font-size:10px;font-weight:700;text-transform:uppercase}button.txt-icon[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:rgba(10,10,10,.5);border-radius:50%;line-height:20px;min-width:12px;padding:0 4px;font-size:12px}button.txt-icon[_ngcontent-%COMP%]   .badge.cost[_ngcontent-%COMP%]{color:#000;background:#ffd740}button.txt-icon[_ngcontent-%COMP%]   .badge.cost.buy[_ngcontent-%COMP%]{color:#f1f1f1;background:#f44336}button.txt-icon[_ngcontent-%COMP%]   .badge.free[_ngcontent-%COMP%]{color:#ffd740;background:#ffd740}button.txt-icon[_ngcontent-%COMP%]   .badge.alert[_ngcontent-%COMP%]{top:2px;right:2px;width:16px;height:16px;color:#f44336;background:#f44336;padding:0}button.txt-icon.raised[_ngcontent-%COMP%]{background:#f5f5f5;color:#222}']}),o})();const Ai=["canvas"],Q=32,$t=Math.PI/10;let Fi=(()=>{class o{ngOnChanges(){if(!this.canvas)return void setTimeout(()=>this.ngOnChanges(),250);if(void 0===this.context){const a=this.canvas.nativeElement;if(!a)return;const s=2;a.width=64*s,a.height=64*s,a.style.width="64px",a.style.height="64px",this.context=a.getContext("2d"),this.context.scale(s,s),this.context.translate(Q,Q)}const n=this.context,e=this.count;if(n.clearRect(-Q,-Q,64,64),0!==e){n.save(),n.rotate(-$t*(e-1)/2);for(let a=0;a<e;++a)a>0&&n.rotate($t),n.fillStyle="#1a237e",_.Ex.roundedRect(n,-7,-Q,14,Q,2),n.fill(),n.fillStyle="#303f9f",_.Ex.roundedRect(n,-6,-31,12,30,2),n.fill();n.restore()}}ngOnDestroy(){_.Ex.detatch(this.canvas)}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-mini-hand-count"]],viewQuery:function(n,e){if(1&n&&t.Gf(Ai,5),2&n){let a;t.iGM(a=t.CRH())&&(e.canvas=a.first)}},inputs:{count:"count"},features:[t.TTD],decls:2,vars:0,consts:[["canvas",""]],template:function(n,e){1&n&&t._UZ(0,"canvas",null,0)},encapsulation:2}),o})();const Di=["canvas"];let Ni=(()=>{class o{constructor(){}ngAfterViewInit(){this.renderCard()}ngOnChanges(){this.renderCard()}ngOnDestroy(){_.Ex.detatch(this.canvas)}renderCard(){!this.canvas||!this.canvas.nativeElement||function Gi(o,i,n,e,a){const s=Math.min(108,M.Ak.calculateStackWidth(n)),c=100*s/72,r=_.Ex.linkFn(i,s,c);if(!o){if(e){r.fillStyle="#ffffffbf";const C=s/3;_.Ex.drawSuit(r,a.typePrefs,0,s/2-C,c/2-C,C),_.Ex.drawSuit(r,a.typePrefs,1,s/2,c/2-C,C),_.Ex.drawSuit(r,a.typePrefs,2,s/2-C,c/2,C),_.Ex.drawSuit(r,a.typePrefs,3,s/2,c/2,C)}return}if("-"===o[0])return i.nativeElement.style.background="transparent",r.fillStyle="#1a237e",r.rect(0,0,s,c),r.fill(),r.fillStyle="#283593",_.Ex.roundedRect(r,2,2,s-4,c-4,4),r.fill(),r.translate(s/2,c/2),void M.Ak.drawLogo(r,3*s/4);if(s>=72)return void M.Ak.renderCard(o,void 0,i,s,c,void 0,a);const m=_.Ex.getColor(o,a);r.fillStyle=r.strokeStyle=m;const f=_.Ex.getSuitIndex(o);r.translate(2,2),_.Ex.fillValue(r,o[0],20,a.deckPrefs),_.Ex.drawSuit(r,a.typePrefs,f,0,20,14),r.translate(-2,-2);const p=3/4*c;_.Ex.drawSuit(r,a.typePrefs,f,s-p*(s<=32?.5:s<=40?5/8:6/8),c-7/8*p,p)}(this.card,this.canvas,this.piles,this.foundation,this.deckPrefs)}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-stack-card"]],viewQuery:function(n,e){if(1&n&&t.Gf(Di,5),2&n){let a;t.iGM(a=t.CRH())&&(e.canvas=a.first)}},hostBindings:function(n,e){1&n&&t.NdJ("resize",function(){return e.renderCard()},!1,t.Jf7)},inputs:{card:"card",piles:"piles",foundation:"foundation",deckPrefs:"deckPrefs"},features:[t.TTD],decls:2,vars:0,consts:[[1,"card"],["canvas",""]],template:function(n,e){1&n&&t._UZ(0,"canvas",0,1)},encapsulation:2}),o})(),Hi=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-game-timer"]],decls:4,vars:0,consts:[[1,"circular"],[1,"spinner","pie"],[1,"filler","pie"],[1,"mask","pie"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"div",1)(2,"div",2)(3,"div",3),t.qZA())},styles:[".circular[_ngcontent-%COMP%]{position:relative;z-index:1;background:#ef9a9a;border-radius:50%;width:76px;height:76px;margin:-8px -36px -68px;opacity:0}@media screen and (min-width: 600px) and (min-height: 768px){.circular[_ngcontent-%COMP%]{width:88px;height:88px;margin-bottom:-80px}}.has-timer.active[_nghost-%COMP%]   .circular[_ngcontent-%COMP%], .has-timer.active   [_nghost-%COMP%]   .circular[_ngcontent-%COMP%]{opacity:100}.circular[_ngcontent-%COMP%], .circular[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.circular[_ngcontent-%COMP%]   .pie[_ngcontent-%COMP%]{width:50%;height:100%;transform-origin:100% 50%;position:absolute;border:8px solid #e53935}.circular[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border-radius:100% 0 0 100%/50% 0 0 50%;z-index:200;border-right:none}.circular[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{border-radius:0 100% 100% 0/0 50% 50% 0;left:50%;opacity:0;z-index:100;border-left:none}.circular[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{border-radius:100% 0 0 100%/50% 0 0 50%;opacity:1;z-index:300;border-right:none;border-color:#ef9a9a}"]}),o})();var Ui=l(43501),Bi=l(43794),it=l(44617);function qi(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n)}}function Li(o,i){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"backspace"),t.qZA(),t.TgZ(3,"div",8),t._uU(4,"BACK"),t.qZA(),t.BQk())}function Ei(o,i){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"send"),t.qZA(),t.TgZ(3,"div",8),t._uU(4,"ENTER"),t.qZA(),t.BQk())}function zi(o,i){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"grid_off"),t.qZA(),t.TgZ(3,"div",8),t._uU(4,"HIDE"),t.qZA(),t.BQk())}function Ri(o,i){if(1&o&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.Oqu(n.focus)}}function Wi(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4,"FOCUS"),t.qZA(),t.YNc(5,Ri,2,1,"div",9),t.BQk()),2&o){const n=t.oxw(3);t.xp6(2),t.Oqu(0==n.focus?"gps_not_fixed":"gps_fixed"),t.xp6(3),t.Q6J("ngIf",n.focus>0)}}function Vi(o,i){1&o&&(t.TgZ(0,"div",11),t._UZ(1,"cm-game-toolbar",12),t.qZA())}function $i(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw(2).onClick(s)}),t.YNc(1,qi,2,1,"ng-container",6),t.YNc(2,Li,5,0,"ng-container",6),t.YNc(3,Ei,5,0,"ng-container",6),t.YNc(4,zi,5,0,"ng-container",6),t.YNc(5,Wi,6,2,"ng-container",6),t.YNc(6,Vi,2,0,"div",7),t.qZA()}if(2&o){const n=i.$implicit,e=i.index,a=i.last,s=t.oxw().index,c=t.oxw();t.Q6J("fxFlex",c.getFlex(n,s))("ngClass",c.getClass(s,e,n,a)),t.xp6(1),t.Q6J("ngIf","<*?->".indexOf(n)<0),t.xp6(1),t.Q6J("ngIf","<"==n),t.xp6(1),t.Q6J("ngIf",">"==n),t.xp6(1),t.Q6J("ngIf","-"==n),t.xp6(1),t.Q6J("ngIf","*"==n),t.xp6(1),t.Q6J("ngIf","?"==n)}}function Ki(o,i){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,$i,7,8,"div",4),t.qZA()),2&o){const n=i.index,e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.getRow(n))}}const ji=function(o){return{"fade-out-gone":o}},Xi=function(){return[0,1,2]},jt="abcdefghijklmnopqrstuvwxyz",Xt="0123456789";let ns=(()=>{class o{constructor(n){this.cacheService=n,this.word="",this.target=new t.vpe,this.scroll=new t.vpe,this.change=new t.vpe,this.done=new t.vpe,this.hide=new t.vpe,this.clear=new t.vpe}ngOnChanges(n){n.index&&n.index.currentValue!=n.index.previousValue&&(this.word="")}isFocussable(){return this.focus>=0}getRow(n){return 0==n?"qwertyuiop".split(""):1==n?"asdfghjkl".split(""):2==n?(this.getBackButton()+"zxcvbnm"+this.getEnterButton()).split(""):[]}getBackButton(){return this.word?"<":"?"}getEnterButton(){return!this.isFocussable()||this.isCompleteWord()||0===this.index?">":this.shouldHideGrid()?"-":this.leftover<=1?">":"*"}shouldHideGrid(){return!!(this.isFocusSolved()||0===this.word.length&&this.canHide)}getFlex(n,e){return 0===e?10:1===e?"a"===n||"l"===n?12:11:"?"===n||"<"===n||">"===n||">"===n?12:11}getStage(){return this.cacheService.game?this.cacheService.game.getStage():void 0}getClass(n,e,a,s){return this.getClassHelper(n,e,a)+(this.pressedKey===a?" pressed":"")+(s?" lk":"")+("<>*-".indexOf(a)>=0?" txt-key":"")}getClassHelper(n,e,a){const s="r"+n+" k"+e;if("."===a)return s+" fade0";const c=this.word.length;let r=!1;const m=jt.indexOf(a),f=this.cacheService.game.getStage();if(m<0||!f||0===this.focus)return s+" typed";let p="";const u=f.getSaved(Math.max(0,this.focus-1));if(u)for(let w in u){let T="";for(let N=0;N<u[w].length;++N){const W=u[w][N];W[0]===a&&(T+=W[1],N===c&&3==W[1]&&(r=!0))}if(T.indexOf("2")>=0||T.indexOf("3")>=0)for(;T.indexOf("1")>=0;)T=T.replace("1","0");p+=T}const C=p.indexOf("0")>=0,y=!C&&p.indexOf("1")>=0,b=p.indexOf("3")>=0,x=!b&&p.indexOf("2")>=0;let P=(y?"1":"")+(x?"2":"")+(b?"3":"");return this.index>0&&!this.positional&&""===P&&(P+=C?" chartered":" unchartered"),y&&(x||b)&&(P+=" conflict"),this.index>=16&&b&&r&&this.focus>0&&!this.isFocusSolved()&&(P+=" bright"),s+" typed t"+P}highlightPress(n){n.replace("<","*"),n.replace(">","*"),this.pressedKey=n;const e=this.pressedTimestamp=Date.now();setTimeout(()=>{this.pressedTimestamp===e&&(this.pressedKey="",this.cacheService.updateGameUi())},200)}isFocusSolved(){return this.solved}keyEvent(n){if(this.guidedFlow)return;const e=n.key;if("Enter"===e)this.onClick(this.getEnterButton(),!0);else if("Backspace"===e)n.altKey?this.clear.emit():this.onClick("<",!0);else{if(this.isFocussable()){if("ArrowRight"===e)return this.highlightPress("*"),void this.target.emit("+");if("ArrowLeft"===e)return this.highlightPress("*"),void this.target.emit("-");if("ArrowDown"===e)return void this.scroll.emit("+");if("ArrowUp"===e)return void this.scroll.emit("-")}const a=e.toLowerCase();jt.indexOf(a)>=0&&this.onClick(a,!0),Xt.indexOf(a)>=0&&(this.highlightPress("*"),this.target.emit(a))}}onClick(n,e){"."===n||"?"===n||(e&&this.highlightPress(n),"*"===n?this.target.emit("+"):"-"===n?this.hide.emit():">"===n?this.isCompleteWord()&&this.done.emit(this.word):"<"===n?this.word.length>0&&(this.word=this.word.substring(0,this.word.length-1),this.change.emit(this.index+"@"+this.word)):this.word.length<this.width&&(this.word+=n,this.change.emit(this.index+"@"+this.word)))}isCompleteWord(){return this.word.length==this.width}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(U.Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-keyboard"]],hostBindings:function(n,e){1&n&&t.NdJ("keyup",function(s){return e.keyEvent(s)},!1,t.Jf7)},inputs:{guidedFlow:"guidedFlow",gone:"gone",canHide:"canHide",positional:"positional",index:"index",width:"width",height:"height",leftover:"leftover",focus:"focus",solved:"solved"},outputs:{target:"target",scroll:"scroll",change:"change",done:"done",hide:"hide",clear:"clear"},features:[t.TTD],decls:3,vars:5,consts:[["id","keyboard","fxLayout","row","fxLayoutAlign","center",3,"ngClass"],["fxFlex","","fxLayout","column",1,"keys"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["matRipple","","class","key",3,"fxFlex","ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"key",3,"fxFlex","ngClass","click"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center",4,"ngIf"],[1,"txt"],["class","annotation",4,"ngIf"],[1,"annotation"],["fxLayout","row","fxLayoutAlign","center"],["mode","text"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Ki,2,1,"div",2),t.qZA()()),2&n&&(t.Q6J("ngClass",t.VKq(2,ji,e.gone)),t.xp6(2),t.Q6J("ngForOf",t.DdM(4,Xi)))},directives:[h.xw,h.Wh,g.mk,S.oO,h.yH,g.sg,st.wG,g.O5,Y.Hw,Wt],styles:["#keyboard[_ngcontent-%COMP%]{position:absolute;bottom:2px;left:0;right:0}#keyboard[_ngcontent-%COMP%]   .keys[_ngcontent-%COMP%]{z-index:1;max-width:600px;margin:1px}.key[_ngcontent-%COMP%]{border-radius:4px;text-align:center;color:#fff;background:black;border:1px solid black;font-weight:700;text-transform:uppercase;height:54px;position:relative;font-size:24px;padding:12px 0;margin-right:4px}@media screen and (max-width: 600px){.key[_ngcontent-%COMP%]{margin-right:2px}}@media screen and (max-width: 420px){.key[_ngcontent-%COMP%]{margin-right:1px}}.key.r0[_ngcontent-%COMP%], .key.r1[_ngcontent-%COMP%]{margin-bottom:4px}@media screen and (max-width: 600px){.key.r0[_ngcontent-%COMP%], .key.r1[_ngcontent-%COMP%]{margin-bottom:2px}}@media screen and (max-width: 420px){.key.r0[_ngcontent-%COMP%], .key.r1[_ngcontent-%COMP%]{margin-bottom:1px}}.key.r0.k9[_ngcontent-%COMP%], .key.r1.k8[_ngcontent-%COMP%], .key.r2.k8[_ngcontent-%COMP%]{margin-right:0}.key.typed.pressed[_ngcontent-%COMP%], .key.typed[_ngcontent-%COMP%]:active{color:#fffc}@media screen and (max-width: 480px){.key[_ngcontent-%COMP%]{font-size:20px;padding:13px 0}}.key[_ngcontent-%COMP%]   .annotation[_ngcontent-%COMP%]{position:absolute;font-size:12px;right:2px;top:2px;opacity:.9;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#fff;background:black;padding:0 2px;border-top-left-radius:2px;border-bottom-right-radius:2px}.key[_ngcontent-%COMP%]   .annotation.tiny[_ngcontent-%COMP%]{font-size:10px}.key[_ngcontent-%COMP%]   .annotation.yellow[_ngcontent-%COMP%]{color:#ff0}.key[_ngcontent-%COMP%]   .annotation.orange[_ngcontent-%COMP%]{color:#ff8c00}.key[_ngcontent-%COMP%]   .annotation.red[_ngcontent-%COMP%]{color:red}.key[_ngcontent-%COMP%]   .annotation.red-back[_ngcontent-%COMP%]{background:red;color:#fff}.key[_ngcontent-%COMP%]   cm-game-toolbar[_ngcontent-%COMP%]{position:relative;top:-10px;margin:0 -12px}.fade-out-gone[_ngcontent-%COMP%]{animation:fade-out-gone-animation 1s ease;opacity:0;display:none}@keyframes fade-out-gone-animation{0%{opacity:1;display:block;filter:blur(0px)}99%{opacity:0;display:block;filter:blur(4px)}to{opacity:0;display:none;filter:blur(4px)}}.bright[_ngcontent-%COMP%]{border-color:#f5f5f5!important;box-shadow:2px 2px 2px #eee5!important}.chartered[_ngcontent-%COMP%]{background:#333;border-color:#1a1a1a}.txt-key[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-4px}.txt-key[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{position:absolute;bottom:6px;left:0;right:0;font-size:10px;font-weight:700;text-transform:uppercase}"]}),o})();var es=l(55453),os=l(77446),tn=l(93075);const as=function(o,i){return{focused:o,unfocused:i}};function is(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"cm-word-grid",5),t.NdJ("hide",function(a){return t.CHM(n),t.oxw().onHide(a)})("click",function(){const s=t.CHM(n).$implicit;return t.oxw().setFocus(s.index)}),t.qZA()}if(2&o){const n=i.$implicit,e=t.oxw();t.Q6J("solving",e.isSolving())("scrollOffset",e.scrollOffset)("hidden",e.isPendingHidden(n.index))("letterPx",e.getLetterPx())("boardWidth",e.getBoardWidthPx())("boardHeight",e.getVirtualScrollHeightPx())("solution",e.getSolution(n.index))("ngClass",t.WLB(13,as,e.hasFocus(n.index),e.hasUnfocus(n.index)))("positional",e.isPositional())("grid",n)("current",e.current)("height",e.getHeight())("width",e.getWidth())}}function ss(o,i){1&o&&(t.TgZ(0,"span",19),t._uU(1,"\u2192"),t.qZA())}function cs(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"cm-word-grid",22),t.YNc(2,ss,2,0,"span",23),t.BQk()),2&o){const n=i.$implicit,e=i.last;t.xp6(1),t.Q6J("grid",n)("positional",!0)("width",1),t.xp6(1),t.Q6J("ngIf",!e)}}function rs(o,i){if(1&o&&(t.ynx(0),t.TgZ(1,"div",12)(2,"mat-icon"),t._uU(3,"touch_app"),t.qZA(),t._uU(4," Tap any of the letters above to change color "),t.qZA(),t.TgZ(5,"div",13),t.YNc(6,cs,3,4,"ng-container",14),t.qZA(),t.TgZ(7,"div",15),t._uU(8," Reset all colors using MENU on keyboard below "),t.qZA(),t.TgZ(9,"div",16)(10,"div",17)(11,"mat-icon"),t._uU(12,"menu"),t.qZA(),t.TgZ(13,"div",18),t._uU(14,"MENU"),t.qZA()(),t.TgZ(15,"span",19),t._uU(16,"\u2192"),t.qZA(),t.TgZ(17,"div",20)(18,"mat-icon"),t._uU(19,"delete"),t.qZA(),t.TgZ(20,"div",21),t._uU(21,"Clear"),t.qZA()()(),t.BQk()),2&o){const n=t.oxw(2);t.xp6(6),t.Q6J("ngForOf",n.getInfoGrids())}}function ds(o,i){1&o&&(t.ynx(0),t.TgZ(1,"div")(2,"mat-icon"),t._uU(3,"swipe"),t.qZA(),t._uU(4," Swipe across grids "),t._UZ(5,"br"),t.TgZ(6,"mat-icon"),t._uU(7,"touch_app"),t.qZA(),t._uU(8," Tap to select grid "),t._UZ(9,"br")(10,"br"),t._uU(11," Cycle through grids using FOCUS on keyboard below "),t.qZA(),t.TgZ(12,"div",24)(13,"div",17)(14,"mat-icon"),t._uU(15,"gps_not_fixed"),t.qZA(),t.TgZ(16,"div",18),t._uU(17,"FOCUS"),t.qZA()(),t.TgZ(18,"span",19),t._uU(19,"\u2192"),t.qZA(),t.TgZ(20,"div",17)(21,"mat-icon"),t._uU(22,"gps_fixed"),t.qZA(),t.TgZ(23,"div",18),t._uU(24,"FOCUS"),t.qZA()()(),t.BQk())}function gs(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",6),t.YNc(1,rs,22,1,"ng-container",7),t.YNc(2,ds,25,0,"ng-container",7),t.TgZ(3,"div",8)(4,"mat-checkbox",9),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().guidedFlowChecked=a}),t._uU(5,"Always remind me"),t.qZA(),t._UZ(6,"div",10),t.TgZ(7,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().dismissGuidedFlow()}),t._uU(8,"DONE"),t.qZA()()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.hasGuidedFlow1()),t.xp6(1),t.Q6J("ngIf",n.hasGuidedFlow2()),t.xp6(2),t.Q6J("ngModel",n.guidedFlowChecked)}}function ls(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"cm-keyboard",25),t.NdJ("hide",function(){return t.CHM(n),t.oxw().onHide()})("clear",function(){return t.CHM(n),t.oxw().onClear()})("target",function(a){return t.CHM(n),t.oxw().onFocus(a)})("scroll",function(a){return t.CHM(n),t.oxw().onVerticalScrollKeyboard(a)})("change",function(a){return t.CHM(n),t.oxw().onKeyboard(a)})("done",function(a){return t.CHM(n),t.oxw().onEnter(a)}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("gone",!n.isPending())("positional",n.isPositional())("leftover",n.getLeftover())("focus",n.getFocus())("solved",n.isFocusSolved())("canHide",n.hasSolvedGrids())("guidedFlow",n.hasGuidedFlow())("index",n.getKeyboardIndex())("height",n.getHeight())("width",n.getWidth())}}let ps=(()=>{class o{constructor(n,e,a){this.stage=n,this.cacheService=e,this.dataService=a,this.latestIndex=void 0,this.scrollOffset="0",this.current="",this.focus=0,this.pendingHidden=[],this.hidden=[],this.cachedLeftover=-1,this.lastKeyboard=-1,this.guidedFlowChecked=!1,this.doneGuidedFlow=!1}getLetterWidthPx(){if((0,O.SY)(1600)<360)return 36;{const e=(0,O.gp)();return e>=760?52:e>=600?44:40}}trackBy(n,e){return"i"+e.index}onHorizontalScroll(n){const e=this.getDisplayBoards();!e||!e[n]||(this.latestIndex=e[n].index)}onVerticalScrollKeyboard(n){const e="+"===n;this.scrollOffset=""+(parseInt(this.scrollOffset,10)+(e?1:-1))}getLetterPx(){return this.getLetterWidthPx()+4}getBoardWidthPx(){return this.getLetterPx()*this.getWidth()+8+2+(this.isPositional()?0:52)}getVirtualScrollWidthPx(){const n=(0,O.SY)(1600),a=this.getBoardWidthPx()*this.getBoardsWithIndex().length;return Math.min(n,a)}getVirtualScrollHeightPx(){const n=(0,O.fM)(),e=n<=480?164:172,a=n<=600&&(0,O.gp)()<=768?14:18;return(0,O.gp)()-e-a-2}getClass(){return this.cacheService.firebaseCache.self.meta.getWordTheme()+(this.hasGuidedFlow1()?" guided-flow gf1":this.hasGuidedFlow2()?" guided-flow gf2":"")}isPositional(){return this.stage.component.data.game.positional}getKeyboardIndex(){const n=this.getBoardsWithIndex();if(!n)return 0;let e=0;for(let a of n)e=Math.max(e,a.words.length);return this.lastKeyboard!=e&&(this.lastKeyboard=e,this.viewport&&(this.viewport.elementRef.nativeElement.classList.add("animate-grids"),setTimeout(()=>{this.viewport.elementRef.nativeElement.classList.remove("animate-grids")},1e3))),e}isDisplay(){return this.stage.isDisplay()}isPending(){return this.stage.isPending()}isSolving(){return this.isPending()&&!this.isDisplay()}hasSolvedGrids(){for(const n of this.getDisplayBoards())if(n.done)return!0;return!1}onHide(n){if(this.getDisplayBoards().length<=1)return;const e=[];if(void 0===n){let a=this.focus;if(a>0){const s=this.getBoardsWithIndex()[a-1];s.done?e.push(s.index):a=0}if(0===a)for(const s of this.getDisplayBoards())s.done&&e.push(s.index)}else e.push(n);if(0!==e.length){for(const a of e)this.pendingHidden.indexOf(a)>=0||this.pendingHidden.push(a);setTimeout(()=>{for(const s of e)this.hidden.indexOf(s)>=0||this.hidden.push(s);const a=this.getFocus();a>0&&this.hidden.indexOf(a-1)>=0&&this.onFocus(">"),this.scrollOffset="0"+this.scrollOffset,this.cacheService.updateGameUi()},500)}}isHidden(n){return!this.stage.isDisplay()&&this.hidden.indexOf(n)>=0}isPendingHidden(n){return!this.stage.isDisplay()&&this.pendingHidden.indexOf(n)>=0}getBoardsWithIndex(){return this.stage.component.data.game.infoManager.getKey("words")[0]}getDisplayBoards(){return this.stage.isDisplay()?this.getBoardsWithIndex():this.getBoardsWithIndex().filter(n=>!this.isHidden(n.index))}getLeftoverRaw(){return this.stage.component.data.game.infoManager.getKey("words")[1]}getLeftover(){const n=this.getLeftoverRaw();return 1===n&&0===this.getFocus()&&this.onFocus("+"),n}getFocus(){return this.getBoardsWithIndex().length<=1?-1:this.focus}isFocusSolved(){const n=this.getFocus();return this.focus>0&&this.getBoardsWithIndex()[n-1].done}hasFocus(n){return!!this.isSolving()&&this.focus==n+1}hasUnfocus(n){return!!this.isSolving()&&this.focus>0&&this.focus!=n+1}onClear(){this.stage.component.data.game.onClear(this.dataService)}onFocus(n){const a=this.getBoardsWithIndex().length,s=a+1;if(">"===n&&this.pendingHidden.length<a)do{this.focus=(this.focus+1)%s}while(0===this.focus||this.pendingHidden.indexOf(this.focus-1)>=0);else do{if("+"===n)this.focus=(this.focus+1)%s;else if("-"===n)this.focus=(this.focus+s-1)%s;else if(Xt.indexOf(n)>=0){this.focus=parseInt(n)%s;break}}while((0!==this.focus||this.getLeftoverRaw()<=1)&&this.getBoardsWithIndex()[this.focus-1].done);this.updatedSavedIndex(),this.updateScroll()}updatedSavedIndex(){this.stage.component.data.getStage().setSavedIndex(this.focus)}updateScroll(){if(this.viewport&&this.focus>0){const n=this.focus-1,e=this.getDisplayBoards();for(let a=0;a<e.length;++a)if(e[a].index===n){this.viewport.scrollToIndex(a,"smooth"),this.latestIndex=n;break}}}setFocus(n){1!=this.getBoardsWithIndex().length&&(this.focus=n+1,this.updatedSavedIndex())}getWidth(){return this.stage.component.data.getVariationValue(I.V.Wordzy.Option.WORD_LENGTH)}getHeight(){return this.stage.component.data.game.attempts+(this.stage.isDisplay()?1:0)}getSolution(n){if(this.stage.isDisplay())return this.stage.component.data.getStage().getProperty("bl")[n]}onKeyboard(n){this.current=n}onEnter(n){!this.stage.component.data.hasSelf()||this.dataService.stageAction(n)}getInfoGrids(){return Gt.AP}hasGuidedFlow(){return this.hasGuidedFlow1()||this.hasGuidedFlow2()}hasGuidedFlow1(){var n,e,a,s;return!this.hasGuidedFlow2()&&!this.isPositional()&&2===this.lastKeyboard&&!this.doneGuidedFlow&&(null===(s=null===(a=null===(e=null===(n=this.cacheService)||void 0===n?void 0:n.firebaseCache)||void 0===e?void 0:e.self)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.hasMasterInfoDialog())}hasGuidedFlow2(){var n,e,a,s;return this.getBoardsWithIndex().length>1&&2===this.lastKeyboard&&!this.doneGuidedFlow&&(null===(s=null===(a=null===(e=null===(n=this.cacheService)||void 0===n?void 0:n.firebaseCache)||void 0===e?void 0:e.self)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.hasManiacInfoDialog())}dismissGuidedFlow(){if(!this.guidedFlowChecked){const n=this.hasGuidedFlow1()?D.Pj:D.we;this.cacheService.firebaseCache.self.meta.setSettings(n,!0)}this.doneGuidedFlow=!0}hasKeyboard(){return!this.isDisplay()&&!this.stage.component.data.history}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A,1),t.Y36(U.Q),t.Y36(tt.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cm-word-stage"]],viewQuery:function(n,e){if(1&n&&t.Gf(it.N7,5),2&n){let a;t.iGM(a=t.CRH())&&(e.viewport=a.first)}},decls:5,vars:10,consts:[[3,"ngClass"],["orientation","horizontal",1,"word-grid-scroller","no-scrollbars","horizontal",3,"itemSize","scrolledIndexChange"],[3,"solving","scrollOffset","hidden","letterPx","boardWidth","boardHeight","solution","ngClass","positional","grid","current","height","width","hide","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["class","info-dialog mat-elevation-z8",4,"ngIf"],[3,"gone","positional","leftover","focus","solved","canHide","guidedFlow","index","height","width","hide","clear","target","scroll","change","done",4,"ngIf"],[3,"solving","scrollOffset","hidden","letterPx","boardWidth","boardHeight","solution","ngClass","positional","grid","current","height","width","hide","click"],[1,"info-dialog","mat-elevation-z8"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","center center",2,"margin-top","16px"],[3,"ngModel","ngModelChange"],["fxFlex",""],["color","green","mat-raised-button","",3,"click"],[2,"padding-bottom","16px"],["fxLayout","row","fxLayoutAlign","center center"],[4,"ngFor","ngForOf"],[2,"padding","16px 0"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],[1,"menu-btn"],[1,"txt"],[2,"font-weight","bold"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","12px",1,"clear-btn"],[2,"padding-right","8px"],["height","1",3,"grid","positional","width"],["style","font-weight: bold;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",2,"margin","16px"],[3,"gone","positional","leftover","focus","solved","canHide","guidedFlow","index","height","width","hide","clear","target","scroll","change","done"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"cdk-virtual-scroll-viewport",1),t.NdJ("scrolledIndexChange",function(s){return e.onHorizontalScroll(s)}),t.YNc(2,is,1,16,"cm-word-grid",2),t.qZA(),t.YNc(3,gs,9,3,"div",3),t.YNc(4,ls,1,10,"cm-keyboard",4),t.qZA()),2&n&&(t.Q6J("ngClass",e.getClass()),t.xp6(1),t.Udp("height",e.getVirtualScrollHeightPx(),"px")("width",e.getVirtualScrollWidthPx(),"px"),t.Q6J("itemSize",e.getBoardWidthPx()),t.xp6(1),t.Q6J("cdkVirtualForOf",e.getDisplayBoards())("cdkVirtualForTrackBy",e.trackBy),t.xp6(1),t.Q6J("ngIf",e.hasGuidedFlow()),t.xp6(1),t.Q6J("ngIf",e.hasKeyboard()))},directives:[g.mk,S.oO,it.N7,it.xd,it.x0,es.K,g.O5,Y.Hw,h.xw,h.Wh,g.sg,h.SQ,os.oG,tn.JJ,tn.On,h.yH,F.lW,ns],encapsulation:2}),o})();var ms=l(77469),_s=l(4834);let hs=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[],imports:[[an.m,st.si,sn.TE]]}),o})();t.B6R(H.$,[g.mk,S.oO,g.RF,g.n9,Wt,g.O5,A,Ja,h.s9,h.xw,h.yH,h.Wh,ct,g.sg,h.SQ,F.lW,Y.Hw,nt,Hi,X.A,mt.S,j,V],[ms.u]),t.B6R(nt,[g.RF,g.n9,h.xw,h.Wh,g.sg,Bt,g.O5,F.lW,M.Ak,g.mk,S.oO,Fi,ft],[]),t.B6R(ct,[g.O5,h.SQ,g.mk,S.oO,h.xw,F.lW,Y.Hw,g.sg,h.Wh,h.yH,g.RF,g.n9,M.Ak,wt,g.ED,j,V],[]),t.B6R(xt,[h.xw,h.Wh,g.O5,wt,g.sg,Bt,Ni,g.mk,S.oO,h.yH],[]),t.B6R(A,[h.xw,g.mk,S.oO,g.RF,h.Wh,g.n9,z,Re,xt,g.O5,ps,Oa,ha,Na,Ra,zt.Ye,Lt._,h.yH,F.lW,Y.Hw,g.sg,_s.d],[Rt.X]),t.B6R(V,[g.RF,g.n9,$n,re,g.ED],[]),t.B6R(Bi.j,[F.lW,Y.Hw,Ui.h],[])}}]);